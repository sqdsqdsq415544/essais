(function(e){var t=require("ankama.widget"),n=require("lodash");t.widget("ankama.ak_masterpage",t.ankama.widget,{options:{initSelector:"body"},sCurrentProfile:null,iTimeout:null,_create:function(){var n=this;t(e).on("resize",t.proxy(n._onWindowResize,n)),e!==e.top&&!n.element.hasClass("ak-iframe-allow")&&(e.top.location.href=e.location.href);var r=t(".ak-lazyload-notifications");if(r.length){var i=[];r.each(function(){i.push(t(this).data("position"))}),t.ajax("/"+e.location.pathname.split("/")[1]+"/notifications",{data:{positions:i},dataType:"json"}).done(function(e){typeof e=="object"&&r.each(function(){var r=t(this).data("position");r in e&&e[r]?(t(this).html(e[r]).show().trigger("widgetcreate"),n.element.addClass("notifications-"+r.toLowerCase())):t(this).remove()})})}},_init:function(){var e=this;e.sCurrentProfile=t.getCurrentProfile()},_onWindowResize:function(){var n=this;e.clearTimeout(n.iTimeout),n.iTimeout=e.setTimeout(function(){t.getCurrentProfile()!==n.sCurrentProfile&&(t(document).trigger("profilechange",[n.sCurrentProfile,t.getCurrentProfile()]),n.sCurrentProfile=t.getCurrentProfile())},200)}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_masterpage.prototype.enhanceWithin(e.target)})})(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("jquery.loadmask"),require("jquery.pjax"),n.widget("ankama.ak_ajaxloader",n.ankama.widget,{options:{initSelector:".ak-ajaxloader",bindSubmitEvent:!0,scrollOffset:0,direct:!1,removeEmptyFields:!1,handleClick:!0,pjax:{timeout:3e4,scrollTo:!1}},_create:function(){var e=this;if(!n.support.pjax)return!1;var t=this.element,i=this.options.pjax.container||t.akmData("target")||"body",s=this.options.pjax.fragment||t.akmData("fragment")||i;r.merge(this.options.pjax,{container:i,fragment:s}),t.is("form")?(t.prop("method").toLowerCase()=="post"&&typeof this.options.pjax.push=="undefined"&&(this.options.pjax.push=!1),this.option("bindSubmitEvent")===!0&&t.on("submit",function(t){e.processSubmit(t)})):(t.on("direct.ajaxloader",function(){n.pjax(r.clone(e.options.pjax))}),this.option("handleClick")&&t.on("click",t.is("a")?null:"a",function(t){n.pjax.click(t,r.clone(e.options.pjax))}))},_sLastContainer:null,_init:function(){var e=this.options.pjax.container,t=this.element,i=this;delete this.options.pjax.data;if(this.options.scroll){var s=null;this.options.scrollElement&&n(this.options.scrollElement).length!=0?s=n(this.options.scrollElement):n(this.options.pjax.container).length!=0&&(s=n(this.options.pjax.container)),s&&r.merge(this.options.pjax,{scrollTo:s.offset().top-this.options.scrollOffset})}this._sLastContainer&&this._sLastContainer!=e&&(n(this._sLastContainer).off("pjax:start"),n(this._sLastContainer).off("pjax:end")),e!=this._sLastContainer&&(n(e).data("ajaxloader")||(n(e).on("pjax:start",function(e){var t=n.contains(i.element[0],e.target);(i.options.direct&&i.element[0]==e.target||t)&&e.stopPropagation(),t||n(this).mask()}),n(e).on("pjax:complete",function(){n(this).unmask()}),n(e).on("pjax:end",function(){n(this).unmask(),n(document).trigger("widgetcreate"),n(this).trigger("ajaxloaded")})),n(e).data("ajaxloader",!0)),this._sLastContainer=e,t.is("form")&&n('[type="submit"]',t).on("click",function(){t.data("button",this)})},_destroy:function(){this._sLastContainer&&!n(this._sLastContainer).contains(this.element)&&n(this._sLastContainer).off("pjax:start")},processSubmit:function(e){var t=this,i=this.element,s=i.data("button");t.options.pjax.data||(t.options.pjax.data=i.serializeArray()),s&&s.name&&s.value&&r.findIndex(t.options.pjax.data,{name:s.name})==-1&&t.options.pjax.data.push({name:s.name,value:s.value}),t.options.removeEmptyFields&&(t.options.pjax.data=n.grep(t.options.pjax.data,function(e){return!r.isEmpty(e.value)})),n.pjax.submit(e,r.clone(t.options.pjax))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_ajaxloader.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget");n=require("jquery.jstorage");var r=require("lodash");n.widget("ankama.ak_history",n.ankama.widget,{options:{initSelector:".ak-history",templateSelector:".ak-history-template",storageKey:"HISTORIC_ENCYCLO",storage:[],maxElements:10},_jqParent:null,_create:function(){this._jqParent=this.element,this.options.template||(this.options.template=this.element.find(this.options.templateSelector)[0].outerHTML,this._jqParent=this.element.find(this.options.templateSelector).parent(),this.element.find(this.options.templateSelector).remove()),this.store(),this.refresh()},refresh:function(){var e=n.jStorage.get(this.options.storageKey);if(e){e=e.slice(),e.reverse();var t=this.options.template,r=[];for(var i=0;i<e.length;i++){var s=t.replace(/\[-TYPE-\]/g,e[i].type).replace(/\[-TITLE-\]/g,e[i].title).replace(/\[-HREF-\]/g,e[i].href).replace(/\[-IMAGE-\]/g,n("<img>").attr("src",e[i].image)[0].outerHTML).replace(/\[-ASIDE-\]/g,e[i].aside?e[i].aside:""),o=n(s).removeClass("hide");o.find("div:empty").remove(),r.push(o)}this._jqParent.append(r),r=null}},store:function(){var e=this.options.storage;if(n.isEmptyObject(e))return!1;var t=n.jStorage.get(this.options.storageKey);n.isArray(t)||(t=[]);var r=[];for(var i=0;i<t.length;i++)(t[i].type!=e.type||t[i].id!=e.id)&&r.push(t[i]);r.length>=this.options.maxElements&&(r=r.splice(r.length-(this.options.maxElements-1),this.options.maxElements-1)),r.push(e),n.jStorage.set(this.options.storageKey,r)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_history.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("ankama.widget"),n=require("lodash");require("ankama.ui.dialog"),require("jquery.pjax"),require("jquery.validate"),require("jquery.ankama"),require("jquery.serialize-object"),t.validator.addMethod("server",function(e,n,r){var i=t(arguments[1].form).data().options.wn,s=t(arguments[1].form).data()["ankama-"+i];return Object.getPrototypeOf(s).remoteValidation.apply(s,arguments),"pending"}),t.validator.addMethod("alphanum",function(e,t){return this.optional(t)||/^[a-zA-Z0-9\-]+$/i.test(e)}),t.validator.addMethod("alpha",function(e,t){return this.optional(t)||/^[a-zA-Z\-]+$/i.test(e)}),t.validator.addMethod("editor_required",function(e,n,r){if(typeof CKEDITOR!="undefined"){var i;t.each(CKEDITOR.instances,function(e,t){t.editable().isInline()&&t.fire("blur"),t.element.getNameAtt()==n.name&&(i=t)});if(i)return i.getData()!=""}return!0}),t.validator.addMethod("notEqualTo",function(e,n,r){var i=t(r);return this.settings.onfocusout&&i.unbind(".validate-notEqualTo").bind("blur.validate-notEqualTo",function(){t(n).valid()}),e!==i.val()}),t.widget("ankama.ak_simpleform",t.ankama.widget,{options:{initSelector:".ak-simpleform",helpPopupBtnCls:"ak-btn-popup",server:{xhrFields:{withCredentials:!0}},disabledClass:"disabled",ajaxSubmit:!0,ajaxFragment:null,ajaxTarget:null,pjaxSettings:{timeout:2e4,scrollTo:!1},validate:{rules:{},messages:{},onkeyup:!0,focusCleanup:!1,focusInvalid:!0,ignoreTitle:!0,debug:!1}},jqValidator:null,aFieldsOptions:[],_oErrorFieldHandlers:{},_invalidServersValidations:null,_destroy:function(){this.jqValidator=null},_create:function(){var e=this,r=t(this.element),i=r.akmData("target")||e.option("ajaxTarget")||"body",s=r.akmData("fragment")||e.option("ajaxFragment")||i;e._invalidServersValidations=[],e.option("wn",e.widgetName),n.merge(e.options.pjaxSettings,{container:i,fragment:s}),r.ak_ajaxloader({bindSubmitEvent:!1,pjax:e.options.pjaxSettings}),r.on("reset_form",function(t,n){e._reset(n)}),this.element.data("options",this.options),this._superApply(arguments)},iTimerId:null,_init:function(){var s=this,o=t(this.element),u=t.akLang(),a=t.akClientLang(),f=r[u]||r[a]||r.en;this.element.data("validator")&&(this.element.removeData("validator"),this.element.unbind("submit")),this._addHelpTooltip(),s.aFieldsOptions=[],this.options.validate.rules={},this.options.validate.messages={},this.options.validate.groups={},n.each(this.element.find(":input"),t.proxy(function(r){var o=t(r),l=o.akOptions();if(n.isEmpty(l))return;s.aFieldsOptions[r.name]=l,o.data("alt-fieldname")&&(this.options.validate.groups[r.name]=r.name+" "+o.data("alt-fieldname")),o.attr("id")||o.attr("id",n.uniqueId("ak_field_"));var c=o.attr("name");if("validation"in l)var h=l.validation.rules;h!==e&&(this.options.validate.rules[c]={},this.options.validate.messages[c]={},n.each(h,function(e){var t;n.has(e,"message")&&(n.isEmpty(e.message)||(t=e.message),delete e.message),n.forIn(e,function(e,r){var o;r in i&&(o=i[r][u]||i[r][a]),typeof o=="function"&&(o=o.apply(this,n.isArray(e)?e:[e])),s.options.validate.rules[c][r]=e,s.options.validate.messages[c][r]=t||o||l.validation.message||f})})),"validation"in l&&(l.validation.remote===!0||l.validation.remote==="true")&&(s.options.validate.rules[c].server=!0)},this)),t(this.element).validate(t.extend(this.options.validate,{submitHandler:t.proxy(this.submit,this),invalidHandler:t.proxy(this.formInvalidHandler,this),showErrors:t.proxy(this.formShowErrors,this),onfocusout:t.proxy(this.elementFocusOut,this),onclick:t.proxy(this.elementClick,this),onkeyup:t.proxy(this.elementKeyUp,this),highlight:t.proxy(this.elementError,this),success:t.proxy(this.elementSuccess,this),errorPlacement:t.proxy(this.elementErrorPlacement,this)})),this.jqValidator=this.element.data("validator"),t(window).delegate(s.element,"resize",function(){clearTimeout(s.iTimerId),s.iTimerId=setTimeout(t.proxy(s._addHelpTooltip,s),250)})},_addHelpTooltip:function(){var e=this.element.closest(".ak-modal-wrapper");n.each(this.element.find(":input"),t.proxy(function(r){var i=t(r),s=i.akOptions();if(!(!n.isEmpty(s)&&"tooltip"in s))return;var o=i.nextAll(".ak-btn-popup:visible");if(o.length){if(!i.data("btnpopued")&&!i.nextAll(".ak-tooltip").length){var u=i.ak_tooltip("getOptions");i.nextAll(".ak-btn-popup:visible").ak_tooltip(n.merge(u,{manual:!0,tooltip:{position:{my:"center left",at:"center right",viewport:t(window)},show:{event:"click",delay:0,effect:!1},hide:{event:"click unfocus",delay:0,effect:!1}}})),i.data("btnpopued",!0)}i.data("ankama-ak_tooltip")&&e.length?i.ak_tooltip("destroy"):i.ak_tooltip("disable")}else i.data("btnpopued")?i.ak_tooltip("enable"):(i.attr("type")=="text"||i.attr("type")=="password"||i.attr("type")=="email")&&i.ak_tooltip("disable")},this))},submit:function(e,r){var i=this,s=t(this.element);if(i.beforeSubmit(arguments)===!1)return!1;if(s.triggerHandler("beforesubmit")===!1)return!1;var o=i.element.find("input[type=submit]");i.options.ajaxSubmit&&t.support.pjax?(o.addClass(i.options.disabledClass),i.element.parents(".qtip").length&&i.element.parents(".qtip").qtip("disable"),t(i.options.pjaxSettings.container).one("pjax:requested",function(){i.element.parents(".qtip").length&&i.element.parents(".qtip").qtip("enable"),o.removeClass(i.options.disabledClass),i._onSubmitted.apply(i,arguments)}),t(i.options.pjaxSettings.container).one("pjax:end",function(){i.element.parents(".qtip").length&&setTimeout(function(){i.element.parents(".qtip").qtip("api").reposition(null,!1)},0)}),s.ak_ajaxloader(),s.ak_ajaxloader("option","pjax",n.merge(s.ak_ajaxloader("option","pjax"),i.options.pjaxSettings)),s.ak_ajaxloader("processSubmit",r)):(o.addClass(i.options.disabledClass),e.submit())},_reset:function(e){var r=this,i=t(this.element);i.get(0).reset(),i.find(".ak-cascading").each(function(e,n){t(".form-group",this).each(function(e,n){e>0&&t(n).remove()})}),i.find(".ak-select").each(function(e,n){t(this).trigger("chosen:updated")}),n.isFunction(e)&&e.call(r)},_onSubmitted:function(e,t,n,r,i){},beforeSubmit:function(){return!(this._invalidServersValidations.length>0)},getField:function(e){return this.element.find(':input[name="'+e+'"]')},elementFocusOut:function(e,n){t.validator.defaults.onfocusout.apply(this.jqValidator,arguments)},elementClick:function(e,n){t.validator.defaults.onclick.apply(this.jqValidator,arguments)},elementKeyUp:function(e,t){var n=this;if(t.keyCode===9&&this.jqValidator.elementValue(e)==="")return!1},elementError:function(e,n,r){var i=this,s=t(e);s.closest(".form-group").removeClass("has-success").addClass("has-error"),i.toogleTooltip(s,!0)},elementUnError:function(e,n,r){var i=this,s=t(e);s.closest(".form-group").removeClass("has-error")},elementSuccess:function(e,n){var r=this,i=t(n);n.type!=="checkbox"?e.closest(".form-group").removeClass("has-error").addClass("has-success"):e.closest(".form-group").removeClass("has-error"),r.toogleTooltip(i,!1)},elementErrorPlacement:function(e,n){t(e).addClass("control-label");if(!n.is(":checkbox")){var r=n.next('script[type="application/json"]').first();t(e).insertAfter(r.length>0?r:n)}else t(e).insertAfter(n.parent())},toogleTooltip:function(e,t){var r=e.akOptions();if(!n.isEmpty(r)&&"tooltip"in r){t=!n.isUndefined(t)&&n.isBoolean(t)?t:!0;if(!e.data("ankama-ak_tooltip"))return;if(!e.data("ankama-ak_tooltip"))return;t?(e.ak_tooltip("enable"),e.ak_tooltip("show")):(e.ak_tooltip("hide"),e.ak_tooltip("disable"))}},beforeSerialize:function(e,t){},formInvalidHandler:function(e,t){},formShowErrors:function(e,t){this.jqValidator.defaultShowErrors()},remoteValidation:function(e,r,i){var s=this,o=n.clone(s.options.validate.rules[r.name]);delete o.server;var u=n.clone(s.options.server),a=u.contentType==="application/json",f=n.merge(u,{url:s.element.attr("action")||s.options.server.url||window.location.href,type:s.element.attr("method")||"POST",beforeSend:function(e,n){a||e.setRequestHeader("X-Requested-With","XMLHttpRequest"),t(r).parent(".controls").addClass("working")},complete:function(){t(r).parent(".controls").removeClass("working")},data:{sTestField:t(r).data("alt-fieldname")||t(r).attr("name"),aFormData:s.element.serializeObject()},dataFilter:t.proxy(s._parseResult,s)},i);a&&n.isObject(f.data)&&(f.data=JSON.stringify(f.data));var l=s._getAlternativeElement(r),r=l.get(0),e=l.val();return t.validator.methods.remote.call(s.jqValidator,e,r,f)},_parseResult:function(e){var n=this,r=t.parseJSON(e),i=r.result.valid===!0,s=this.jqValidator.findByName(r.result.field).get(0),o=t(s);return i&&this._invalidServersValidations.indexOf(s.name)>-1&&this._invalidServersValidations.splice(this._invalidServersValidations.indexOf(s.name),1),o.data("validate-result",r),this.jqValidator.stopRequest(s,i),i?!0:(this._invalidServersValidations.indexOf(s.name)==-1&&this._invalidServersValidations.push(s.name),this._oErrorFieldHandlers&&typeof this._oErrorFieldHandlers[s.name]!="undefined"&&this._oErrorFieldHandlers[s.name].apply(this,[s,r]),this.jqValidator.settings.messages[n._getOriginalElement(s).get(0).name].server=r.result.errors[s.name],this.jqValidator.settings.messages[s.name].server=r.result.errors[s.name],'"'+r.result.errors[s.name].replace(/"/g,"&quot;")+'"')},_getAlternativeElement:function(e){var n=this,r=t(e);return r.data("alt-fieldname")?t(':input[name="'+r.data("alt-fieldname")+'"]'):r},_getOriginalElement:function(e){var n=this,r=t(e);return r.data("ori-fieldname")?t(':input[name="'+r.data("ori-fieldname")+'"]',n.element):r}});var r={fr:"[FR] Ce champ contient des erreurs",en:"This field contains errors",de:"[DE] This field contains errors",es:"[ES] This field contains errors",it:"[IT] This field contains errors",pt:"[PT] This field contains errors"},i={required:{fr:"Ce champ est requis",en:"This field is required.",de:"Pflichtfeld",es:"Campo obligatorio.",it:"Questo campo Ã¨ obbligatorio.",pt:"Este campo Ã© obrigatÃ³rio"},remote:{fr:"[FR] Please fix this field.",en:"Please fix this field.",de:"[DE] Please fix this field.",es:"[ES] Please fix this field.",it:"[IT] Please fix this field.",pt:"[PT] Please fix this field."},email:{fr:"[FR] Please enter a valid email address.",en:"Please enter a valid email address.",de:"[DE] Please enter a valid email address.",es:"[ES] Please enter a valid email address.",it:"[IT] Please enter a valid email address.",pt:"[PT] Please enter a valid email address."},url:{fr:"[FR] Please enter a valid URL.",en:"Please enter a valid URL.",de:"[DE] Please enter a valid URL.",es:"[ES] Please enter a valid URL.",it:"[IT] Please enter a valid URL.",pt:"[PT] Please enter a valid URL."},date:{fr:"[FR] Please enter a valid date.",en:"Please enter a valid date.",de:"[DE] Please enter a valid date.",es:"[ES] Please enter a valid date.",it:"[IT] Please enter a valid date.",pt:"[PT] Please enter a valid date."},dateISO:{fr:"[FR] Please enter a valid date (ISO).",en:"Please enter a valid date (ISO).",de:"[DE] Please enter a valid date (ISO).",es:"[ES] Please enter a valid date (ISO).",it:"[IT] Please enter a valid date (ISO).",pt:"[PT] Please enter a valid date (ISO)."},number:{fr:"[FR] Please enter a valid number.",en:"Please enter a valid date (ISO).",de:"[DE] Please enter a valid date (ISO).",es:"[ES] Please enter a valid date (ISO).",it:"[IT] Please enter a valid date (ISO).",pt:"[PT] Please enter a valid date (ISO)."},digits:{fr:"[FR] Please enter only digits.",en:"Please enter only digits.",de:"[DE] Please enter only digits.",es:"[ES] Please enter only digits.",it:"[IT] Please enter only digits.",pt:"[PT] Please enter only digits."},creditcard:{fr:"[FR] Please enter a valid credit card number.",en:"Please enter a valid credit card number.",de:"[DE] Please enter a valid credit card number.",es:"[ES] Please enter a valid credit card number.",it:"[IT] Please enter a valid credit card number.",pt:"[PT] Please enter a valid credit card number."},equalTo:{fr:"[FR] Please enter the same value again.",en:"Please enter the same value again.",de:"[DE] Please enter the same value again.",es:"[ES] Please enter the same value again.",it:"[IT] Please enter the same value again.",pt:"[PT] Please enter the same value again."},maxlength:{fr:t.validator.format("[FR] Please enter no more than {0} characters."),en:t.validator.format("Please enter no more than {0} characters."),de:t.validator.format("[DE] Please enter no more than {0} characters."),es:t.validator.format("[ES] Please enter no more than {0} characters."),it:t.validator.format("[IT] Please enter no more than {0} characters."),pt:t.validator.format("[PT] Please enter no more than {0} characters.")},minlength:{fr:t.validator.format("[FR] Please enter at least {0} characters."),en:t.validator.format("Please enter at least {0} characters."),de:t.validator.format("[DE] Please enter at least {0} characters."),es:t.validator.format("[ES] Please enter at least {0} characters."),it:t.validator.format("[IT] Please enter at least {0} characters."),pt:t.validator.format("[PT] Please enter at least {0} characters.")},rangelength:{fr:t.validator.format("[FR] Please enter a value between {0} and {1} characters long."),en:t.validator.format("Please enter a value between {0} and {1} characters long."),de:t.validator.format("[DE] Please enter a value between {0} and {1} characters long."),es:t.validator.format("[ES] Please enter a value between {0} and {1} characters long."),it:t.validator.format("[IT] Please enter a value between {0} and {1} characters long."),pt:t.validator.format("[PT] Please enter a value between {0} and {1} characters long.")},range:{fr:t.validator.format("[FR] Please enter a value between {0} and {1}."),en:t.validator.format("Please enter a value between {0} and {1}."),de:t.validator.format("[DE] Please enter a value between {0} and {1}."),es:t.validator.format("[ES] Please enter a value between {0} and {1}."),it:t.validator.format("[IT] Please enter a value between {0} and {1}."),pt:t.validator.format("[PT] Please enter a value between {0} and {1}.")},max:{fr:t.validator.format("[FR] Please enter a value less than or equal to {0}."),en:t.validator.format("Please enter a value less than or equal to {0}."),de:t.validator.format("[DE] Please enter a value less than or equal to {0}."),es:t.validator.format("[ES] Please enter a value less than or equal to {0}."),it:t.validator.format("[IT] Please enter a value less than or equal to {0}."),pt:t.validator.format("[PT] Please enter a value less than or equal to {0}.")},min:{fr:t.validator.format("[FR] Please enter a value greater than or equal to {0}."),en:t.validator.format("Please enter a value greater than or equal to {0}."),de:t.validator.format("[DE] Please enter a value greater than or equal to {0}."),es:t.validator.format("[ES] Please enter a value greater than or equal to {0}."),it:t.validator.format("[IT] Please enter a value greater than or equal to {0}."),pt:t.validator.format("[PT] Please enter a value greater than or equal to {0}.")}},r={fr:"[FR] Ce champ contient des erreurs",en:"This field contains errors",de:"[DE] This field contains errors",es:"[ES] This field contains errors",it:"[IT] This field contains errors",pt:"[PT] This field contains errors"},i={required:{fr:"Ce champ est requis",en:"This field is required.",de:"Pflichtfeld",es:"Campo obligatorio.",it:"Questo campo Ã¨ obbligatorio.",pt:"Este campo Ã© obrigatÃ³rio"},remote:{fr:"[FR] Please fix this field.",en:"Please fix this field.",de:"[DE] Please fix this field.",es:"[ES] Please fix this field.",it:"[IT] Please fix this field.",pt:"[PT] Please fix this field."},email:{fr:"[FR] Please enter a valid email address.",en:"Please enter a valid email address.",de:"[DE] Please enter a valid email address.",es:"[ES] Please enter a valid email address.",it:"[IT] Please enter a valid email address.",pt:"[PT] Please enter a valid email address."},url:{fr:"[FR] Please enter a valid URL.",en:"Please enter a valid URL.",de:"[DE] Please enter a valid URL.",es:"[ES] Please enter a valid URL.",it:"[IT] Please enter a valid URL.",pt:"[PT] Please enter a valid URL."},date:{fr:"[FR] Please enter a valid date.",en:"Please enter a valid date.",de:"[DE] Please enter a valid date.",es:"[ES] Please enter a valid date.",it:"[IT] Please enter a valid date.",pt:"[PT] Please enter a valid date."},dateISO:{fr:"[FR] Please enter a valid date (ISO).",en:"Please enter a valid date (ISO).",de:"[DE] Please enter a valid date (ISO).",es:"[ES] Please enter a valid date (ISO).",it:"[IT] Please enter a valid date (ISO).",pt:"[PT] Please enter a valid date (ISO)."},number:{fr:"[FR] Please enter a valid number.",en:"Please enter a valid date (ISO).",de:"[DE] Please enter a valid date (ISO).",es:"[ES] Please enter a valid date (ISO).",it:"[IT] Please enter a valid date (ISO).",pt:"[PT] Please enter a valid date (ISO)."},digits:{fr:"[FR] Please enter only digits.",en:"Please enter only digits.",de:"[DE] Please enter only digits.",es:"[ES] Please enter only digits.",it:"[IT] Please enter only digits.",pt:"[PT] Please enter only digits."},creditcard:{fr:"[FR] Please enter a valid credit card number.",en:"Please enter a valid credit card number.",de:"[DE] Please enter a valid credit card number.",es:"[ES] Please enter a valid credit card number.",it:"[IT] Please enter a valid credit card number.",pt:"[PT] Please enter a valid credit card number."},equalTo:{fr:"[FR] Please enter the same value again.",en:"Please enter the same value again.",de:"[DE] Please enter the same value again.",es:"[ES] Please enter the same value again.",it:"[IT] Please enter the same value again.",pt:"[PT] Please enter the same value again."},maxlength:{fr:t.validator.format("[FR] Please enter no more than {0} characters."),en:t.validator.format("Please enter no more than {0} characters."),de:t.validator.format("[DE] Please enter no more than {0} characters."),es:t.validator.format("[ES] Please enter no more than {0} characters."),it:t.validator.format("[IT] Please enter no more than {0} characters."),pt:t.validator.format("[PT] Please enter no more than {0} characters.")},minlength:{fr:t.validator.format("[FR] Please enter at least {0} characters."),en:t.validator.format("Please enter at least {0} characters."),de:t.validator.format("[DE] Please enter at least {0} characters."),es:t.validator.format("[ES] Please enter at least {0} characters."),it:t.validator.format("[IT] Please enter at least {0} characters."),pt:t.validator.format("[PT] Please enter at least {0} characters.")},rangelength:{fr:t.validator.format("[FR] Please enter a value between {0} and {1} characters long."),en:t.validator.format("Please enter a value between {0} and {1} characters long."),de:t.validator.format("[DE] Please enter a value between {0} and {1} characters long."),es:t.validator.format("[ES] Please enter a value between {0} and {1} characters long."),it:t.validator.format("[IT] Please enter a value between {0} and {1} characters long."),pt:t.validator.format("[PT] Please enter a value between {0} and {1} characters long.")},range:{fr:t.validator.format("[FR] Please enter a value between {0} and {1}."),en:t.validator.format("Please enter a value between {0} and {1}."),de:t.validator.format("[DE] Please enter a value between {0} and {1}."),es:t.validator.format("[ES] Please enter a value between {0} and {1}."),it:t.validator.format("[IT] Please enter a value between {0} and {1}."),pt:t.validator.format("[PT] Please enter a value between {0} and {1}.")},max:{fr:t.validator.format("[FR] Please enter a value less than or equal to {0}."),en:t.validator.format("Please enter a value less than or equal to {0}."),de:t.validator.format("[DE] Please enter a value less than or equal to {0}."),es:t.validator.format("[ES] Please enter a value less than or equal to {0}."),it:t.validator.format("[IT] Please enter a value less than or equal to {0}."),pt:t.validator.format("[PT] Please enter a value less than or equal to {0}.")},min:{fr:t.validator.format("[FR] Please enter a value greater than or equal to {0}."),en:t.validator.format("Please enter a value greater than or equal to {0}."),de:t.validator.format("[DE] Please enter a value greater than or equal to {0}."),es:t.validator.format("[ES] Please enter a value greater than or equal to {0}."),it:t.validator.format("[IT] Please enter a value greater than or equal to {0}."),pt:t.validator.format("[PT] Please enter a value greater than or equal to {0}.")}};t(document).bind("ready widgetcreate",function(e){t.ankama.ak_simpleform.prototype.enhanceWithin(e.target)})}(),function(e){var t=require("ankama.widget"),n=require("lodash");require("jquery.steps"),t.widget("ankama.ak_stepform",t.ankama.ak_simpleform,{options:{initSelector:".ak-stepform",headerTag:"h4",bodyTag:"fieldset",transitionEffect:"fade",forceMoveForward:!0,enablePagination:!1,startIndex:0},_create:function(){this._superApply(arguments);var e=n.merge(this.options,{onStepChanging:t.proxy(this.stepChanging,this),onStepChanged:t.proxy(this.stepChanged,this),onFinishing:t.proxy(this.stepsFinishing,this),onFinished:t.proxy(this.stepsFinished,this)});this.element.steps(e),t(this.element).trigger("widgetcreate")},stepChanging:function(e,t,n){return t>n?!0:(t<n&&(this.element.find(".body:eq("+n+") label.error").remove(),this.element.find(".body:eq("+n+") .error").removeClass("error")),this.element.valid())},stepChanged:function(e,t,n){},stepsFinishing:function(e,t){return this.element.valid()},stepsFinished:function(e,t){this.submit()},elementSuccess:function(e,t){this._superApply(arguments),this.stepValid()},elementError:function(e,t,n){this._superApply(arguments),this.stepValid()},elementClick:function(e,t){this._superApply(arguments),this.stepValid()},stepValid:function(){},getStepElements:function(){return this.jqValidator.elements()}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_stepform.prototype.enhanceWithin(e.target)})}(),function(e,t){"use strict";var n=require("ankama.widget");require("jquery.ui.autocomplete"),require("jquery.pjax"),n.widget("ankama.ak_autocomplete",n.ankama.widget,{options:{initSelector:".ak-autocomplete",triggerSelector:".ak-expander",url:null,minLength:1,delay:500,shownoresults:!0,noresults:"",source:null,select:"",submitOnSelect:!0,expand:null},initValue:"",_searchText:"",_bTriggered:!1,_destroy:function(){this.element.autocomplete("destroy"),this._super()},_create:function(){this.initValue=this.element.val();var r=this,i=n(this.element).data("page"),s=!1;r.element.parent().find(r.options.triggerSelector).length&&r.element.parent().find(r.options.triggerSelector).click(function(e){r.element.trigger("expand")}),i&&this._on({keypress:function(e){if(e.which===13&&n(r.element).val()!=="")return r.element.autocomplete("disable"),s=!0,!1}}),this._on({expand:this._onExpand,focus:this._onFocus,blur:this._onBlur}),this.element.parent().find("input[type=submit]").length&&this.element.parent().find("input[type=submit]").on("click",function(e){r.initValue===r.element.val()&&r.element.val("")}),!this.options.url&&this.element.parents("form").length&&!this.options.source&&(this.options.url=this.element.parents("form").attr("action")),this.element.autocomplete({minLength:this.options.minLength,delay:this.options.delay,source:this.options.url?this.options.url:this.options.source&&this.options.source.length?this.options.source:"",appendTo:this.element.parent(),position:{my:"right top",at:"right bottom",collision:"none"},autoFocus:!0,search:function(e,t){r._bTriggered?(r._bTriggered=!1,r._searchText=""):r._searchText=r.element.val().trim();if(s)return!1},open:function(e,t){n(document).trigger("widgetcreate")},select:function(i,s){var o=r.options.select;return r.options.submitOnSelect&&s.item.nolink===!0&&r.element.parents("form").length&&r.options.shownoresults?(r.element.parents("form").submit(),!1):(o==="location"&&s.item.link!==t?e.location.href=s.item.link:n.isFunction(o)?o.apply(i,s):n.isPlainObject(o)&&"pjax"in o&&o.pjax!==""&&s.item.link!==t&&n.pjax({url:s.item.link,container:o.pjax}),r.element.val(s.item.value),i.preventDefault(),!1)},response:function(e,t){!t.content.length&&r.options.shownoresults&&t.content.push({value:r._searchText,nolink:!0,label:r.options.noresults?r.options.noresults:"No Results"})}}),this.element.data("ui-autocomplete")._renderItem=function(e,t){var i=!1;typeof fbq=="function"&&(i=!0);var s=n(t.nolink?"<span>":'<a href="'+t.link+'">');t.data&&"role"in t.data&&s.attr("data-role",t.data.role).attr("data-"+t.data.role.split("_")[1],t.data[t.data.role.split("_")[1]]);var o=r.options.titlemax&&t.label.length>r.options.titlemax?t.label.substr(0,r.options.titlemax)+"...":t.label,u=r._searchText.split(" ").join("|"),a=new RegExp("("+u+")","gi");o=o.replace(a,"<span>$1</span>"),s.append(("src"in t?"<img src='"+t.src+"' />, ":"")+"<div>"+"<span class='ak-title'>"+o+"</span>"+("sublabel"in t?"<span class='ak-subtitle'>"+t.sublabel+"</span>":"")+"</div>");if(i&&!t.nolink){s.addClass("ak-event-tracking");var f=n("<script>");f.attr("type","application/json"),f.append('{"ak_event_tracking":[{"aFbqEventTracking":["track","Search",{"value":"'+r._searchText+'"}]}]}')}return n("<li role='presentation' class='ui-menu-item "+("class"in t?t["class"]:"")+"'>").data("item.autocomplete",t).append(s).append(f).appendTo(n(e).addClass("search_global_results"))},this.element.data("ui-autocomplete")._renderMenu=function(e,t){var r=this,i="";n.each(t,function(t,n){"category"in n&&n.category!=i&&(e.append("<li class='ui-autocomplete-category'>"+n.category+"</li>"),i=n.category),r._renderItemData(e,n)})}},_onExpand:function(e){var t=this;t.element.hasClass("triggered")?(t.element.removeClass("triggered"),t._bTriggered=!1,t.element.autocomplete("close")):(t.element.addClass("triggered"),t._bTriggered=!0,t.element.autocomplete("search",""),t.element[0].focus())},_onFocus:function(e){this.initValue===n(this.element).val()&&n(this.element).val("")},_onBlur:function(e){n(this.element).val()===""&&n(this.element).val(this.initValue)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_autocomplete.prototype.enhanceWithin(e.target)})}(window),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_searchable_list",n.ankama.widget,{options:{valueNames:[],initSelector:".ak-searchable-list",searchFieldCls:"ak-searchable-list-search"},aItems:[],jqSearchField:t,_destroy:function(){this.element.removeClass("searchable"),this.jqSearchField.val(""),this._search(),this.jqSearchField.bind("keyup"),this.jqSearchField.hide()},_create:function(){var e=this;e.element.addClass("searchable"),e.jqSearchField=n("."+this.options.searchFieldCls),e.jqSearchField.show(),e.jqSearchField.bind("keyup",n.proxy(this._search,this))},_init:function(){var e=this;this.aItems=[],r.each(this.element.find("li"),function(t){var r={elm:t,values:[]};if(!e.options.valueNames.length&&t.childNodes.length==1&&t.childNodes[0].nodeType==3)r.values.push(t.childNodes[0].innerHTML);else for(var i=0;i<e.options.valueNames.length;i++){var s=e.options.valueNames[i],o=n(t).find("."+s);o.get(0)&&r.values.push(o.get(0).innerHTML)}e.aItems.push(r)})},_search:function(){var e=this,t=e.jqSearchField.val();r.each(e.aItems,function(e){var r=n.ankama.ak_searchable_list.filter(e.values,t);r.length?e.elm.style.display=="none"&&(e.elm.style
.display="block"):e.elm.style.display="none"})}}),n.extend(n.ankama.ak_searchable_list,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var r=new RegExp(n.ankama.ak_searchable_list.escapeRegex(t),"i");return n.grep(e,function(e){return r.test(e.label||e.value||e)})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_searchable_list.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_hidden_no_flash",n.ankama.widget,{options:{initSelector:".ak-hidden-no-flash",display:"block"},_create:function(){var t=this;n.akClientSupportFlash()?n(t.element).css("display",t.options.display):n(t.element).css("display","none")}}),n(e.document).bind("ready widgetcreate",function(e){n.ankama.ak_hidden_no_flash.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_spoiler",n.ankama.widget,{options:{initSelector:".ak-spoiler",toggleTarget:null},_create:function(){var e=this,t=n(".ak-spoiler-content");e._manageClasses(t),e.element.on("click",function(r){e.element.is("a")&&r.preventDefault(),t.toggle({duration:0,complete:function(t){e._manageClasses(n(this))}})})},_manageClasses:function(e){var t=this;e.is(":hidden")?t.element.removeClass("spoiler_off").addClass("spoiler_on"):t.element.removeClass("spoiler_on").addClass("spoiler_off")}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_spoiler.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_button_login",n.ankama.widget,{options:{initSelector:".ak-button-login"},_create:function(){this._on(this.element,{click:function(e){e.preventDefault(),n("div.qtip:visible").qtip("hide"),e!=t&&e.target!=t&&n(e.target).attr("data-from")&&n('form[name="connectform"] input[name="from"]').val(n(e.target).attr("data-from")),n.openLoginModal(e)}})}}),n.widget("ankama.ak_qtip_close",n.ankama.widget,{options:{initSelector:".ak-qtip-close"},_create:function(){this._on(this.element,{click:function(e){e.preventDefault(),e!=t&&e.target!=t&&n(e.target).closest(".qtip").qtip("hide")}})}}),n.widget("ankama.ak_button_backtotop",n.ankama.widget,{options:{initSelector:".ak-backtotop"},_destroy:function(){},_create:function(){var t=n(this.element);jqWindow=n(e),iWindowHeight=jqWindow.outerHeight(!0),iDocumentHeight=n(document).height(),iButtonBottom=parseInt(t.css("bottom"),10),iFooterHeight=n("footer").outerHeight(!0),bFixed=!0;var r=function(){jqWindow.scrollTop()>500&&t.is(":hidden")&&t.show(),jqWindow.scrollTop()<500&&t.is(":visible")&&t.hide(),t.is(":visible")&&jqWindow.scrollTop()+iWindowHeight>=n(document).height()-iFooterHeight?bFixed&&(t.css({position:"absolute",top:n(document).height()-iFooterHeight-t.height()-iButtonBottom}),bFixed=!1):bFixed===!1&&(t.css({position:"fixed",top:"",bottom:iButtonBottom}),bFixed=!0)};jqWindow.scroll(r),r(),this._on(this.element,{click:function(e){e.preventDefault(),n("html, body").animate({scrollTop:0},250)}})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_button_login.prototype.enhanceWithin(e.target),n.ankama.ak_button_backtotop.prototype.enhanceWithin(e.target),n.ankama.ak_qtip_close.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_tree",n.ankama.widget,{options:{initSelector:".ak-tree",bSlideToggle:!1,sClickableElement:".ak-haschild",sClassOpen:"ak-open",sClassClosed:"ak-closed",bState:!1,sLocalStorageVar:"closedTree"},_sId:null,_create:function(){var e=this,t=e.options.bState==1;if(t){var r=localStorage.getItem(e.options.sLocalStorageVar);r&&(r=JSON.parse(r),r&&Array.isArray(r)&&r.forEach(function(t){var n=e.element.find("[data-id="+t+"]");n.length&&n.toggleClass(e.options.sClassClosed+" "+e.options.sClassOpen)}))}e.options.bSlideToggle&&e.element.on("click",e.options.sClickableElement,function(r){if(n(r.currentTarget.classList[0]).selector==n(r.target).closest(".ak-haschild")[0].classList[0])if(n(r.target).is("a")&&n(r.target).attr("href"))n(r.target).hasClass("ak-ajaxloader")&&r.preventDefault();else{r.preventDefault(),n(this).toggleClass(e.options.sClassClosed+" "+e.options.sClassOpen);if(t){var i=n(this).data("id"),s=JSON.parse(localStorage.getItem(e.options.sLocalStorageVar))||[];if(!i)return!1;s.includes(i)?s.splice(s.indexOf(i),1):s.push(i),localStorage.setItem(e.options.sLocalStorageVar,JSON.stringify(s))}}})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_tree.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("lodash"),r=require("ankama.widget");require("jquery.loadmask"),r.widget("ankama.ak_tabs",r.ankama.widget,{options:{initSelector:".ak-tabs-container"},_create:function(){var e=this;this._super(),this.element.on("click",".ak-tabs li a",function(t){t.preventDefault(),e.setActive(r(this).parent("li"))})},setActive:function(e){var t=this;if(e.hasClass("active"))return;e.siblings(".active:first").removeClass("active"),e.addClass("active");var n=e.find("a:first");n.attr("href")[0]=="#"&&t.showTab(r(n.attr("href"),r(t.element)))},showTab:function(e){r(".ak-tab",r(this.element)).addClass("hide"),r(e).removeClass("hide")},removeTab:function(e){var t=r(".ak-tabs",this.element).find("a[href=#"+e+"]");this.setActive(t.closest("li").siblings(":first")),t.remove(),r("#"+e,this.element).remove()},addTab:function(e,t,n,i){var s=e+(r(".ak-tabs",this.element).find("li").length+1);r(".ak-tabs",this.element).append('<li class="'+s+" "+i+'"><a href="#'+s+'">'+t+"</a></li>"),r(".ak-tabs-body",this.element).append('<div id="'+s+'" class="ak-tab hide">'+n+"</div>"),this.element.trigger("widgetcreate")}}),r(document).bind("ready widgetcreate",function(e){r.ankama.ak_tabs.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("ankama.widget"),n=require("lodash");require("jquery.ankama"),t.widget("ankama.ak_panel",t.ankama.widget,{COLLAPSIBLE_CLASS:"ak-collapsible",options:{initSelector:".ak-panel"},_destroy:function(){},_create:function(){var e=this;e.element.hasClass(e.COLLAPSIBLE_CLASS)&&e._addCollapseEvents()},_addCollapseEvents:function(){var e=this;e.element.delegate(".ak-panel-title","click",function(t){e.element.toggleClass("ak-collapsed")})}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_panel.prototype.enhanceWithin(e.target)})}(this),function(e){"use strict";define("utils/pagination",["require","exports","module"],function(e,t,n){var r=e("jquery"),i=e("lodash"),s=e("eventemitter2").EventEmitter2,o=function(e,t,n){return this.emit(e,t,n),!0},u=function(e){e=e||{},this.options=i.defaults(e,this.options),o=i.bind(o,this),this._create()};u.prototype=Object.create(s.prototype),i.extend(u.prototype,{_iTotalPages:null,element:null,options:{initSelector:":akmData(role='pagination')",circular:!0,currentPage:0,itemelement:"li"},destroy:function(){this.removeAllListeners("beforeclick"),this.removeAllListeners("nextpage"),this.removeAllListeners("previouspage"),this.element&&this.element.length&&this.element.off("click")},_set:function(e,t){e==="currentPage"&&this._desactiveCurrentIndex(),this.options[e]=t,e==="currentPage"&&this._activeCurrentIndex()},_create:function(){var e=this;if(!this.options.element)throw"['element' option is required]";this.element=r(this.options.element);if(!this.element.length)throw"['element' is not a valid selector or dom ellement]";if(!this.options.itemelement)throw"['itemelement' option is required]";i.bindAll(e),this.element.on("click",e.options.itemelement,this._onClickElement),this._iTotalPages=this.element.find(this.options.itemelement).length,this._activeCurrentIndex()},truc:function(){this.emit("toto")},_onClickElement:function(e){if(!o("beforeclick"))return!1;var t=this.options.itemelement,n=this.element.find(e.currentTarget).index();if(t===n)return;this._desactiveCurrentIndex(),this._set("currentPage",n),this._activeCurrentIndex(),o("click",e,{clickedindex:n})},gotoIndex:function(e){if(e>this._iTotalPages-1||e<0)return;this._set("currentPage",e)},next:function(e){var t=this.options.circular,n=this.options.currentPage;if(n===this._iTotalPages-1&&!t)return;n++,n>=this._iTotalPages&&(n=0),o("nextpage",e,n),this._set("currentPage",n)},previous:function(e){var t=this.options.circular,n=this.options.currentPage;if(n===0&&!t)return;n--,n<0&&(n=this._iTotalPages-1),o("previouspage",e,n),this._set("currentPage",n)},_desactiveCurrentIndex:function(){var e=this.element.find(this.options.itemelement+":eq("+this.options.currentPage+")");e.removeClass("active")},_activeCurrentIndex:function(){var e=this.element.find(this.options.itemelement+":eq("+this.options.currentPage+")");e.addClass("active")}}),n.exports=u})}(),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash"),i=require("q"),s=require("jquery.hammer");n.widget("ankama.ak_carouseltouch",n.ankama.widget,{options:{initSelector:".ak-carouseltouch",showArrows:!0,paginationcontrol:"",startindex:0,viewwidth:0,width:0,height:0,autoroll:!1,itemwidth:0,spacebetween:6,circular:!0,responsive:!1,snap:!0,animationclick:"slide",animationduration:300,select:null,loaded:null,ready:null,tap:null},iCurrentIndex:0,_bCanMove:!0,_bFirstInitDone:!1,_jqItemsContainer:null,_autoRollInterval:null,oPaginationModule:null,_destroy:function(){this._jqItemsContainer.off("release dragstart dragend dragleft dragright swipeleft swiperight",this._handleHammer),this._jqItemsContainer=null,this.oPaginationModule&&(this.oPaginationModule.off("click"),this.oPaginationModule.destroy(),this.oPaginationModule=null)},_create:function(){var t=this;n(e).on("resize",n.proxy(this._onResize,t)),this._iTotalItems=this.element.children().length,this.options.autoroll&&(this.options.itemwidth=1,this.options.circular=!0,t.element.hover(function(){t._stopAutoRoll()},function(){t._startAutoRoll()}),this._startAutoRoll()),this._generateMarkup(),this.element.addClass("loading"),this.aPositions=[0],this.element.find(".carouselcontainer").hammer({drag_lock_to_axis:!0,stop_browser_behavior:{touchAction:"pan-y"}}).on("tap release dragstart dragend dragleft dragright swipeleft swiperight",n.proxy(this._handleHammer,this)),this._trigger("ready",null)},_startAutoRoll:function(){var e=this;if(!this.options.autoroll)return!1;this._stopAutoRoll(),this._autoRollInterval=window.setTimeout(function(){e.gotoIndex(++e.iCurrentIndex)},this.options.autoroll===!0?5e3:this.options.autoroll)},_stopAutoRoll:function(){clearTimeout(this._autoRollInterval)},_onClickAction:function(e){var t=this,i,s,o,u;switch(n(e.currentTarget).data("action")){case"prev":i=Math.abs(this._curX),o=+this.option("viewwidth");var a=0;r.each(t.aPositions,function(e,t){if(i<=e)return a=e,!1}),r.each(t.aPositions,function(e,t){u=t;if(a-o<=e)return!1}),u===this.iCurrentIndex&&u--,u<0&&(i!=0||!this.option("circular")?u=0:u=this._iTotalItems-1);break;case"next":i=Math.abs(this._curX),o=+this.option("viewwidth"),r.each(t.aPositions,function(e,t){if(i+o<e)return!1;u=t}),u===this.iCurrentIndex&&u++,u>=this._iTotalItems&&(this.option("circular")?u=0:u=this._iTotalItems-1)}t.gotoIndex(u)},iMaxWidth:0,_iInitTimes:0,aPositions:null,_bLoading:!1,_init:function(){function s(t){e._trigger("loaded",null),e._onLoaded()}var e=this;if(e._bLoading)return;e._bLoading=!0,e.element.css("opacity",1),e._jqItemsContainer=this.element.find(".carouselcontainer"),e._bCanMove=!0,e.bShouldRedraw=!0,e.options.itemwidth!==t&&e.options.itemwidth===1?(e.element.css("width",e.element.offsetParent().outerWidth()),e.element.find("img").length==1&&e.element.find("img").addClass("img-maxresponsive")):e.element.width()||e.element.css("width",e.element.parent().outerWidth());if(e.options.viewwidth)e.element.width(e.options.viewwidth);else if(e.element.width()===0){if(e._iInitTimes<30){setTimeout(function(){e._iInitTimes++,e._init()},0);return}throw new Error("Impossible de dÃ©finir la taille du conteneur")}e._setOption("viewwidth",e.element.width()),e.iTotalItems=e.element.find(".item").length,e.iMaxWidth=0,e._maxX=0;var r;e.element.find(".item").each(function(t,s){var o,u=n(s),a=u.children().first();if(e.options.itemwidth&&e.options.itemwidth<=1)e.options.spacebetween=e.options.itemwidth===1?0:e.options.spacebetween,u.css("width",e.options.viewwidth*e.options.itemwidth+"px"),o=u.width()+e.options.spacebetween,e.aPositions[t+1]=o;else if(a.attr("width"))u.css("width",a.attr("width")+"px"),o=a.width()+e.options.spacebetween,e.aPositions[t+1]=o;else if(a[0].tagName=="IMG"||a.find("img").length){r||(r=[]);var f;a.find("img").length?f=a.find("img"):f=a;var l=0,c=i.defer();r.push(c.promise),e.aPositions[t+1]=0,f.each(function(r,i){i.complete?(u.width()<i.width&&u.css("width",i.width+"px"),o=u.width()+e.options.spacebetween,e.aPositions[t+1]=Math.max(e.aPositions[t+1],o),l++,f.length==l&&c.resolve("loaded")):(n(i).one("error",{jqLi:u,iIndex:t},function(e){e.preventDefault(),c.reject(new Error("Error load"))}),n(i).one("load",{jqLi:u,iIndex:t},function(t){u.width()<i.width&&t.data.jqLi.css("width",this.width+"px"),o=t.data.jqLi.width()+e.options.spacebetween,e.aPositions[t.data.iIndex+1]=Math.max(e.aPositions[t.data.iIndex+1],o),l++,f.length==l&&c.resolve("loaded")}))})}else a.css("width")!="0px"?e.aPositions[t+1]=a.width()+e.options.spacebetween:u.css("display","none")}),r?(i.all(r).then(s),setTimeout(s,2e3),setTimeout(s,1e4)):(e._trigger("loaded",null),e._onLoaded())},_firstAnimated:!1,_bLoaded:!1,_onLoaded:function(){var e=this;e._bLoading=!1;if(e.bShouldRedraw){var t=0;r.each(e.aPositions,function(n,r){t+=n,e.aPositions[r]=t}),e.iMaxWidth=e.aPositions[e.aPositions.length-1]}e._bLoaded=!0,e._setOption("width",e.iMaxWidth),e._maxX=e.option("width")-e.option("viewwidth"),e.options.height&&e.element.height(e.options.height?e.options.height:e.element.outerHeight(!0));var i=0;e.element.find(".item").each(function(t,r){e.bShouldRedraw&&(n(r).height(e.element.height()),n(r).css("line-height",e.element.height()+"px")),r.style.left=i+"px",i+=n(r).width()+e.options.spacebetween}),e.options.width<e.options.viewwidth||e.options.itemwidth===1&&e.iTotalItems<=1?(e.element.find("[data-action]").hide(),e._jqItemsContainer.animate({left:0},e.options.animationduration),e._bCanMove=!1):(e.element.find("[data-action]").show(),e._bCanMove=!0),!e._firstAnimated&&!e.element.hasClass("firstanim")?(e.element.addClass("firstanim"),e.element.animate({opacity:0},200,function(){e.element.removeClass("loading"),e.element.animate({opacity:1},500,function(){e._firstAnimated=!0,e.element.removeClass("firstanim"),e._onFinishInit()})})):e._onFinishInit()},_onFinishInit:function(){var e=this;e.bShouldRedraw=!1,typeof e.options.startindex!="undefined"&&(e.gotoIndex(e.options.startindex,!1),delete e.options.startindex),e._bFirstInitDone=!0,e._trigger("inited")},resize:function(){self._onResize()},_iResizeTimerId:null,_onResize:function(){var e=this;e.bShouldRedraw=!0,typeof this._iResizeTimerId!="undefined"&&clearTimeout(this._iResizeTimerId),this._iResizeTimerId=setTimeout(function(){e._init(),e._bCanMove&&e.iCurrentIndex!==t&&e.gotoIndex(e.iCurrentIndex)},100)},_curX:0,_maxX:0,_bSaveX:!0,_animateTo:function(e,n){var r=this;if(!r._bCanMove)return;n=n===t?!0:n,this._curX=-this.element.find(".items .item:eq("+e+")").css("left").replace("px",""),Math.abs(this._curX)>this._maxX&&(this._curX=-this._maxX),this._bBlockUI=!0,r.options.animationclick==="fade"?r._jqItemsContainer.fadeTo(n?r.options.animationduration:0,0,function(){r._jqItemsContainer.css("left",r._curX+"px"),r._jqItemsContainer.fadeTo(n?r.options.animationduration:0,1,function(){r.iCurrentIndex=e,r._bBlockUI=!1})}):r._jqItemsContainer.animate({left:this._curX},n?r.options.animationduration:0,function(){r.iCurrentIndex=e,r._bBlockUI=!1})},gotoIndex:function(e,n){if(this._bBlockUI)return!1;e<0?this.option("circular")?e=this._iTotalItems-1:e=0:e>=this._iTotalItems&&(this.option("circular")?e=0:e=this._iTotalItems-1);if(e!==t){this._startAutoRoll(),this._animateTo(e,n),this.oPaginationModule&&this.oPaginationModule.gotoIndex(e);var r=this.element.find(".item:eq("+e+")");this._trigger("select",null,{index:e,item:r})}},_getCurrentIndex:function(e){var t=this,n=0;return r.each(t.aPositions,function(t,r){if(e<t)return!1;n=r}),n},_getLeftForIndex:function(e){return this.aPositions[e]},_handleHammer:function(t){if(!("gesture"in t))return;var n=this;r.contains([s.DIRECTION_UP,s.DIRECTION_DOWN],t.gesture.direction)||t.gesture.preventDefault();var i=n.options.itemwidth===1?!0:!1;if(!i)return!1;switch(t.type){case"dragright":case"dragleft":if(i)return;var o=this._curX+ +t.gesture.deltaX,u=this._getCurrentIndex(Math.abs(o));if(t.gesture.direction==s.DIRECTION_RIGHT&&o>0){this._curX=0,this._bSaveX=!1,t.gesture.stopPropagation();return}if(t.gesture.direction==s.DIRECTION_LEFT&&Math.abs(o)>this._maxX){this._curX=-this._maxX,this._bSaveX=!1,t.gesture.stopPropagation();return}this.iCurrentIndex=u,this.oPaginationModule&&this.oPaginationModule.gotoIndex(u),this._bSaveX=!0,this._jqItemsContainer.css("left",o+"px");break;case"swipeleft":if(!i)return!1;this._curX+=t.gesture.deltaX;var a=this.iCurrentIndex;a++,this._bSaveX=!0,this.gotoIndex(a),t.gesture.stopDetect();break;case"swiperight":if(!i)return!1;this._curX+=t.gesture.deltaX;var a=this.iCurrentIndex;a--,this._bSaveX=!0,this.gotoIndex(a),this._bSaveX=!0,t.gesture.stopDetect();break;case"release":this._bSaveX&&(this._curX+=t.gesture.deltaX),this._bSaveX=!0;break;case"tap":this._trigger("tap",t),t.gesture.stopDetect();return}if(r.contains(["swipeleft","swiperight"],t.type))return;if(this.options.snap&&r.contains(["release"],t.type)){t.stopImmediatePropagation(),t.preventDefault();var f=Math.abs(n._curX),a=n._getCurrentIndex(f),l=n._getLeftForIndex(a),c=n._getLeftForIndex(a+1),h=c-l;f-l>h/2&&a++,this.gotoIndex(a)}},_generateMarkup:function(){var e=this.element.children();r.each(e,function(e,t){n(e).wrap(n('<li class="item">')),n(e).parent().data(n(e).data()),n(e).data({})},this),this.element.find(".item").wrapAll('<ul class="items">'),this.element.find(".items").wrap('<div class="carouselcontainer">'),this.options.showArrows===!0&&(this.element.siblings("[data-action]").length?this.element.siblings("[data-action]").on("click",n.proxy(this._onClickAction,this)):(this.element.on("click","[data-action]",n.proxy(this._onClickAction,this)),this.element.prepend('<button data-action="prev" class="prev arrow arrow-left">'),this.element.prepend('<button data-action="next" class="next arrow arrow-right">')));if(this.options.paginationcontrol!==""){var t="",i;for(i=0;i<this._iTotalItems;i++)t+="<li><span>"+(i+1)+"</span></li>";this.element[this.option("paginationcontrol")=="next"?"after":"before"]('<ul class="pagination">'),this.element[this.option("paginationcontrol")=="next"?"next":"prev"]().append(n("<ul>").append(t));var s=require("utils/pagination"),o=new s({element:this.element[this.option("paginationcontrol")=="next"?"next":"prev"](),itemelement:"li",circular:this.options.circular});this.oPaginationModule=o,this.oPaginationModule.on("click",n.proxy(function(e,t){this.gotoIndex(t.clickedindex)},this))}}}),n(document).bind("ready widgetcreate",function(e){var t=n(e.target);t.hasClass("ak-widgetcreated")||(t.addClass("ak-widgetcreated"),n.ankama.ak_carouseltouch.prototype.enhanceWithin(e.target))})}(this),function(e){var t=require("lodash"),n=require("ankama.widget"),r=require("jquery.hammer");n.widget("ankama.ak_background_carousel",n.ankama.widget,{options:{initSelector:".ak-background-carousel"},_jqBackgroundItems:[],_jqCcontentItems:[],_jqNavButtons:[],_iIndex:0,_bAutoToggle:!0,_iAutoToggleTime:3e3,_bToggleOn:!1,_iContainerMaxWidth:null,_create:function(){var i=this,s=n("body");s.children("header,div,footer").css("z-index","100");var o=n(i.element).children("div.ak-background-root");o.css("z-index","10"),i._jqBackgroundItems=o.children("div.ak-background-item"),i._jqBackgroundItems.css("height",s.height()).css("z-index","10").hide().first().css("z-index","12").show(),s.append(o);var u=n(i.element).children("div.ak-content-root");i._jqContentItems=u.find("div.ak-content-item"),i._jqContentItems.css("cursor","pointer").hide().first().show(),i._jqContentItems.click(function(){var r=n(this).find(".ak-redirect-button").attr("href");t.isEmpty(r)||e.location.replace(r)}),r(i._jqContentItems).on("swipeleft",function(){i._toggleItems(!0),i._bAutoToggle=!1}),r(i._jqContentItems).on("swiperight",function(){i._toggleItems(!1),i._bAutoToggle=!1}),i._jqNavButtons=u.find("a.ak-content-nav-button"),i._jqNavButtons.click(function(e){e.preventDefault(),i._toggleItems(n(this).attr("href")=="#next"),i._bAutoToggle=!1}),i._tooglePlay(),i._initResizeHandler(n(i.element).parent("div"))},_initResizeHandler:function(r){var i=this,s=r.css("max-width");if(!t.isEmpty(s)){var o=new RegExp("(\\d+)px"),u=o.exec(s,"g");s=t.isArray(u)&&!t.isEmpty(u)?+u[1]:null,i._switchBackgroundSize(s),n(e).resize({containerMaxWidth:s},function(){i._switchBackgroundSize(s)})}},_switchBackgroundSize:function(t){var r=this,i=n(e).width(),s=r._jqBackgroundItems.first().hasClass("phone");if(i<t){r._toogleNavButtons(!1);var o=i/t*100;o<33&&!s&&r._jqBackgroundItems.addClass("phone"),o>33&&s&&r._jqBackgroundItems.removeClass("phone")}else r._toogleNavButtons(!0),s&&r._jqBackgroundItems.removeClass("phone")},_toggleItems:function(e){var r=this;if(r._bToggleOn)return!1;r._bToggleOn=!0,t.isBoolean(e)&&(e=e==1?r._iIndex+1<=r._jqBackgroundItems.length-1?r._iIndex+1:0:r._iIndex-1>=0?r._iIndex-1:r._jqBackgroundItems.length-1);var i=n(r._jqBackgroundItems.get(r._iIndex)),s=n(r._jqBackgroundItems.get(e)),o=n(r._jqContentItems.get(r._iIndex)),u=n(r._jqContentItems.get(e));o.fadeOut("slow",function(){u.fadeIn("fast",function(){o.css("display","none"),u.css("display","block")})}),s.css("z-index","11").css("display","block"),i.fadeOut("slow",function(){i.css("z-index","10"),i.css("display","none"),s.css("z-index","12"),r._iIndex=e,r._bToggleOn=!1,r._bAutoToggle==1&&r._tooglePlay()})},_tooglePlay:function(){var t=this;e.setTimeout(function(){t._bAutoToggle==1&&t._toggleItems(!0)},t._iAutoToggleTime)},_toogleNavButtons:function(e){var t=this;e?t._jqNavButtons.show():t._jqNavButtons.hide()}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_background_carousel.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){define("utils/shadowshim",["require","exports","module"],function(t,n,r){function i(){var n=t("jquery"),r=t("lodash");r.each(n('a[rel^="shadowbox"]:not(:data(ssr))',e.document.body),function(e){n(e).data("ssr",!0),n(e).attr("id",""),n(e).addClass("ak-lightboxtouch");var t=n(e).attr("rel").replace(/shadowbox;?/,""),i="",s=800,o=600;r.each(t.split(";"),function(e){var t=e.split("="),r=t[0],u=t[1];switch(r){case"width":s=u;break;case"height":o=u;break;case"options":if(u){u=u.replace(/\'/g,'"');var a=n.parseJSON(u);"flashVars"in a&&(i=n.param(a.flashVars))}}}),n(e).data("options",{type:"swf",mainClass:"shadowbox",swfPath:e.href,swfFlashvars:i,swfWidth:s,swfHeight:o})}),e.Shadowbox={},e.Shadowbox.open=function(t){var r;Shadowbox.open.caller.arguments.length?r=n(Shadowbox.open.caller.arguments[0].target):r=n("<div>");if(!r.hasClass("ak-lightboxtouch")){r.addClass("ak-lightboxtouch");var i="",s=800,o=600;"width"in t&&(s=t.width),"height"in t&&(o=t.height),r.data("options",{type:t.player==="html"?"inline":"swf",mainClass:"shadowbox",items:{src:t.content},callbacks:{open:t.options&&"onFinish"in t.options?t.options.onFinish:n.noop}}),r.ak_lightboxtouch(),r.trigger("click")}}}r.exports=i})}(window),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");require("jquery.magnific-popup"),n.widget("ankama.ak_lightboxtouch",n.ankama.widget,{options:{initSelector:".ak-lightboxtouch",touchSelector:".ak-carouseltouch",thumbsHeight:"105px",open:null,close:null},oMasterCarousel:null,oThumbsCarousel:null,jqContainerCarousel:null,sGalleryClassName:"",_destroy:function(){self.jqContainerCarousel.remove(),self.jqContainerCarousel=null,this.oMasterCarousel&&(this.oMasterCarousel=this.oThumbsCarousel=null)},_onResize:function(e){this.resize()},resize:function(){this.oMasterCarousel&&this.oThumbsCarousel&&(this.oMasterCarousel.option({viewwidth:n(e).width(),itemwidth:1,circular:!0,responsive:!0,snap:!0,height:n(e).height()*.8}),this.oThumbsCarousel.option({viewwidth:n(e).width(),circular:!0,snap:!1,height:this.options.thumbsHeight}))},_create:function(){var i=this;this.element.attr("id")||this.element.uniqueId();if(!this.options.type)throw new Error("A type is needed");if(this.options.gallery)this.sGalleryClassName="lb-"+this.options.gallery,this.element.addClass(this.sGalleryClassName),this.element.off("click").click(function(t){i._initGallery(),t.preventDefault();var s=r.findIndex(n.ankama.ak_lightboxtouch.oCachesGalleries[i.sGalleryClassName],function(e){return t.currentTarget.id===e.id});i._initCarousels(s),n.magnificPopup.open({closeOnBgClick:!0,items:[{src:i.jqContainerCarousel,type:"inline"}],callbacks:{open:function(){n.ankama.ak_lightboxtouch.bActive=!0,n(e).on("keyup",n.proxy(i._onContextKeyUp,i)),n(e).trigger("resize")},close:function(){n.ankama.ak_lightboxtouch.bActive=!1,n.magnificPopup.instance.container.off("tap"),n(e).off("resize",n.proxy(this._onResize,this)),n(e).off("keyup",n.proxy(i._onContextKeyUp,i)),r.isNull(i.oMasterCarousel)||i.oMasterCarousel.destroy(),r.isNull(i.oThumbsCarousel)||i.oThumbsCarousel.destroy(),i.jqContainerCarousel.remove(),i.jqContainerCarousel=null,i.oMasterCarousel=null,i.oThumbsCarousel=null}},modal:!0});var o=n.magnificPopup.instance;o.container.attr("id",Math.ceil(Math.random()*1e5)),o.container.on("tap",function(e){if(e.target.tagName=="BUTTON")return;e.target.tagName=="IMG"&&i.oMasterCarousel?i.oMasterCarousel.gotoIndex(i.oMasterCarousel.iCurrentIndex+1):o.close(),i.oMasterCarousel&&(i.oMasterCarousel.gotoIndex(i.oMasterCarousel.iCurrentIndex+1),i.oThumbsCarousel.gotoIndex(i.oThumbsCarousel.iCurrentIndex+1))})}),n(e).off("resize",n.proxy(this._onResize,this)),n(e).on("resize",n.proxy(this._onResize,this));else{i.options.type=="swf"&&"swfPath"in i.options&&(i.options=r.merge(r.clone(i.options),{type:"inline",midClick:!0,items:{src:'<button title="Close (Esc)" type="button" class="mfp-close">Ã—</button><object data="'+i.options.swfPath+'" '+'type="application/x-shockwave-flash" id="sb-content" '+'width="'+("swfFlashvars"in i.options?i.options.swfWidth:"800")+'" '+'height="'+("swfFlashvars"in i.options?i.options.swfHeight:"600")+'">'+'<param name="bgcolor" value="">'+'<param name="allowFullscreen" value="true">'+'<param name="flashvars" value="'+("swfFlashvars"in i.options?i.options.swfFlashvars:"")+'">'+'<param name="expressInstaller" value="http://staticns.ankama.com/global/swf/expressInstall.swf">'+'<param name="movie" value="'+i.options.swfPath+'">'+'<param name="wmode" value="opaque">'+"</object>"}}));var s=r.merge({callbacks:{beforeOpen:function(){n(e.document).trigger("widgetcreate")},open:function(){i._trigger("open")},close:function(){r.isNull(i.oMasterCarousel)||i.oMasterCarousel.destroy(),r.isNull(i.oThumbsCarousel)||i.oThumbsCarousel.destroy(),i._trigger("close")}}},r.clone(i.options));n(this.element).magnificPopup(s)}},_initGallery:function(){n.ankama.ak_lightboxtouch.oCachesGalleries||(n.ankama.ak_lightboxtouch.oCachesGalleries={});if(!n.ankama.ak_lightboxtouch.oCachesGalleries||!(this.sGalleryClassName in n.ankama.ak_lightboxtouch.oCachesGalleries))n.ankama.ak_lightboxtouch.oCachesGalleries[this.sGalleryClassName]=e.document.getElementsByClassName(this.sGalleryClassName)},_initCarousels:function(i){var s=this,o=n.ankama.ak_lightboxtouch.oCachesGalleries[s.sGalleryClassName],u=n('<div class="lb-master '+s.options.touchSelector.slice(1)+" gallery-"+s.sGalleryClassName+'">'),a=n('<div class="lb-thumbs '+s.options.touchSelector.slice(1)+" gallery-"+s.sGalleryClassName+'">');r(o).each(function(e){var t=n(e),r=t.ak_lightboxtouch("option","type"),i=null;switch(r){case"image":i=n('<img style="max-height: 100%;max-width:100%" src="'+e.href+'" />');break;case"iframe":i=n('<iframe width="90%" height="90%" src="'+e.href+'" frameborder="0" allowfullscreen></iframe>');break;case"inline":t.data("src")?i=n(t.data("src")).clone().css("display","block"):i=t.next().clone().css("display","block")}t.data("title")||t.data("title",t.attr("title")),i.data(t.data()),u.append(i),a.append('<img src="'+t.data("thumb")+'" />')}),s.jqContainerCarousel=n('<div class="lb-container ak-carousel">').uniqueId(),s.jqContainerCarousel.append('<button title="Close (Esc)" type="button" class="mfp-close">Ã—</button>'),s.jqContainerCarousel.append(u),s.jqContainerCarousel.append(n('<div class="mfp-bottom-bar">').append(n('<div class="mfp-title">').text(""),a)),u.ak_carouseltouch({viewwidth:n(e).width(),itemwidth:1,startindex:i,circular:!0,responsive:!0,animationclick:"fade",snap:!0,height:n(e).height()*.8,select:n.proxy(s._onMasterSelect,s)}),a.ak_carouseltouch({viewwidth:n(e).width(),startindex:i,circular:!0,snap:!1,height:this.options.thumbsHeight}),s.oMasterCarousel=u.data("ankama-ak_carouseltouch"),s.oThumbsCarousel=a.data("ankama-ak_carouseltouch"),a.on("tap click",".item",n.proxy(s._onClickThumbItem,s)),n(".item",a).css("cursor","pointer")},_jqTitle:null,_onMasterSelect:function(e,t){var n=this;n._jqTitle=n.jqContainerCarousel.find(".mfp-title"),setTimeout(function(){var e=t.item.data("title")||t.item.attr("title");e?(n._jqTitle.text(e),t.item.data("description")&&n._jqTitle.append("<small>"+t.item.data("description")+"</small>")):n._jqTitle.text(""),setTimeout(function(){n.oThumbsCarousel&&n.oMasterCarousel&&n.oThumbsCarousel.gotoIndex(t.index)},0)},0)},_onClickThumbItem:function(e){var t=n(e.currentTarget).index();this.oMasterCarousel.gotoIndex(t);var r=this._getElementByIndex(t)},_getElementByIndex:function(e){var t=n.ankama.ak_lightboxtouch.oCachesGalleries[this.sGalleryClassName],i=0,s=r.find(t,function(t){return i===e});return s},_onContextKeyUp:function(e){if(!n.ankama.ak_lightboxtouch.bActive)return;(e.keyCode==37||e.keyCode==38)&&this.oMasterCarousel.gotoIndex(this.oMasterCarousel.iCurrentIndex-1),(e.keyCode==39||e.keyCode==40)&&this.oMasterCarousel.gotoIndex(this.oMasterCarousel.iCurrentIndex+1),e.keyCode==27&&n.magnificPopup.instance.close()}}),n.ankama.ak_lightboxtouch.bActive=!1,n(e.document).bind("ready widgetcreate",function(e){require("utils/shadowshim")(),n.ankama.ak_lightboxtouch.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_check_stream_live_esport",n.ankama.widget,{options:{initSelector:".ak-check-stream-live-esport"},_create:function(){var e=this,r=n(e.element).children("a").first();if(r!==t){var i=r.data("url");if(i!==t){var s=i.trim("/").split("/"),o=s[s.length-1];o!=""&&n.ajax({url:"https://api.twitch.tv/kraken/streams/"+o,dataType:"jsonp",data:{client_id:"py95zl4xmjknv38adx194bxrmwwmrkn"},success:function(t){t.stream!=null?n(e.element).find(".ak-live").fadeIn():n(e.element).find(".ak-live").hide()},error:function(t){n(e.element).find(".ak-live").hide()}})}}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_check_stream_live_esport.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";define("utils/scrollsmooth",["require","exports","module"],function(t,n,r){function s(){function t(){var t=e.location.hash;i(t.replace("jt_","")).length&&i.smoothScroll({scrollTarget:t.replace("jt_",""),speed:400})}i(document.body).on("pjax:success",function(){setTimeout(function(){t()},400)}),i(e).on("popstate",function(){t()}),i(e).on("hashchange",function(e){return e.preventDefault(),t(),!1})}var i=t("jquery.smoothscroll");r.exports=s}),require("utils/scrollsmooth")()}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_poll",n.ankama.widget,{options:{initSelector:".ak-poll"},_create:function(){var e=this;e.jqElement=jqElement=n(e.element),n(".ak-poll-show-results",jqElement).bind("click",function(){e.element.toggleClass("open")})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_poll.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("jquery.loadmask"),n.widget("ankama.ak_pollform",n.ankama.ak_simpleform,{options:{initSelector:".ak-pollform"},_create:function(){this._superApply(arguments)},_init:function(){this._superApply(arguments)},submit:function(){var e=this,t=':input[data-type="answer"]',i=':input:checked[data-type="answer"]';n(".ak-poll-error",e.element).addClass("hidden");if(e.option("bRequiredLogin")===!0)return n.openLoginModal(),!1;var s={iPollId:n(':input[name="poll"]',e.element).val()||null
},o=n(r.max(n(t,e.element),function(e){return parseInt(n(e).data().questionorder,10)})).data().questionorder,u=n(r.max(n(i,e.element),function(e){return parseInt(n(e).data().questionorder,10)})).data().questionorder||0;if(u<o)return n(".ak-poll-error",e.element).removeClass("hidden"),!1;var a=new Array(u+1);for(var f=1;f<=u;f++)a[f]=[];r.each(n(i,e.element),function(e){var t=n(e);a[parseInt(t.data().questionorder,10)].push(t.val())}),s.aAnswer=a,e.option("bRequiredLogin")!==null&&(s.bRequiredLogin=e.option("bRequiredLogin")===!0?"1":"0"),oFormattedParams=[];for(var f in s)oFormattedParams.push({name:f,value:f=="aAnswer"?JSON.stringify(s[f]):s[f]});e.options.pjaxSettings.data=oFormattedParams,e._superApply(arguments)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_pollform.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_accordion",n.ankama.widget,{options:{initSelector:".ak-accordion",multiple:!1},_animate:function(e,t){if(!e.hasClass("anim")){if(t&&e.hasClass("out"))return;e.addClass("anim"),e[t?"slideUp":"slideToggle"]("fast",function(){e.hasClass("in")?e.removeClass("in").removeClass("anim").addClass("out"):e.removeClass("out").removeClass("anim").addClass("in")})}},_create:function(){this.options.multiple=n(this.element).data("multiple");var e=this;n(this.element).find("a.accordion-toggle").click(function(){var t=n(this).closest("div.panel-heading").next();e.options.multiple||n(e.element).find("div.panel-collapse").each(function(r,i){n(i).is(t)||e._animate(n(i),!0)}),e._animate(t)})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_accordion.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_tooltip_linker",n.ankama.widget,{options:{initSelector:".ak-tooltip-linker"},_create:function(){var e=this,t=".ak-pagination.pagination li";n("a[data-action]",t).bind("click",function(t){t.preventDefault(),e._changeTabPage(t)});var i=0;r.each(n(".ak-localepage",e.element),function(e){var t=n(".ak-list-element",n(e)),s=t.length,o=r(n.map(t,function(e){return n(e).outerHeight(!0)})),u=o.reduce(function(e,t){return e+t});u>i&&(i=u)}),i&&n(".tab-content > div, .ak-tabs-inner-content",e.element).css({"min-height":i})},_changeTabPage:function(e){var t=this,r=n(e.currentTarget);t["_"+r.data().action+"TabPage"].apply(t,arguments)},_prevTabPage:function(e){var t=this,r=n(e.currentTarget),i=n(".ak-localepage:visible",t.element),s=i.prev(":hidden");if(!s.length)return;n('a[data-action="next"]',t.element).parent().removeClass("disabled"),i.toggleClass("hide"),s.toggleClass("hide"),s.prev(":hidden").length||r.parent().addClass("disabled")},_nextTabPage:function(e){var t=this,r=n(e.currentTarget),i=n(".ak-localepage:visible",t.element),s=i.next(":hidden");if(!s.length)return;n('a[data-action="prev"]',t.element).parent().removeClass("disabled"),i.toggleClass("hide"),s.toggleClass("hide"),s.next(":hidden").length||r.parent().addClass("disabled")}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_tooltip_linker.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget");require("jquery.magnific-popup"),n.widget("ankama.ak_linker",n.ankama.widget,{CLASS_CLOSE:"ak-linker-close",DISPLAY_TYPE_INNER:"INNER",DISPLAY_TYPE_SHADOWBOX:"SHADOWBOX",DISPLAY_TYPE_TOOLTIP:"TOOLTIP",_bCache:!0,_oCache:{},options:{initSelector:".ak-linker",iShowDelay:500,iHideDelay:250},_setProperties:function(e){var t=this;t._sId=t.option("linker-id"),t._sDisplayType=t.option("linker-display-type"),t._sPath=t.option("linker-path"),t._aQueryDatas=t.option("linker-query-datas"),t._sPath&&(t._sName=t._ucwords((t._sPath+"").split("?")[0].replace(/\//g," ")).replace(/ /g,""))},_create:function(){var e=this;e._setProperties(e.element);if(n.isTouchDevice()||n.inArray(n.getCurrentProfile(),["desktop","largedesktop"])==-1)return;e._sDisplayType==e.DISPLAY_TYPE_TOOLTIP?e._createTooltip():e._addEvents()},_init:function(){var e=this;n(".ak-linker-content").hide(),e._initLoading()},_createTooltip:function(){var t=this;n(t.element).ak_tooltip({manual:!0,forceOnTouch:!0,tooltip:{overwrite:!1,id:t.option("linker-id"),content:{button:this.element.parents(".visible-xs").length,text:function(e,n){return n.tooltip.find(".qtip-close").removeClass("show"),n.tooltip.find(".qtip-close").addClass("hide"),t._getContent(function(e,t){n.set("content.text",e.html()),setTimeout(function(){n.reposition(null,!1)},0),n.tooltip.trigger("widgetcreate"),n.tooltip.find(".qtip-close").removeClass("hide"),n.tooltip.find(".qtip-close").addClass("show")}),""}},show:{event:n.isTouchDevice()?"click":"mouseenter",effect:!1,delay:t.options.iShowDelay},hide:{event:n.isTouchDevice()?!1:"mouseleave",effect:!1,delay:t.options.iHideDelay,fixed:!0,leave:!1},position:{target:t.element,effect:!1,my:"top left",at:"bottom right",viewport:n(e),adjust:{method:"shift"}},fullscreen:n.getCurrentProfile()==="mobile",style:{classes:"ak-linker-tooltip"}}})},_addEvents:function(){var e=this;e.element.on("mouseenter",".ak-linker-hover",function(t){t.preventDefault();if(e._bShowLoading)return;var r=n(t.currentTarget);e._show(r)}),e.element.on("click",".ak-linker-click",function(t){t.preventDefault(),t.stopPropagation();if(e._bShowLoading)return;e._show(n(t.currentTarget))})},_show:function(e){var t=this,r=n(e.currentTarget);t._init(),t._setProperties(r),t._getContent(function(e){switch(t._sDisplayType){case t.DISPLAY_TYPE_SHADOWBOX:n.magnificPopup.open({items:{src:e,type:"inline"},closeBtnInside:!1});break;case t.DISPLAY_TYPE_INNER:e.appendTo(t.element)}e.on("click","."+t.CLASS_CLOSE,function(r){r.preventDefault(),t._sDisplayType==t.DISPLAY_TYPE_SHADOWBOX?n.magnificPopup.close():e.hide()})})},_getContent:function(e){var t=this,r=t._sId.replace(/ak-/g,"ak-content-"),i=n("."+r);t._getApiDatas(function(i,s,o){if(i=="success"){var u=s,a=n("<div/>",{id:r,html:u,"class":"ak-linker-content "+r});e.call(t,a)}})},_getApiDatas:function(e){var r=this,i=r._sId,s=r._aQueryDatas;r._bCache&&!t.isEmpty(this._oCache[i])?e.apply(r,["success",this._oCache[i],"CACHE:"+r._sName+'["'+i+'"]']):(r._showLoading(),n.ajax({url:r.option("linker-path"),method:"get",data:s,success:function(t,n,i){r._hideLoading(),e.apply(r,[n,t,i])},error:function(t,n,i){r._hideLoading(),e.apply(r,[n,i,t])}}))},_initJS:function(){var e=this;if(e._aLoadedJsUrls.length>0)try{var t=require(e.option("linker-path")),n=new t;n.init()}catch(r){console.error(r.message)}},_initLoading:function(){var e=this,t=n("div.linkerLoading");if(t.length==0){var t=n("<div/>",{html:"&nbsp;"}).css({background:'url("'+n.akStatic()+'/ankama/api/linker/img/linker-loader.gif") no-repeat scroll transparent',height:"16px",width:"16px",position:"absolute","z-index":"2147483646"}).hide().addClass("linkerLoading").appendTo("body");n(document).mousemove(function(n){if(n.pageX||n.pageY)e._fCoordX=n.pageX,e._fCoordY=n.pageY;else if(n.clientX||n.clientY)e._fCoordX=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e._fCoordY=n.clientY+document.body.scrollTop+document.documentElement.scrollTop;t.css("left",parseInt(e._fCoordX)-20+"px").css("top",parseInt(e._fCoordY)-20+"px")})}},_showLoading:function(){this._bShowLoading=!0,n("div.linkerLoading").show()},_hideLoading:function(){this._bShowLoading=!1,n("div.linkerLoading").hide()},_ucwords:function(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},_getCache:function(){return t.isEmpty(this._sName)||!localStorage?null:(t.isEmpty(this._oCache)&&(this._oCache=t.isEmpty(localStorage.getItem(this._sName))?{}:JSON.parse(localStorage.getItem(this._sName))),this._oCache)},_saveCache:function(){if(t.isEmpty(this._sName)||!localStorage)return null;localStorage.setItem(this._sName,JSON.stringify(this._oCache))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_linker.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("ankama.ui.dialog"),n.widget("ankama.ak_modal",n.ankama.widget,{options:{initSelector:".ak-modal",closable:!0,closeDestroy:!1,mask:!0,autoShow:!1,url:!1,data:{},method:"GET",text:!1,title:!1,target:!1,dialog:{},interactionSelector:[],openmodal:null,bridgemodal:null,closemodal:null},toggle:function(){this.element.is(":visible")?this.close():this.open()},bridge:function(e){this._trigger("bridgemodal",null,e)},_destroy:function(){this.jqFromTarget&&(this.jqFromTarget.removeData("modalId"),delete this.jqFromTarget),this.element.ak_dialog("destroy"),this.element&&this.element.remove()},close:function(){var e=this;e._trigger("closemodal",e),e.options.closeDestroy?e.destroy():e.element.ak_dialog("close")},set_closemodal:function(e){var t=this;t.options.closemodal=e},open:function(){var e=this;this.options.url?(e.element.mask(e.option("text")||t),n.ajax({url:this.options.url,data:this.options.data,type:this.options.method}).done(function(t){var r=/<h1\b[^>]*>([\s\S]*?)<\/h1>/gi.exec(t);r&&r.length>0&&(document.title=r[1]),e.element.html(n("<div>").append(t).find(".container-content, .main")),e.element.unmask(),e._trigger("openmodal",e),e.element.trigger("widgetcreate"),e.element.ak_dialog("refreshDimensions")})):e._trigger("openmodal",e),this.element.ak_dialog("open"),this.options.url||e.element.trigger("widgetcreate"),n(".ak-modal-close").on("click",function(){e.element.ak_dialog("close")})},_create:function(){this.options.mask?(this.options.dialog.mask=this.options.mask,this.options.dialog.modal=!0,this.options.dialog.interactionSelector=this.options.interactionSelector):(this.options.dialog.resizable=!0,this.options.dialog.draggable=!0),this.options.closable||(this.options.dialog.closeOnEscape=!1,this.options.dialog.dialogClass="no-close"),this.options.title&&(this.options.dialog.title=this.options.title),this.options.dialog.autoOpen=this.options.autoShow,this.options.dialog.close=n.proxy(this.close,this),this.element.ak_dialog(this.options.dialog)},_init:function(){this.element.ak_dialog(this.options.dialog)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_modal.prototype.enhanceWithin(e.target)}),n.widget("ankama.ak_modal_trigger",n.ankama.widget,{options:{initSelector:".ak-modal-trigger",eventTrigger:"click"},_sModalWidgetName:null,_jqModal:null,_create:function(){var e=this;this._sModalWidgetName=r.initial(this.widgetName.split("_")).join("_"),this.element.on(this.options.eventTrigger,function(t){e._add(t)})},_add:function(e){var i=this,s=n.extend({mask:!0},this.options);(r.isNull(this.options.preventDefault)||this.options.preventDefault!=0)&&e.preventDefault();var o=n(e.currentTarget);o.data().modalId&&(s.target=n("#"+o.data().modalId));if(s.target){n(s.target)[i._sModalWidgetName]("toggle");return}s.url===t&&o.is("a")&&(s.url=o.attr("href"));var u=n("<div>");s.modalid&&u.attr("id",s.modalid);var a=n.ankama[i._sModalWidgetName].prototype.options.initSelector.substring(1);u.addClass(a).appendTo(document.body),u.bind(i._sModalWidgetName+"bridgemodal saveitem",function(e,t){var r=n.Event("bridgetrigger",{parentEvent:e});i.element.trigger(r,t)});var f=u[i._sModalWidgetName](s)[i._sModalWidgetName]("toggle");o.removeData("modalId").data("modalId",f.attr("id")),f.data("ankama-"+i._sModalWidgetName).jqFromTarget=o,this._jqModal=f},_setOption:function(e,t){this._super(e,t),this._jqModal&&this._jqModal[this._sModalWidgetName]("option",e,t)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_modal_trigger.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget");n.widget("ankama.ak_sticky",n.ankama.widget,{options:{initSelector:".ak-sticky",topOffset:0,stickClass:"sticked",bWhenInvisible:!1,viewport:"body"},_iTopOffset:0,_create:function(){var r=this,i=n(this.element),s=n(this.option("viewport")),o=this.option("stickClass"),u=this.element.scrollParent(),a=r.option("bWhenInvisible"),f=!1,l,c;this.calculateTopOffset();var h=function(){c=s.position(),c.bottom=c.top+s.outerHeight(!0),a===!0&&(c.top=c.top+i.outerHeight())},p;n(e).resize(function(){p&&clearTimeout(p),p=setTimeout(function(){p=t,f===!0&&i.css("width",s.width()),h(),r.calculateTopOffset()},100)}),h();var d=function(){i.removeClass(o).css("position","").css("top","").css("width",""),r._trigger("unsticked"),f=!1},v=function(){var h=u.scrollTop();if(h>=c.top-r._iTopOffset&&(a===!1&&h<=c.bottom-r._iTopOffset||a===!0&&h+n(e).height()<=n(document).height())&&(u[0]!=document||u[0]==document&&n(document).outerHeight(!0)-n(e).outerHeight(!0)>r._iTopOffset+n(i).outerHeight(!0)+10)){if(!i.hasClass(o)){i.is("thead")&&n("tbody tr:eq(1) td:not(:hidden)",s).each(function(e,t){n("thead th:not(:hidden):eq("+e+")",s).width(n(t).width()),n(t).width(n(t).width())});if(!r._trigger("sticked",null))return;i.addClass(o).css("position","fixed").css("top",u[0]==document?r._iTopOffset:s.offset().top).css("width",s.width()),r.option("bWhenInvisible")&&(i.css({top:-i.outerHeight()}),i.animate({top:0},{queue:!1,duration:150,done:function(){}})),f=!0}}else i.hasClass(o)&&(l&&clearTimeout(l),l=setTimeout(function(){l=t,d()},100))};v(),u.scroll(v)},calculateTopOffset:function(){var e=this,t=n(this.option("initSelector")),r=t.index(t.filter(n(this.element)));e._iTopOffset=this.option("topOffset"),t.filter(":lt("+r+")").each(function(t,r){e._iTopOffset+=n(r).outerHeight(!0)})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_sticky.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget");n.widget("ankama.ak_switcher",n.ankama.widget,{options:{initSelector:".ak-switcher",current:0},_iTopOffset:0,_create:function(){var e=this,t=n(this.element),r=t.find(".ak-switcher-content:eq("+this.options.current+")"),i=t.find(".ak-switcher-contents");t.find(".ak-switcher-content").not(".ak-switcher-content:eq("+this.options.current+")").show().delay(500).queue(function(e){n(this).css("left","100%"),e()}),r.css("left",0).fadeIn();var s=setInterval(function(){i.is(":visible")&&(i.css("height",r.outerHeight()),clearInterval(s))},100);t.find(".ak-switcher-buttons button").click(function(){e.goto(n(this).index())})},"goto":function(e){if(e===this.options.current)return;var t=n(this.element);t.find(".ak-switcher-buttons button:eq("+this.options.current+")").removeClass("active"),t.find(".ak-switcher-buttons button:eq("+e+")").addClass("active");var r=1;this.options.current<e&&(r=-1),t.find(".ak-switcher-content:eq("+this.options.current+")").addClass("animated").css("left",r*100+"%"),t.find(".ak-switcher-content:eq("+e+")").removeClass("animated").css("left",-(r*100)+"%").delay(100).queue(function(e){n(this).addClass("animated").css("left",0),e()}),t.find(".ak-switcher-contents").css("height",t.find(".ak-switcher-content:eq("+e+")").outerHeight()),this.options.current=e}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_switcher.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("moment");r.duration.fn.format=function(e){var t=e,n=this.asMilliseconds(),i=0,s={years:/Y(?!Y)/g,months:/M(?!M)/g,weeks:/W(?!W)/g,days:/%D(?!%D)/g,hours:/%H(?!%H)/g,minutes:/%m(?!%m)/g,seconds:/%s(?!%s)/g,milliseconds:/S(?!S)/g},o={years:/%Y/g,months:/%M/g,weeks:/%W/g,days:/%D/g,hours:/%H/g,minutes:/%m/g,seconds:/%s/g,milliseconds:/%S/g};for(var u in s)if(s[u].test(t)){var a="as"+u.charAt(0).toUpperCase()+u.slice(1),f=new String(Math.floor(r.duration(n-i)[a]())),l=t.match(o[u]).length-f.length;t=t.replace(s[u],f);while(l>0&&s[u].test(t))t=t.replace(s[u],"0"),l--;t=t.replace(o[u],"");var c={};c[u]=f,i+=r.duration(c).asMilliseconds()}return t},n.widget("ankama.ak_countdown",n.ankama.widget,{options:{initSelector:".ak-countdown",timestamp:"",now:"",format:"%H%Hh %m%mm %s%ss",lang:"en",accuracy:""},_create:function(){var e=this,t=this.options.timestamp,i=this.options.now,s=t-i,o=r.duration(s,"seconds"),u=1e3,a=r.duration(0,"seconds").format(e.options.format),f=0;r.relativeTimeRounding(Math.ceil);switch(this.options.accuracy){case"DAY":r.relativeTimeThreshold("h",1),f=1441;break;case"HOUR":r.relativeTimeThreshold("m",1),f=61;break;case"MINUTE":r.relativeTimeThreshold("s",1),f=1}var l=r.duration(f,"seconds"),c=setInterval(function(){o=r.duration(o.asSeconds()-1,"seconds");var t=o.format(e.options.format);t===a&&(t=l.locale(e.options.lang).humanize(!0)),o.asSeconds()<=0&&(t="",clearInterval(c)),n(e.element).text(t)},u)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_countdown.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("jquery.pjax"),require("jquery.loadmask"),n.widget("ankama.ak_responsivetable",n.ankama.widget,{options:{initSelector:".ak-responsivetable",brkCls:"ak-responsivetable-breakpoint",expandCls:"ak-responsivetable-expand",wrapperCls:"ak-responsivetable-wrapper",rowDetailCls:"ak-responsivetable-row-detail",rowDetailContainerCls:"ak-responsivetable-row-detail-inner",rowDetailAjaxContainerCls:"ak-responsivetable-row-ajax-detail-inner",rowShowCls:"ak-responsivetable-detail-show",debug:!1,ajaxDetails:!1,multiline:!1},iResizeTimer:null,_destroy:function(){var e=this;e.element.unwrap(),delete this.jqWrapper,e.element.removeData("old").unbind("resize"),e.restoreAll()},_create:function(){var t=this;t.element.wrap('<div class="'+t.options.wrapperCls+'"/>'),t.jqWrapper=this.element.parent(),t.element.delegate("tbody tr:not(."+this.options.rowDetailCls+")","click",n.proxy(t._rowExpanded,t));var r=n(".device-profile:visible:first").data("deviceprofile");r==="mobile"&&(t.options.multiline=!0),t.options.multiline===!1&&(t.element.css({whiteSpace:"nowrap"}),t.jqWrapper.css({overflow:"hidden"}));var i=n(e);t.element.data("old",{width:i.width(),height:i.height()}),i.bind("resize",function(e){var n=i.width(),r=i.height(),s=t.element.data("old"),o=s?t.element.data("old").width:0;if(n===o)return!1;t.bExtend=n>=o,t.element.data("old",{width:i.width(),height:i.height()}),t._resized()})},_init:function(){var e=this;e.aCols=[],e.aColHead=[],e.aPriorityCols=[],e.aBreakPoints=[],e.bExtend=!1,e.jqHeadElements=n(this.element).find("thead tr").children(),r.each(e.jqHeadElements,function(t,r){var i=n(t);e.aCols.push({index:r,priority:i.data("priority"),width:i.width(),el:i}),e.aColHead.push(i.html())}),e.aPriorityCols=r.sortBy(e.aCols.reverse(),function(e){return e.priority}),e._resized(),e._update()},_ajaxDetailsRequest:function(e,t){var i=this,s=e.attr("ajax-details-url"),o=r.isEmpty(e.attr("data-options"))?{}:JSON.parse(e.attr("data-options"));o.url=r.isEmpty(s)?o.url:s,o.type=r.isEmpty(o.type)?"GET":o.type,o.data=r.isEmpty(o.data)?[]:o.data,r.isEmpty(o.url)&&t.call(i,e,!1),n.ajax({type:o.type,url:o.url,data:o.data,beforeSend:function(t,n){e.next().find("td").mask()},success:function(n,r,s){e.next().find("td").unmask(),t.call(i,e,n)}})},_resized:function(){var e=this,t=function(){return e.bExtend===!0?!0:e._getColVisibleCount()>1&&e.jqWrapper.get(0).scrollWidth>e.jqWrapper.outerWidth(!0)};if(t()===!1){e.element.css("visibility")==="hidden"&&e.element.css("visibility","visible");return}var i=function(){if(e.bExtend===!0){var t=r.filter(e.aBreakPoints,function(t,n){return t.x<=r.parseInt(e.jqWrapper.outerWidth(!0))});r.size(t)>0&&(r.each(t,function(t,n){e.aBreakPoints=r.without(e.aBreakPoints,t),e.restoreColumn(t.col)}),e._update())}else if(e._getColVisibleCount()>1){var i=function(){var t=!1;while(e.jqWrapper.get(0).scrollWidth>e.jqWrapper.outerWidth(!0))e.breakColumn(),t=!0;return t&&e._update(),e.jqWrapper.get(0).scrollWidth>e.jqWrapper.outerWidth(!0)},s=i();while(s===!0)s=i()}n(e.element).css({visibility:"visible"})};e.iResizeTimer?clearTimeout(e.iResizeTimer):i(),e.iResizeTimer=setTimeout(i,500)},breakColumn:function(){var e=this,t=e.aPriorityCols[e.aBreakPoints.length];e.aBreakPoints.push({x:t.el.position().left+t.el.outerWidth(),col:t}),t.el.get(0).style.setProperty("display","none","important"),r.each(n(this.element).find("tr td:nth-child("+(t.index+1)+")"),function(e){e.style.setProperty("display","none","important")})},restoreColumn:function(e){var t=this,i=e.index;n(t.jqHeadElements[i]).show(),r.each(n(this.element).find("tr td:nth-child("+(i+1)+")"),function(e){e.style.display=""})},restoreAll:function(){var e=this;r.each(e.aBreakPoints,function(t,n){e.aBreakPoints=r.without(e.aBreakPoints,t),e.restoreColumn(t.col)}),e._update()},_rowExpanded:function(e,t){var r=this,i=e instanceof n.Event?n(e.currentTarget):e;if(e instanceof n.Event&&typeof e.target!="undefined"&&n(e.target).is("a"))return;if(i.hasClass(this.options.rowShowCls)){this._rowContracted(e);return}if(!r.options.ajaxDetails&&r._allIsVisible())return;i.addClass(this.options.rowShowCls),i.next("tr").hasClass(this.options.rowDetailCls)?i.next("tr").show():i.after('<tr class="'+this.options.rowDetailCls+'"><td colspan='+this._getColVisibleCount()+'><div class="'+this.options.rowDetailContainerCls+'"></div></td></tr>'),this._updateRowDetail(i)},_rowContracted:function(e){var t=e instanceof n.Event?n(e.currentTarget):e;t.removeClass(this.options.rowShowCls),t.next("tr."+this.options.rowDetailCls).hide()},_update:function(){var e=this,t=e._allIsVisible(),i="tbody tr:not(."+this.options.rowDetailCls+")";t?(e.element.removeClass(this.options.brkCls),r.each(e.element.find(i),function(t){if(e.options.ajaxDetails)return!1;n(t).children("td."+e.options.expandCls).removeClass(e.options.expandCls)})):this.element.hasClass(this.options.brkCls)||e.element.addClass(this.options.brkCls);var s=t&&!e.options.ajaxDetails?"hide":"show";r.each(e.element.find("tbody tr."+e.options.rowShowCls),function(t){n(t).next("tr."+e.options.rowDetailCls)[s](),e._updateRowDetail(t)});if(!t||e.options.ajaxDetails&&t)r.each(e.element.find(i).find("td."+e.options.expandCls),function(t){n(t).removeClass(e.options.expandCls)}),r.each(e.element.find(i).find("td:visible:last"),function(t){n(t).addClass(e.options.expandCls)})},_updateRowDetail:function(e){var i=this,s=n(e),o=s.next("tr."+this.options.rowDetailCls),u=o.find("td div."+this.options.rowDetailContainerCls);u.empty();var a=s.children(),f=s.children(":hidden"),l=0;r.each(this.element.find("thead tr").children(":visible"),function(e){var r=n(e).attr("colspan");r!==t&&(l+=parseInt(r,10)-1)}),o.children("td").attr("colspan",this._getColVisibleCount()+l),r.each(f,function(e){var t=i.aColHead[a.index(e)];u.append((t?"<div><strong>"+t+"</strong>: ":"")+n(e).html()+"</div>")}),i.options.ajaxDetails&&!o.hasClass("ajax-details-loaded")?i._ajaxDetailsRequest(s,function(e,t){o.addClass("ajax-details-loaded"),t&&u.parent().append('<div class="'+this.options.rowDetailAjaxContainerCls+'">'+t+"</div>"),n(document).trigger("widgetcreate")}):u.trigger("widgetcreate")},_getColVisibleCount:function(){return this.element.find("thead tr").children(":visible").length},_allIsVisible:function(){var e=this;return this._getColVisibleCount()===e.aPriorityCols.length}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_responsivetable.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_listoptions_actions",n.ankama.widget,{options:{initSelector:".ak-listoptions-actions"},_create:function(){var e=this;this.element.find(".ak-triggeraction").change(function(t){if(e.element.closest(".ak-ajaxloader").length){var r=e.element.closest(".ak-ajaxloader").first();r.ak_ajaxloader("option","direct",!0),r.ak_ajaxloader("option","pjax.url",n(t.currentTarget).val()),r.trigger("direct.ajaxloader")}})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_listoptions_actions.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("lodash"),r=require("ankama.widget");r.widget("ankama.ak_lists_paginable",r.ankama.widget,{_jqPages:null,_jqButonNext:null,_jqButonPrevious:null,options:{initSelector:".ak-lists-paginable"},_create:function(){var e=this;e._jqPages=r(".ak-page",r(this.element)),e._jqButonNext=r(".ak-next",r(this.element)),e._jqButonPrevious=r(".ak-previous",r(this.element)),this.element.on("click",".ak-next",function(t){t.preventDefault(),e._move("next")}),this.element.on("click",".ak-previous",function(t){t.preventDefault(),e._move("previous")})},_move:function(e){var t=this,n=t._jqPages.filter(".active"),r=parseInt(n.attr("data-value")),i=e=="next"&&r+1<=t._jqPages.length?r+1:e=="previous"&&r-1>=1?r-1:1;if(r!=i){n.removeClass("active").css("display","none");var s=t._jqPages.filter('[data-value="'+i+'"]');s.addClass("active").css("display","block"),t._jqButonPrevious.css("display",i==1?"none":"block"),t._jqButonNext.css("display",i==t._jqPages.length?"none":"block")}}}),r(document).bind("ready widgetcreate",function(e){r.ankama.ak_lists_paginable.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");require("jquery.qtip"),n.widget("ankama.ak_tooltip",n.ankama.widget,{options:{initSelector:".ak-tooltip",manual:!1,hideOnScroll:!1,hideOnResize:!0,forceOnTouch:!1,tooltip:{ajax:null,fullscreen:!1,events:{},style:{classes:"ak-tooltip-content"},position:{my:"bottom center",at:"top center",adjust:{method:"flipinvert",scroll:!0},effect:!1,viewport:n(e)},show:{delay:0,effect:!1,ready:!1},hide:{delay:0,effect:!1}}},qtipTarget:null,_bShowLoading:null,getOptions:function(){return r.clone(this.options)},_destroy:function(){this.qtipTarget.qtip("destroy"),this.qtipTarget=null},disable:function(){this.qtipTarget.qtip("disable",!0)},enable:function(){this.qtipTarget.qtip("disable",!1),this.qtipTarget.qtip("reposition")},show:function(){this.qtipTarget.qtip("show")},hide:function(){this.qtipTarget.qtip("hide")},api:function(){return this.qtipTarget.qtip("api")},_init:function(){},_create:function(){var e=this;this.options.tooltip.position.container&&(this.options.tooltip.position.container==="sibling"?this.options.tooltip.position.container=n(this.element).parent():this.options.tooltip.position.container=this.element.closest(this.options.tooltip.position.container)),this.options.tooltip.fullscreen&&(this.options.tooltip.style.classes+=" ak-tooltip-fullscreen"),"ajax"in this.options.tooltip&&this.options.tooltip.ajax&&(this._initLoading(),this.options.tooltip.style.classes+=" ak-tooltip-ajax",this.options.tooltip.show.ready=!1,r.merge(this.options.tooltip,{content:{text:n.proxy(function(e,t){var r=this;return r._showLoading(),t.elements.tooltip.addClass("loading"),n.ajax({url:r.options.tooltip.ajax}).done(function(e){t.elements.content.html(e)}).then(function(e){r._hideLoading(),t.elements.tooltip.removeClass("loading"),t.reposition(null,!1),t.elements.content.trigger("widgetcreate")},function(e,n,r){t.set("content.text",n+": "+r)})},this)}})),n.extend(!0,e.options.tooltip.events,{render:function(t,n){e._render.apply(e,arguments)},focus:function(t,n){e._focus.apply(e,arguments)},toggle:function(t,n){e._toggle.apply(e,arguments)},move:function(t,n){if(!t.originalEvent)return;(e.option("hideOnResize")===!0&&t.originalEvent.type==="resize"||e.option("hideOnScroll")===!0&&t.originalEvent.type==="scroll")&&n.hide()}});if(n.isTouchDevice()||e.options.forceOnTouch)e.options.tooltip.show.event="click",e.options.tooltip.hide.event="unfocus",e.options.tooltip.hide.delay=0;e.options.tooltip.show.ready&&!e.element.is(":visible")&&(e.options.tooltip.show.ready=!1),e._loadQtip()},_render:function(e,t){},_focus:function(e,t){},_toggle:function(e,t){e&&e.type==="tooltipshow"&&t.tooltip.trigger("widgetcreate")},_loadQtip:function(){var e=this;e.element.attr("title")&&e.element.attr("title")!=""?(e.element.qtip(r.merge(r.clone(e.options.tooltip),{content:{text:e.element.attr("title")}})),e.qtipTarget=e.element):e.options.manual?(e.element.qtip(r.merge(r.clone(e.options.tooltip))),e.qtipTarget=e.element):(e.element.hide(),e.qtipTarget=n(e.element.prevAll(":not(script)")[0]),e.qtipTarget.qtip(r.merge(r.clone(e.options.tooltip),{content:{text:e.element.html()}})))},_initLoading:function(){var e=this,t=n("div.linkerLoading");if(t.length==0){var t=n("<div/>",{html:"&nbsp;"}).css({background:'url("'+n.akStatic()+'/ankama/api/linker/img/linker-loader.gif") no-repeat scroll transparent',height:"16px",width:"16px",position:"absolute","z-index":"2147483646"}).hide().addClass("linkerLoading").appendTo("body");n(document).mousemove(function(n){if(n.pageX||n.pageY)e._fCoordX=n.pageX,e._fCoordY=n.pageY;else if(n.clientX||n.clientY)e._fCoordX=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e._fCoordY=n.clientY+document.body.scrollTop+document.documentElement.scrollTop;t.css("left",parseInt(e._fCoordX)-20+"px").css("top",parseInt(e._fCoordY)-20+"px")})}},_showLoading:function(){this._bShowLoading=!0,n("div.linkerLoading").show()},_hideLoading:function(){this._bShowLoading=!1,n("div.linkerLoading").hide()}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_tooltip.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_button_modal",n.ankama.ak_tooltip,{options:{initSelector:".ak-button-modal",target:t,manual:!0,hideOnScroll:!0,forceOnTouch:!0,tooltip:{content:{},style:{classes:"ak-button-modal-content qtip-shadow",tip:!1,def:!1},position:{my:"top right",at:"bottom right",viewport:n(e),effect:!1,adjust:{method:"shift none"}},show:{solo:!0,event:"click",effect:!1,delay:0,modal:{on:!1,effect:!0,blur:!0,escape:!0}},hide:{fixed:!0,event:"click",effect:!1,delay:0}}},hide:function(){this._superApply(arguments)},_create:function(){var e=this,t=this.options.tooltip,r=this.option("target")?n(this.option("target")):e.element.nextAll(":not(script):first");t.content.text=r.clone(),this._superApply(arguments)},_render:function(e,t){var n=this;t.tooltip.data("button",n.element),this._superApply(arguments)},_focus:function(e,t){this._superApply(arguments)},_toggle:function(e,t){this._superApply(arguments);var r=e.type==="tooltipshow"?"addClass":"removeClass";n(this.element)[r]("open")},_init:function(){this._superApply(arguments)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_button_modal.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");require("jquery.ui.datepicker"),require("jquery.timepicker"),n.widget("ankama.ak_datetimepicker",n.ankama.widget,{options:{initSelector:".ak-datetimepicker",inlinePicker:!1,initDateValue:null,picker:{dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss"},aSelectableDates:[]},_create:function(){this._super();var e=this;if(this.option("inlinePicker")===!1&&this.element.get(0).type.indexOf("date")!==-1)return;var t=this.options,r=this.element.attr("name"),i=n("<input />").attr("type","hidden").attr("name",r).attr("id","alt-"+r).data("ori-fieldname",r+"-alt");this.element.attr("name",r+"-alt").data("alt-fieldname",r);var s=this.element.next('script[type="application/json"]').first(),o=s;o.exists()||(o=this.element),i.insertAfter(o),this.option("inlinePicker")===!1&&s.exists()&&s.clone().insertAfter(i),n.extend(!0,t.picker,n.datepicker.regional[n.akLang()]||n.datepicker.regional[""]||{}),t.picker.altField="#alt-"+r,t.picker.altFormat="yy-mm-dd";var u=n.akClientLang(!0);n.extend(!0,t.picker,{onSelect:function(){e.element.trigger("blur"),i.trigger("change")}}),t.timepicker?(t.picker.altFieldTimeOnly=!1,t.picker.altSeparator="T",n(this.element).datetimepicker(t.picker)):(t.picker.beforeShowDay=n.proxy(e.beforeShowDay,e),n(this.element).datepicker(t.picker),this.option("initDateValue")!==null&&n(this.element).datepicker("setDate",this.option("initDateValue")))},beforeShowDay:function(e){var t=this,r=e.getMonth(),i=e.getDate(),s=e.getFullYear();for(var o=0;o<t.options.aSelectableDates.length;o++){var u=i+"/"+(r+1)+"/"+s;if(n.inArray(u,t.options.aSelectableDates)!=-1)return[!0,"ak-selectable",""]}return[!0]}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_datetimepicker.prototype.enhanceWithin(e.target)})}(window),function(e,t){"use strict";define("utils/responsiveimage",["require","exports","module"],function(n,r,i){var s=n("jquery");s(e).load(function(){var n=.3,r=200,i=function(o){s(".img-responsive, .img-maxresponsive").each(function(i,u){var a=s(u);if(!a.attr("data-src"))return;var f=a.parent(),l=f.width(),c=f.height(),h=s(e).scrollTop(),p=h+s(e).height(),d=a.offset().top,v=d+c,m=v>=h-r&&d<=p+r;if(!m){o==="resize"&&a.data("redraw",!0);return}if(o==="resize"||a.data("redraw")===!0){a.data("redraw",!1);var g=a.data("breakpoints");if(!a.data("breakpoints")){var y=+a.attr("data-max"),b=[y],w=0;for(var E=1.5;E<=2;E+=.1)b.push(Math.floor(b[w]!==t?b[w]/E:y)),w++;b.reverse(),a.data("breakpoints",b),g=b}var S=0;for(var x=0,T=
g.length;x<T;x++){S=g[x];if(!(l>g[x]*(1+n)))break}if(S>=a.data("optimalwidth")||!u.src){a.data("optimalwidth",S);var N=a.attr("data-src").split("."),C=N[N.length-1].split("?")[0];N.pop(),/^w[0-9]*(h[0-9]*)?$/.test(N[N.length-1])&&N.pop();var k="";/^m[0-9]+$/.test(N[N.length-1])&&(k=N.pop()+".");var L=N.join(".")+".w"+S+"h."+k+C;a.attr("data-src",L)}}a.attr("data-src")&&u.src!==a.attr("data-src")&&m&&(u.src=a.attr("data-src"))})},o=null;i("resize"),s(e).on("scroll",function(e){i("scroll")}),s(e).on("resize",function(e){o&&clearTimeout(o),o=setTimeout(function(){o=null,i("resize")},50)}),s(document).ajaxSuccess(function(e,t,n){i("resize")})}),i.exports={}}),require("utils/responsiveimage")}(window),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_navexpand",n.ankama.widget,{options:{initSelector:".ak-nav-expand"},_initH:null,_create:function(){n(e).resize(n.proxy(this._resize,this));var t=this.element.find(".ak-nav-expand-more");t.click(n.proxy(this._clickMore,this)),this._initH=this.element.find(".ak-nav-expand-links > ").first().outerHeight(),this.element.find(".ak-nav-expand-container").height(this._initH),t.width(this._initH).height(this._initH).css("line-height",this._initH+"px"),this.element.is(".ak-expanded")&&this._clickMore()},_resize:function(){this._init()},_init:function(){var e=this.element.find(".ak-nav-expand-container"),t=this.element.find(".ak-nav-expand-links"),n=this.element.find(".ak-nav-expand-more .ak-nav-expand-icon");n.hasClass("ak-picto-close")?t.height()==this._initH?(n.css("opacity",0),n.hide(),n.removeClass("ak-picto-close"),n.addClass("ak-picto-open"),e.height(this._initH)):(n.css("opacity",1),n.show()):t.height()>e.height()?(n.css("opacity",1),n.show()):(n.css("opacity",0),n.hide(),n.removeClass("ak-picto-close"),n.addClass("ak-picto-open"),e.height(this._initH))},_clickMore:function(){var e=this.element.find(".ak-nav-expand-container"),t=this.element.find(".ak-nav-expand-links"),n=this.element.find(".ak-nav-expand-more .ak-nav-expand-icon");n.hasClass("ak-picto-close")?(n.removeClass("ak-picto-close"),n.addClass("ak-picto-open"),e.height(this._initH)):(n.removeClass("ak-picto-open"),n.addClass("ak-picto-close"),e.height(t.height()))}}),n(e.document).bind("ready widgetcreate",function(e){n.ankama.ak_navexpand.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("jquery.sticky"),n.widget("ankama.ak_block_header",n.ankama.widget,{options:{initSelector:"header",stickyClass:"ak-navbar-fixed navbar-fixed-top",bDisableSticky:!1},_create:function(){var e=this,t=!1;e.option("bDisableSticky")===!1&&(e.jqNotificationsHeader=n(".ak-notification-list-header",e.element),e.element.on("sticky-start",n.proxy(e._onSticked,e)),e.element.on("sticky-end",n.proxy(e._onUnsticked,e)),e._startSticky(),e.jqNotificationsHeader=n(".ak-notification-list-header",e.element),e.jqNotificationsHeader.bind("remove",function(){n("body").removeClass("notifications-header"),e._startSticky()}),n(document).bind("profilechange",function(){e._restarSticky()})),n(document).click(function(t){var r=n(".ak-button-modal.open",e.element);r.length&&(n(t.target).closest(".ak-button-modal, .ak-button-modal-content").length||r.each(function(e,t){n(t).ak_button_modal("hide")}))})},_startSticky:function(){var e=this;e.bStarted?e.element.sticky("update",{topSpacing:-e.element.outerHeight(!0)}):(e.element.sticky({responsiveWidth:!0,getWidthFrom:"body",topSpacing:-e.element.outerHeight(!0)}),e.bStarted=!0)},_stopSticky:function(){var e=this;e.element.unstick(),e.element.removeClass(e.option("stickyClass")),e.bStarted=!1},_restarSticky:function(){var e=this;e._stopSticky(),e.element.data("restarted",!0),n(".ak-notification-list-header",e.element).css("position",""),n(".ak-notification-list-header",e.element).show(),e._startSticky(),e.element.sticky("update"),e.element.removeData("restarted")},_onSticked:function(e){var t=this;n(".ak-notification-list-header",t.element).hide(),t.element.addClass(t.option("stickyClass")),t.element.data("restarted")?t.element.css("top",0):t.element.animate({top:0},{queue:!1,duration:150})},_onUnsticked:function(e){var t=this;n(".ak-notification-list-header",t.element).css("position",""),n(".ak-notification-list-header",t.element).show(),t.element.removeClass(t.option("stickyClass"))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_block_header.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.navbar_ng",n.ankama.widget,{options:{initSelector:"nav.navbar-ng"},SHOW_DELAY:300,CLOSE_DELAY:200,_create:function(){var e=this;e.isTouch=n.isTouchDevice(),e.dropButtons=e.element[0].querySelectorAll(".ak-dropbtn"),e.subMenu=e.element[0].querySelector(".ak-submenu");for(i=0;i<e.dropButtons.length;i++)e.dropButtons[i].setAttribute("drop-index",i.toString()),e.element[0].querySelector(".ak-submenu-content-"+i).setAttribute("submenu-index",i.toString());if(e.isTouch)document.body.addEventListener("click",function(t){t.target.closest(e.options.initSelector)===null&&e.close(t)});else{for(i=0;i<e.dropButtons.length;i++){var t=e.dropButtons[i];t.addEventListener("mouseleave",function(t){t.target.setAttribute("mouse","leaved"),e.leave(t)})}e.subMenu.addEventListener("mouseenter",function(e){e.target.closest(".ak-submenu").classList.add("ak-hovered")}),e.subMenu.addEventListener("mouseleave",function(){e.subMenu.classList.remove("ak-hovered"),e.leave()})}for(i=0;i<e.dropButtons.length;i++){var t=e.dropButtons[i];t.addEventListener(e.isTouch?"click":"mouseenter",function(t){var n=t.target;e.isTouch?n.matches(".ak-open")?e.close(t):e.open(t):(n.setAttribute("mouse","entered"),setTimeout(function(){n.getAttribute("mouse")==="entered"&&(e.subMenu.classList.add("ak-open"),e.open(t),n.classList.add("ak-open"))},e.SHOW_DELAY))})}},indexOpened:null,showMenu:function(){var e=this,t=e.element[0].querySelectorAll(".ak-submenu-content");for(i=0;i<t.length;i++){var n=t[i];n.classList.remove("ak-visible")}document.querySelector(".ak-submenu-content-"+e.indexOpened).classList.add("ak-visible")},open:function(e){var t=this;t.indexOpened=e.target.getAttribute("drop-index");for(i=0;i<t.dropButtons.length;i++){var n=t.dropButtons[i];n.classList.remove("ak-open")}e.target.classList.add("ak-open"),t.subMenu.classList.add("ak-open"),t.showMenu()},leave:function(){var e=this;setTimeout(function(){if(e.subMenu.matches(".ak-hovered"))return;if(e.element[0].querySelectorAll(".ak-dropbtn:hover").length>0)return;e.close()},e.CLOSE_DELAY)},close:function(){var e=this;e.indexOpened=null,e.subMenu.classList.remove("ak-open");for(i=0;i<e.dropButtons.length;i++){var t=e.dropButtons[i];t.classList.remove("ak-open")}var n=e.subMenu.querySelectorAll(".ak-submenu-content");for(i=0;i<n.length;i++){var t=n[i];t.classList.remove("ak-visible")}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.navbar_ng.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_background",n.ankama.widget,{options:{initSelector:".ak-carrousel-bg"},_create:function(){n("body").is(".ak-background-type-homepage")&&n(".ak-pagetop").length&&n(".ak-pagetop").outerHeight()&&n(".ak-pagetop").css({"margin-top":-n(".ak-pagetop").outerHeight()+"px"})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_background.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_breadcrumb",n.ankama.widget,{options:{initSelector:".breadcrumb"},_create:function(){var e=this,t=n(e.element).closest(".row").find(">").last().outerHeight();t-=n(e.element).outerHeight(),t-=parseInt(n(e.element).css("margin-bottom")),n(e.element).parent().find(".ak-breadcrumb-spacer").css({height:t+"px"})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_breadcrumb.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("jquery"),r=require("lodash");n.widget("ankama.ak_navbar_search",n.ankama.widget,{options:{initSelector:".ak-navbar-search"},initValue:"",sDataCls:"navbar-search",_destroy:function(){var e=this;e._off(e.document,"scroll click"),e._off(e.window,"resize"),e._off(e.jqElements,"click")},_create:function(){var e=this,t=n("input",this.element);e.initValue=t.val(),e._on(e.document,{scroll:n.proxy(this._onDocumentScroll,this),click:n.proxy(this._onDocumentClick,this)}),e.element.on("click",function(){setTimeout(function(){t[0].focus()},0)})},_onDocumentClick:function(e){var t=this;if(n(e.target).closest(".ak-navbar-search").length){if(n(e.target).closest("input").length){n(e.target).closest("input").val()==t.initValue&&n(e.target).closest("input").val("");return}n(".ak-navbar-search").toggleClass("open")}else n(".ak-navbar-search").is(".open")&&n(".ak-navbar-search").removeClass("open")},_onDocumentScroll:function(e){var t=this}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_navbar_search.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_filter",n.ankama.widget,{FILTERS_SELECTOR:".ak-filters",FILTERS_TITLE:".ak-title-filters",FILTERS_TITLE_SELECTOR:".ak-filter-selection",FILTERS_TITLE_SELECTED:".ak-filter-selected",FILTERS_LIST_SELECTOR:".ak-list-filters-active",CHOICES_BLOCK_SELECTOR:".ak-list-filters",CHOICES_BLOCK_TITLE_SELECTOR:".ak-filter-selection",CHOICES_BLOCK_LIST_SELECTOR:".ak-list-filters-check",CHOICES_BLOCK_LIST_INNER_SELECTOR:".ak-list-filters-inner",SELECTED_HIDDEN_INPUTS:".ak-selected-hidden-inputs",MORE_SELECTOR:".ak-more-less",MORE_BUTTON_SELECTOR:".ak-more-less-btn",MOVE_ORIGIN_SELECTOR:".ak-filters-move-origin",MOVE_TARGET_SELECTOR:".ak-filters-move-target",CACHE_INIT:"INIT",CACHE_EXPANDED_BLOCKS:"EB",options:{initSelector:".ak-filters"},_sId:null,_oCache:{},_jqForm:null,_jqChoicesBlocks:null,_jqFiltersListItem:null,_jqSelectedHiddenInputs:null,_bIsMovedToTarget:!1,_create:function(){var t=this;t._sId=t.element.attr("id")||t.element.attr("data-name"),t._jqForm=t.element.find("form"),t._jqChoicesBlocks=t.element.find(t.CHOICES_BLOCK_SELECTOR),t._render(),t.element.find(t.CHOICES_BLOCK_LIST_SELECTOR).on("change",":input",function(e){n(e.target).is('[type="radio"]')?(n(e.target).closest("ul").find("li").removeClass("ak-selected"),n(e.target).closest("li").addClass("ak-selected")):n(e.target).closest("li").toggleClass("ak-selected")});var r=n(".ak-button-click",t._jqForm);r.length==1?t._jqForm.on("click",".ak-button-click",function(e){e.preventDefault(),t._jqForm.submit()}):t.element.find(t.CHOICES_BLOCK_LIST_SELECTOR).on("change",":input:not(.no-submit)",function(e){e.preventDefault(),t._jqForm.submit()}),t.element.on("click",this.FILTERS_TITLE,function(e){t._toggleAll(!n(e.currentTarget).hasClass("ak-open"))}),n(t.FILTERS_TITLE_SELECTOR).on("click","a.ak-picto-reset-filters",function(e){e.preventDefault(),t._deleteChoices(null)}),t._addToggleBlocksEvents();var i=n(t.MOVE_TARGET_SELECTOR);if(i.length==1){var s=null;n(e).delegate(t.element,"resize",function(){s=clearTimeout(s),s=setTimeout(function(){s=null,!t._bIsMovedToTarget&&i.css("display")!="none"?t._moveToTarget(i):t._bIsMovedToTarget&&i.css("display")=="none"&&t._moveToTarget(i)},250)}),t._moveToTarget(i)}},_render:t.debounce(function(){var e=this,r=!n.akStorage.getSub(e._sId,e.CACHE_INIT),i=e._getCacheExpandedBlocks();e.oChoices={},e._jqChoicesBlocks.each(function(){var t=n(this),s=t.attr("data-name");r&&t.find(e.CHOICES_BLOCK_LIST_INNER_SELECTOR).css("display")=="block"&&(i.push(s),e._setCacheExpandedBlocks(i));var o=[];t.find(":input:not(.ak-not-in-choices)").each(function(){var t=n(this),r=e._getInputValue(t);r!=null&&o.push(r.sText)}),o.length>0&&(e.oChoices[t.attr("data-name")]={sTitle:n.trim(t.find(e.CHOICES_BLOCK_TITLE_SELECTOR).text()),aChoices:o});if(!r){var u=t.find(e.CHOICES_BLOCK_LIST_INNER_SELECTOR).hasClass("ak-force-open");u||i.indexOf(s)!=-1||o.length>0?(t.find(e.CHOICES_BLOCK_LIST_INNER_SELECTOR).css("display","block"),t.find(e.CHOICES_BLOCK_TITLE_SELECTOR).find("a.ak-toggle").removeClass("ak-picto-open").addClass("ak-picto-close")):(t.find(e.CHOICES_BLOCK_LIST_INNER_SELECTOR).css("display","none"),t.find(e.CHOICES_BLOCK_TITLE_SELECTOR).find("a.ak-toggle").removeClass("ak-picto-close").addClass("ak-picto-open"))}});var s=n(e.FILTERS_TITLE_SELECTOR),o=n(e.FILTERS_TITLE_SELECTED),u=n(e.FILTERS_LIST_SELECTOR),a=e.element.find(this.FILTERS_TITLE);if(!u.hasClass("ak-server-side")){t.isNull(e._jqFiltersListItem)&&(e._jqFiltersListItem=u.find("li").first().clone()),o.css("display","none"),u.css("display","none"),u.find("li").remove();var f=0;t.isEmpty(e.oChoices)||(n.each(e.oChoices,function(t,r){var i=r.sTitle,s=r.aChoices,o=s.join(", ");o.length>20&&(o=o.substring(0,20)+"&hellip;");var a=e._jqFiltersListItem.clone().append(i+(n.akLang()=="fr"?" ":"")+": "+o);a.find("a").attr("data-name",t),a.on("click","a",function(t){t.preventDefault(),e._deleteChoices(n(t.currentTarget).attr("data-name"))}),u.append(a),f+=s.length}),a.addClass("ak-open").next().css("display","block"),o.css("display","block"),u.css("display","block")),s.find("span.badge").text("("+f+")")}else e._jqSelectedHiddenInputs=e.element.find(e.SELECTED_HIDDEN_INPUTS),u.find("li").on("click","a",function(t){t.preventDefault(),e._deleteChoices(n(t.currentTarget).attr("data-name"))});n.akStorage.setSub(e._sId,e.CACHE_INIT,!0)},10),_toggleAll:function(e){var t=this;if(!t._bIsMovedToTarget)return!1;var n=t.element.find(this.FILTERS_TITLE);return e?(n.removeClass("ak-close").addClass("ak-open"),n.next().css("display","block")):(n.next().css("display","none"),n.removeClass("ak-open").addClass("ak-close")),!0},_addToggleBlocksEvents:function(){var e=this;e._jqChoicesBlocks.on("click",e.CHOICES_BLOCK_TITLE_SELECTOR,function(t){var r=n(t.currentTarget);r.parents(e.CHOICES_BLOCK_SELECTOR).find(e.CHOICES_BLOCK_LIST_INNER_SELECTOR).slideToggle(e._getEffectsDuration(),function(){var t=n(this),i=e._getCacheExpandedBlocks(),s=t.parents(e.CHOICES_BLOCK_SELECTOR).attr("data-name"),o=i.indexOf(s);t.css("display")=="block"?(i.push(s),r.find("a.ak-toggle").removeClass("ak-picto-open").addClass("ak-picto-close")):o!=-1&&(i.splice(o,1),r.find("a.ak-toggle").removeClass("ak-picto-close").addClass("ak-picto-open")),e._setCacheExpandedBlocks(i)})})},_deleteChoices:function(e){var r=this,i=r._jqChoicesBlocks;e!=null&&(i=r._jqChoicesBlocks.filter(function(){return n(this).attr("data-name")==e})),i.each(function(){n(this).find(":input").each(function(){r._inputReset(this)})});if(!t.isNull(r._jqSelectedHiddenInputs)){var s=r._jqSelectedHiddenInputs;t.isNull(e)||(s=r._jqSelectedHiddenInputs.find(":input[data-name='"+e+"']")),s.each(function(){r._inputReset(this)})}r._jqForm.submit()},_getEffectsDuration:function(){return 0},_moveToTarget:function(e){var t=this;if(n.getCurrentProfile()==="mobile"||n.getCurrentProfile()==="tablet"){t.element.parent().hasClass("ak-filters-move-origin")||t.element.wrap('<div class="ak-filters-move-origin ak-filters-clone"></div>');var r=t.element.find(t.FILTERS_TITLE);e.append(t.element),n('a[href="#'+t.element.attr("id")+'"]').length==0?n(t.MOVE_ORIGIN_SELECTOR).addClass("ak-filters-clone").append('<a href="#'+t.element.attr("id")+'" class="ak-filters-gotop ak-title">'+r.html()+"</a>"):n(t.MOVE_ORIGIN_SELECTOR).show(),n(".ak-filters-gotop").on("click",function(e){e.preventDefault(),n("html, body").animate({scrollTop:n("#"+t.element.attr("id")).offset().top-50},250),t._toggleAll(!0)}),t._jqChoicesBlocks.each(function(e,r){var i=n(this),s=t.oChoices?t.oChoices[i.attr("data-name")]:null,o=i.find(t.CHOICES_BLOCK_LIST_INNER_SELECTOR).hasClass("ak-force-open");o||s&&s.aChoices.length>0||t._jqChoicesBlocks.length==1&&e==0?(i.find(t.CHOICES_BLOCK_LIST_INNER_SELECTOR).css("display","block"),i.find(t.CHOICES_BLOCK_TITLE_SELECTOR).find("a.ak-toggle").removeClass("ak-picto-open").addClass("ak-picto-close")):(i.find(t.CHOICES_BLOCK_LIST_INNER_SELECTOR).css("display","none"),i.find(t.CHOICES_BLOCK_TITLE_SELECTOR).find("a.ak-toggle").removeClass("ak-picto-close").addClass("ak-picto-open"))}),t._bIsMovedToTarget=!0,t._toggleAll(t.options.bMobileToggleAll)}else t._toggleAll(!0),n(t.MOVE_ORIGIN_SELECTOR).removeClass("ak-filters-clone").html("").append(t.element),t._bIsMovedToTarget=!1,t._render()},_escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("?","-")},_getInputValue:function(e){var r=this,i=e.attr("id"),s=t.isUndefined(e.attr("type"))?e.prop("tagName").toLowerCase():e.attr("type"),o=null;switch(s){case"radio":e.prop("checked")&&(o=n('label[for="'+i+'"]').text());break;case"checkbox":e.prop("checked")&&(o=n('label[for="'+i+'"]').text());break;case"text":!t.isEmpty(e.val())&&e.val()!=e.attr("placeholder")&&(o=e.val(),o=r._escapeHtml(o));break;case"select":t.isEmpty(e.val())||(o=e.find('option[value="'+e.val()+'"]').text());break;default:return null}return t.isNull(o)||(o=o.replace(/\n|\r/g,"").trim()),o!=null?{sId:i,sType:s,sText:o}:null},_inputReset:function(e){var r=n(e),i=t.isUndefined(r.attr("type"))?r.prop("tagName").toLowerCase():r.attr("type"),s=null;switch(i){case"radio":r.prop("checked")&&r.prop("checked",!1);break;case"checkbox":r.prop("checked")&&r.prop("checked",!1);break;case"text":s=r.val(),!t.isEmpty(s)&&s!=r.attr("placeholder")&&r.val(null);break;case"select":r.find("option:selected").prop("selected",null);break;case"hidden":r.remove()}},_getCacheExpandedBlocks:function(){return n.getCurrentProfile()!=="mobile"&&n.getCurrentProfile()!=="tablet"&&!t.isNull(n.akStorage.getSub(this._sId,this.CACHE_EXPANDED_BLOCKS))?n.akStorage.getSub(this._sId,this.CACHE_EXPANDED_BLOCKS):[]},_setCacheExpandedBlocks:function(e){n.getCurrentProfile()!=="mobile"&&n.getCurrentProfile()!=="tablet"&&n.akStorage.setSub(this._sId,this.CACHE_EXPANDED_BLOCKS,e)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_filter.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_dofusrender",n.ankama.widget,{options:{initSelector:".ak-dofus-render"},_isFlashEnabled:function(){var t=!1;if("ActiveXObject"in e)try{t=!!(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(n){t=!1}else t=!!navigator.mimeTypes["application/x-shockwave-flash"];return t},_renderFlash:function(e){var t=[];switch(e.type){case"guild":var i="DofusGuildes";r.each(e,function(e,n){n.indexOf("bg")!=-1?t.push("bcg"+n.substr(2,1).toUpperCase()+n.substr(3).toLowerCase()+"="+e):n.indexOf("fr")!=-1?t.push("frt"+n.substr(2,1).toUpperCase()+n.substr(3).toLowerCase()+"="+e):n=="mode"&&t.push(n+"="+e)});break;case"character":case"alliance":var i=e.type=="character"?"DofusPersos":"DofusAlliances";t=["render=direct","align=TL"],e.render&&t.push("focus="+e.render),e.look&&t.push("look="+e.look)}return'<!--[if !IE]> --><object type="application/x-shockwave-flash" width="'+e.width+'" height="'+e.height+'" data="'+n.akStatic()+"/dofus/www/game/"+i+'.swf" >'+"<!-- <![endif]-->"+"<!--[if IE]>"+'<object class="fix" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+e.width+'" height="'+e.height+'" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10.0.0">'+'  <param name="movie" value="'+n.akStatic()+"/dofus/www/game/"+i+'.swf" />'+'  <param name="allowscriptaccess" value="always" />'+'  <param name="flashvars" value="'+t.join("&")+'" />'+'  <param name="wmode" value="transparent" />'+"<!--><!--dgx-->"+'  <param name="allowscriptaccess" value="always" />'+'  <param name="flashvars" value="'+t.join("&")+'" />'+'  <param name="wmode" value="transparent" />'+"</object>"+"<!-- <![endif]-->"},_renderImage:function(e){var t=e.type=="alliance"?"character":e.type;delete e.type,e.look&&(e.look=e.look.replace(/#/g,"~"));var i=[];return r.each(e,function(e,t){i.push(t+"="+e)}),'<img src="'+n.akStatic()+"/dofus/game/"+t+".png?"+i.join("&")+'" alt="" width="'+e.width+'" height="'+e.height+'" />'},_create:function(){var e=this.element.akOptions();this.element.html(this._renderImage(e))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_dofusrender.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget");n.widget("ankama.ak_mediacarousel",n.ankama.widget,{options:{initSelector:".ak-media-carousel"},sMain:".ak-media-carousel-main",sSelectedClass:"ak-media-preview-selected",_create:function(){var e=this;n(".ak-carouseltouch .carouselcontainer",e.element).delegate(".item","tap",n.proxy(e._onClickElement,e)),e._switchImage(n(".ak-carouseltouch .carouselcontainer .item:first",e.element))},_switchImage:function(e){var t=this;n(t.sMain+" img",t.element).attr("src",e.data().media),n("."+t.sSelectedClass).removeClass(t.sSelectedClass),e.addClass(t.sSelectedClass)},_onClickElement:function(e){var t=this;t._switchImage(n(e.currentTarget),t.element)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_mediacarousel.prototype.enhanceWithin(e.target)})}(window),function(e){"use strict";var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_numeric_min_max",n.ankama.widget,{CLASS_INPUT_MIN:"ak-numeric-min",CLASS_INPUT_MAX:"ak-numeric-max",STATUS_MIN:"MIN",STATUS_MAX:"MAX",options:{initSelector:".ak-numeric-min-max"},_jqInputMin:null,_jqInputMax:null,_create:function(){var e=this;e._jqInputMin=n("."+e.CLASS_INPUT_MIN,e.element),e._jqInputMax=n("."+e.CLASS_INPUT_MAX,e.element);if(e._jqInputMin.length!=1||e._jqInputMax.length!=1)return!1;e._setDefaultMinMaxValues(),e.element.on("change",":input",function(t){t.preventDefault(),e._change(n(t.currentTarget))})},_setDefaultMinMaxValues:function(){var e=this,n=null,r=e._getValue(e._jqInputMin);t.isNull(r)&&(n=e._getMinMaxValues(e._jqInputMin),e._setValue(e._jqInputMin,n.iMinValue));var i=e._getValue(e._jqInputMax);t.isNull(i)&&(n=e._getMinMaxValues(e._jqInputMax),e._setValue(e._jqInputMax,n.iMaxValue))},_change:function(e){var t=this,r=t._getInputType(e),i=t._getValue(t._jqInputMin),s=t._getValue(t._jqInputMax);if(i==null||s==null){if(i==null&&s==null)return!0;if(r=="select"){var o=e.hasClass(t.CLASS_INPUT_MIN);o&&i&&!s&&(s=n("option",t._jqInputMax).last().val(),t._setValue(t._jqInputMax,s))}}else if(s<i){var u=e.hasClass(t.CLASS_INPUT_MIN)?t.STATUS_MIN:e.hasClass(t.CLASS_INPUT_MAX)?t.STATUS_MAX:null,a={};u==t.STATUS_MIN?(a=r=="select"?t._getSelectPreviousNextValues(t._jqInputMax,i):{iPreviousValue:"NaN",iNextValue:i+1},t._setValue(t._jqInputMax,a.iNextValue)):u==t.STATUS_MAX&&(a=r=="select"?t._getSelectPreviousNextValues(t._jqInputMin,s):{iPreviousValue:s-1>=0?s-1:0,iNextValue:"NaN"},t._setValue(t._jqInputMin,a.iPreviousValue))}return!0},_getInputType:function(e){return t.isUndefined(e.attr("type"))?e.prop("tagName").toLowerCase():e.attr("type")},_getValue:function(e){var n=this,r=n._getInputType(e),i=null;switch(r){case"text":!t.isEmpty(e.val())&&e.val()!=e.attr("placeholder")&&(i=e.val(),t.isFinite(i)||(i=null,e.val("")));break;case"select":t.isEmpty(e.val())||(i=e.val())}return i!=null&&!t.isNumber(i)&&(i=i.replace(/[^0-9]/g,"")),i!=null?+i:null},_setValue:function(e,t){var n=this,r=n._getInputType(e);switch(r){case"text":e.val(t);break;case"select":e.find('option[value="'+t+'"]').prop("selected",!0)}},_getMinMaxValues:function(e){var r=null,i=null;return n("option",e).each(function(){if(!t.isEmpty(n(this).val())){var e=+n(this).val();r==null&&(r=e),i=e}}),{iMinValue:r,iMaxValue:i}},_getSelectPreviousNextValues:function(e,r){var i=null,s=null;return n("option",e).each(function(){if(!t.isEmpty(n(this).val())){var e=+n(this).val();if(i==null||e<r)i=e;else if(s==null&&e>r)return s=e,!1}}),{iPreviousValue:i!=null?i:r,iNextValue:s!=null?s:r}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_numeric_min_max.prototype.enhanceWithin(e.target,!0)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_forum_post_panel",n.ankama.widget,{options:{initSelector:".ak-forum-post-panel"},_create:function(){var e=this;n(e.element).on("click",".ak-comment-submit",function(t){e._openLoginModal(t)}),n(e.element).on("click",".ak-comment-textarea",function(t){e._openLoginModal(t)})},_openLoginModal:function(e){var r=this;if(t.isEmpty(n('input[name="user"]',n(r.element)).val())){e.preventDefault();var i=n.openLoginModal();i||n.openNicknameModal()}}}),n.widget("ankama.ak_forum_post_list",n.ankama.widget,{options:{initSelector:".ak-forum-post-list"},_create:function(){var e=this;n(e.element).on("click",".ak-see-more-trigger",function(){var e=n(this).data("toggle-target")+":hidden:first";n(e).slideDown();var t=n(this).closest(".ak-subpost").find(".ak-post:hidden").length;n(this).find(".ak-see-multiple-comments span").text(t),t==1&&(n(this).find(".ak-see-multiple-comments").hide(),n(this).find(".ak-see-last-comment").removeClass("hide")),n(e).length==0&&n(this).hide()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_forum_post_panel.prototype.enhanceWithin(e.target,!0),n.ankama.ak_forum_post_list.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){"use strict";var n=require("lodash"),r=require("ankama.widget");r.widget("ankama.ak_quick_access",r.ankama.widget,{options:{initSelector:".ak-item-aside-nav"},_bSmartDevices:!0,_jqContentsRoot:null,_oAnchorsTopOffsets:null,_get_oAnchorsTopOffsets:function(){var e=this;if(n.isNull(e._oAnchorsTopOffsets)){e._oAnchorsTopOffsets={};var t=n.isNull(e._jqContentsRoot)?r(".ak-quick-access-anchor"):r(".ak-quick-access-anchor",r(e._jqContentsRoot));t.each(function(t,n){var i=r(n),s=i.offset();e._oAnchorsTopOffsets[i.attr("name")]=s.top}),e._oAnchorsTopOffsets=e._objectReverse(e._oAnchorsTopOffsets)}return e._oAnchorsTopOffsets},_create:function(){var t=this;t._smartDevicesChecking();var i=t.element.akOptions(),s=r(t.element),o=s.offset(),u=s.parents(".ak-panel").css("marginBottom"),a=n.isNull(i.sContentsRootSelector)?null:i.sContentsRootSelector;t._jqContentsRoot=n.isNull(a)?null:r(a);var f=n.isNull(i.sTriggerSelector)?null:i.sTriggerSelector;!n.isNull(t._jqContentsRoot)&&!n.isNull(f)?(t._jqContentsRoot.is(":hidden")==0&&t._get_oAnchorsTopOffsets(),r(f).on("initQuickAccess",function(e,n){n==a&&t._get_oAnchorsTopOffsets()})):t._get_oAnchorsTopOffsets();var l=this.element.scrollParent(),c=r("nav").height()+parseFloat(u),h=r("aside.col-md-3").width()+1;r("aside.col-md-3>.ak-main-aside").length>0&&(h=r("aside.col-md-3>.ak-main-aside").width()+1),l.scroll(function(e){if(!t._bSmartDevices){var r=l.scrollTop();r>o.top?s.css("width",h).css("position","fixed").css("top",c):s.css("position","");var i=null;n.each(t._oAnchorsTopOffsets,function(e,t){r>=e&&n.isNull(i)&&(i=t)}),t._selectedLink(i)}});var p=s.find("li.ak-elt");r(t.element).on("click",".ak-bottom-link",function(e){e.preventDefault(),p.filter(".hidden").removeClass("hidden"),r(t.element).find("a.ak-bottom-link").addClass("hidden")}),r(t.element).on("click","ul.ak-list-text a",function(e){p.filter(".selected").removeClass("selected"),r(e.currentTarget).parent("li").addClass("selected")});var d=null;r(e).delegate(t.element,"resize",function(){d=clearTimeout(d),d=setTimeout(function(){d=null,t._smartDevicesChecking()},250)})},_objectReverse:function(e){var t={},n=[];for(var r in e)n.push(r);for(var i=n.length-1;i>=0;i--)t[n[i]]=e[n[i]];return t},_smartDevicesChecking:function(){var e=this;r.getCurrentProfile()==="mobile"||r.getCurrentProfile()==="tablet"?e._bSmartDevices||(r(e.element).css("width","").css("position","").css("top",""),e._bSmartDevices=!0):e._bSmartDevices=!1},_selectedLink:function(e){var t=this,n=r(t.element).find("li.ak-elt");n.filter(".selected").removeClass("selected"),n.find('a[href="#'+e+'"]').parent("li").addClass("selected")}}),r(document).bind("ready widgetcreate",function(e){r.ankama.ak_quick_access.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_item",n.ankama.widget,{options:{initSelector:".ak-item"},_create:function(){var e=this,t=e.element,r=t.akOptions(),i={};n.getCurrentProfile()!=="mobile"&&n.getCurrentProfile()!=="tablet"&&(i={effect:"slide",duration:300}),t.on("click",".ak-item-top-nav-toggle",function(e){e.preventDefault(),n(e.currentTarget).next().toggle(i)})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_item.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("jquery.ankama");n.widget("ankama.ak_patchnote_correctives",n.ankama.widget,{options:{initSelector:".ak-correctives-select"},_create:function(){var e=this,t=e.element;t.on("change",function(e){e.preventDefault(),document.location.href=n(e.target).val()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_patchnote_correctives.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";function r(t){t=t?t:e.event;var n=!1;t.which?n=t.which:t.keyCode&&(n=t.keyCode);var r=!1;return t.shiftKey?r=t.shiftKey:t.modifiers&&(r=!!(t.modifiers&4)),n>=97&&n<=122&&r||n>=65&&n<=90&&!r?!0:!1}var n=require("ankama.widget");n.widget("ankama.ak_field_password",n.ankama.widget,{options:{initSelector:".ak-field-password"},_create:function(){this.element.on("keypress",n.proxy(this._onKeyPress,this)),this.element.parent().find(".ak-passwordshow").on("click",n.proxy(this._onShowPassword,this))},_hasShownTooltip:!1,_onKeyPress:function(e){r(e)?(this._hasShownTooltip=!0,n(e.currentTarget).trigger("capslockpassshow")):this._hasShownTooltip&&(this._hasShownTooltip=!1,n(e.currentTarget).trigger("capslockpasshide"))},_showPassword:!1,_onShowPassword:function(e){this._showPassword?(this._showPassword=!1,this.element.attr("type","password"),n(e.currentTarget).removeClass("show")):(this._showPassword=!0,this.element.attr("type","text"),n(e.currentTarget).addClass("show"))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_field_password.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash"),i=require("underscore.string"),s=require("jquery.mailcheck");n=s[0];var o=s[1];n.widget("ankama.ak_field_email",n.ankama.widget,{options:{initSelector:".ak-field-email",didyoumeanText:"Did you mean <b>%s</b> ?",didyoumeanClass:"ak-field-email-didyoumean",parentContainer:".form-group"},_create:function(){var e=this,t=["ankama-animations.com","ankama-canada.com","ankama-convention.com","ankama-edition.com","ankama-editions.com","ankama-events.com","ankama-games.com","ankama-group.com","ankama-groupe.com","ankama-news.com","ankama-presse.com","ankama-referencement.com","ankama-shop.com","ankama-studio.com","ankama-web.com","ankama.com","ankama.fr","ankamafanfest.com","ankamagames.com","ankamatvsales.com","ankamaweb.com","artyslot.com","bonzome.com","boufbowl.com","callofcookie-thegame.com","devdofus.com","dofus-arena.com","dofus-arena.fr","dofus-la-serie.com","dofus-le-film.com","dofus-shop.com","dofus-tv-show.com","dofus.cn","dofus.co.uk","dofus.com","dofus.de","dofus.es","dofus.fr","dofus.jp","dofus.mobi","dofus.nl","dofus2.com","dofus-battles.com","fressball.com","flyn-devblog.com","gobbowl.com","heyheyhey.fr","hotmail.com","ig-magazine.com","jalabol.com","krosmoz.com","krosmaster.com","label619.com","manga-dofus.com","mangadofus.com","maxi-mini.fr","miniwakfumag.com","mundial-musique.com","mutafukaz-shop.com","mutafukaz.com","my-chacha.com","paypal.com","slage.fr","tofutofu-game.com","wakfu.biz","wakfu.cn","wakfu.co.uk","wakfu.com","wakfu.de","wakfu.es","wakfu.eu","wakfu.fr","wakfu.info","wakfu.it","wakfu.jp","wakfu.mobi","wakfu.net","wakfu.nl","wakfu.ru","wakfu.asia"];t=r.union(t,o.defaultDomains),e.element.parent(e.options.parentContainer).find("."+e.options.didyoumeanClass)&&e.element.parent(e.options.parentContainer).append('<p class="'+e.options.didyoumeanClass+' hide"></p>');var s=e.element.parent(e.options.parentContainer).find("."+e.options.didyoumeanClass);n(e.element).on("blur",function(){n(e.element).mailcheck({domains:t,suggested:function(t,r){s.off("click"),s.data("suggest",r.full),s.html(i.sprintf(e.options.didyoumeanText,r.full)),s.removeClass("hide"),s.one("click",function(t){e.element.val(n(this).data("suggest")),s.addClass("hide")})},empty:function(e){s.addClass("hide")}})})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_field_email.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");require("jquery.pjax"),n.widget("ankama.ak_quizform",n.ankama.widget,{options:{initSelector:".ak-quizform"},_create:function(){this._superApply(arguments);var e=this;n(e.element).find('input[type="submit"]').attr("disabled","1").addClass("disabled"
),n(e.element).on("click",function(t){e._checkAnswers()?n(e.element).find('input[type="submit"]').removeAttr("disabled").removeClass("disabled"):n(e.element).find('input[type="submit"]').attr("disabled","1").addClass("disabled")}),n(e.element).hasClass("ak-not-logged")&&n(e.element).on("click",function(t){t.preventDefault(),e._login(t)})},_login:function(e){n.openLoginModal(e)},_checkAnswers:function(){var e=this,t=n(e.element).serializeArray(),r=[],i=n(e.element).find('input[type="radio"]');n.each(i,function(e,t){n.inArray(n(t).attr("name"),r)==-1&&r.push(n(t).attr("name"))});var s=0;for(var o in t)n.inArray(t[o].name,r)>-1&&s++;return s!=r.length?!1:!0},_submit:function(){var e=this;e._checkAnswers()&&n.ajax({type:"post",url:n(e.element).attr("action"),complete:function(t){n(e.options.initSelector).html(t.responseText)},container:e.options.initSelector,data:n(e.element).serializeArray()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_quizform.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash"),i=require("jquery.uri");require("jquery.loadmask"),n.widget("ankama.ak_map",n.ankama.widget,{options:{initSelector:".ak-map-widget",mapSelector:".ak-map",locationsListSelector:".ak-map-locations",filtersSelector:".ak-map-filters",country:"",maxAddress:20,gmap:{markers:[],markerConfig:{},clusterConfig:{}}},located:!1,currentLat:46,currentLng:2,ajaxTimeout:null,boundRequest:!0,bRequest:!1,oCacheParams:{},oCluster:null,_create:function(){var e=this,t=e.option("sCountry");e.createMap(n(e.option("mapSelector")),t),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.located=!0,e.currentLat=t.coords.latitude,e.currentLng=t.coords.longitude,map.setCenter(new google.maps.LatLng(e.currentLat,e.currentLng)),map.setZoom(10)}),n(e.option("filtersSelector")+" form").bind("submit",function(t){t.preventDefault();var i=n(this).serializeArray(),s=r.result(r.find(i,{name:"ADDRESS"}),"value");s?e.setCenterFromAddress(s):e.filterMarkers()}),n(e.option("filtersSelector")+" form select").bind("change",function(e){var t=n(this).closest("form");n('input[name="ADDRESS"]',t).val(""),t.submit()}),n(".btn-search").bind("click",function(){var t=n(this).closest("form"),r=n('input[name="ADDRESS"]',t).val();r&&e.setCenterFromAddress(r)})},createMap:function(){var r=this,i=r.option("sCountry");r.geocoder=new google.maps.Geocoder,map=new google.maps.Map(n(r.option("mapSelector"))[0],{center:new google.maps.LatLng(r.currentLat,r.currentLng),zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP}),i!=t&&i&&r.geocoder.geocode({address:i},function(e,t){t==google.maps.GeocoderStatus.OK&&map.setCenter(e[0].geometry.location)}),google.maps.event.addListener(map,"idle",function(){r.ajaxTimeout&&(r.ajaxTimeout=e.clearTimeout(r.ajaxTimeout));if(!r.boundRequest)return r.boundRequest=!1,!1;r.doBoundsRequest()}),r.initMarkers()},setCenterFromAddress:function(e){var t=this;t.geocoder.geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK&&(map.setCenter(e[0].geometry.location),map.setZoom(12))})},_createOneMarker:function(e){var t=this,n=new google.maps.LatLng(e.location[0],e.location[1]),i=r.defaults(t.option("gmap.markerConfig"),{title:e.name,url:e.url,position:n,map_location_id:e.map_location_id,map:map,labelVisible:!0,flat:!0});return new google.maps.Marker(i)},initMarkers:function(){var e=this,t=e.option("gmap.markers");if(!t.length)return!1;r.forEach(t,function(n,r){t[r]=e._createOneMarker(n),google.maps.event.addListener(t[r],"click",function(){e._markerClick.apply(e,[this])})});var n=typeof sCluster!="undefined"?sCluster:"marker_cluster",i=r.defaults(e.option("gmap.clusterConfig"),{maxZoom:25});e.oCluster=new MarkerClusterer(map,t,i),t.length==1&&map.setCenter(t[0].position)},_markerClick:function(e){var t=this,r=n(t.option("locationsListSelector")),i=n('.ak-marker[data-id="'+e.map_location_id+'"]',r);if(!i.length)return!1;var s=i.position().top;s+=r.scrollTop(),r.animate({scrollTop:s}),n(".ak-marker",r).removeClass("ak-selected"),i.addClass("ak-selected")},_getFilters:function(){var e=this,t=[];return n.each(n(e.option("filtersSelector")+" form").serializeArray(),function(e,n){n.name!=="ADDRESS"&&t.push([n.name,n.value])}),t},filterMarkers:function(){var e=this,t,r={map_action:"markers",map_filters:[]};t=n('input[name="ADDRESS"]',n(e.option("filtersSelector")+" form")).val(),r.map_filters=e._getFilters(),e.geocoder.geocode({address:t||e.option("country")},function(n,i){i==google.maps.GeocoderStatus.OK&&(map.setCenter(n[0].geometry.location),map.setZoom(t?12:5),e._request(r,function(t){e.showHideMarkers(t.markers)}))})},showHideMarkers:function(e){var t=this,i=t.option("gmap.markers"),s=[];n.each(e,function(e,n){r.isUndefined(r.find(i,{map_location_id:n.map_location_id}))&&i.push(t._createOneMarker(n)),s.push(n.map_location_id)}),t.oCluster.clearMarkers(),n.each(i,function(n,i){r.isUndefined(r.find(e,{map_location_id:i.map_location_id}))?(i.setVisible(!1),i.setMap(null)):(i.setVisible(!0),i.setMap(map),t.oCluster.addMarker(i))}),t.doBoundsRequest()},doBoundsRequest:function(){var t=this,r=t.option("maxAddress"),i={map_action:"bounds",map_locations:t.getVisibleMarkersInBounds(),map_maxaddress:r,map_user_located:t.located===!0?1:0};t.ajaxTimeout=e.setTimeout(function(){t._request(i,function(e){var r=n(t.option("locationsListSelector"));e.html?r.html(e.html):r.empty().append(r.next(".ak-map-locations-empty").clone().show()),t.addListEvents()})},0)},_request:function(r,s){var o=this;if(o.bRequest||o.oCacheParams[r.mapaction]&&o.oCacheParams[r.mapaction]==JSON.stringify(r))return!1;o.bRequest=!0,o.element.mask();var u=new i(decodeURIComponent(e.location.href));n.ajax({url:u.toString(),type:"POST",data:r,complete:function(){o.bRequest=!1,o.bInit==0&&(o.bInit=!0),o.element.unmask()},success:function(e){typeof e=="string"&&(e=n.parseJSON(e)),s!==t&&s(e),o.oCacheParams[r.mapaction]=JSON.stringify(r)}})},addListEvents:function(){var e=this;n(e.option("locationsListSelector")+" ul  li").bind("click",function(t){var r=n(t.target),i=n(t.currentTarget);if(r.is("a")){if(r.attr("href")!=="#"&&r.attr("href").indexOf("javascript:")===-1)return!0;if(r.hasClass("more-info"))return t.preventDefault(),r.next(".ak-more-details").toggle(),!1}var s=new google.maps.LatLng(i.attr("data-lat"),i.attr("data-lng"));map.setCenter(s),map.setZoom(16),e.boundRequest=!1})},getVisibleMarkersInBounds:function(){var e=this,t=e.option("gmap.markers"),n=e.option("maxAddress");if(!map)return!1;var r=map.getBounds(),i=[];for(var s=0;s<t.length;s++){var o=t[s].map_location_id;if(t[s].getVisible()===!0&&r.contains(t[s].position)&&o){var u=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.currentLat,e.currentLng),t[s].position),a={location_id:o};a.distance=parseFloat((u/1e3).toFixed(1)),i.push(a)}}return i.length?(i.length>n&&i.splice(n-1,i.length-n),i):!1}}),n.widget("ankama.ak_simple_map",n.ankama.widget,{options:{initSelector:".ak-simple-map-widget",mapSelector:".ak-simple-map",gmap:{lat:"",lng:"",zoom:17},bDisplayMarker:!0},_create:function(){var e=this,t=new google.maps.LatLng(e.options.gmap.lat,e.options.gmap.lng);map=new google.maps.Map(n(e.element).find(e.options.mapSelector)[0],{center:t,zoom:e.options.gmap.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP});if(e.options.bDisplayMarker)var r=new google.maps.Marker({position:t,map:map,title:""})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_map.prototype.enhanceWithin(e.target)}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_simple_map.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget"),r=require("jquery.uri"),i=require("moment");n.widget("ankama.ak_notification_list",n.ankama.widget,{options:{initSelector:".ak-notification-list",iNotificationHeight:40},_create:function(){var e=this;e.element.delegate(".ak-notification .ak-close","click",n.proxy(e._onNotificationClosed,e)),e._calculateNotificationHeight(),t.each(n(".ak-notification",e.element),function(t){var r=n(t),i=r.akOptions();i.bHideOnView&&!r.hasClass("hide")&&e._setCookie(r.data("notificationid"))})},_calculateNotificationHeight:function(){var e=this,t=n(".ak-notification:first:visible",e.element).height();t>e.options.iNotificationHeight&&(e.options.iNotificationHeight=t,n("body.notifications-header").css("background-position","center "+(e.options.iNotificationHeight+10)+"px"))},_onNotificationClosed:function(e){var t=this,r=n(e.target).closest(".ak-notification");options=r.akOptions(),r.remove(),options.bHideOnClose&&t._setCookie(r.data("notificationid")),n(".ak-notification.hide",t.element).length?(n(".ak-notification.hide:first",t.element).removeClass("hide"),t._calculateNotificationHeight()):(t.element.remove(),n("body.notifications-header").css("background-position",""))},_setCookie:function(t){var s=new r(e.location.href),o=n.cookie.get("NOTIFS")||[];o.indexOf(t)===-1&&(o.push({id:t,ts:i().unix()}),n.cookie.set("NOTIFS",JSON.stringify(o),{iExpires:180,sDomain:"."+s.domain()}))},_init:function(){var e=this}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_notification_list.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash"),i=require("hammer");n.widget("ankama.ak_slidemenu",n.ankama.widget,{options:{initSelector:".ak-slidemenu",initProfile:"mobile",triggerElement:null,fromTarget:null,toTarget:".menu-container",sOpenClass:"ak-slidemenu-open",sScrollerClass:"ak-mobile-menu-scroller"},_bMenuCloned:!1,version:1,_create:function(){var e=this;e.version=n("nav.navbar").is(".navbar-ng")?2:1,e.jqToTarget=n(e.option("toTarget")),e.jqTriggerElement=n(e.option("triggerElement"));var r={};r[this.widgetName+"show"]=n.proxy(e._onShow,e),r[this.widgetName+"hide"]=n.proxy(e._onHide,e),e._on(e.element,r),e.jqTriggerElement.on("click",n.proxy(e.toggle,e));var s={inputClass:i.SUPPORT_POINTER_EVENTS?i.PointerEventInput:i.TouchInput};e._hammer=new i(n("body").get(0),s);var o=e._hammer.get("pan"),u=e._hammer.get("swipe");o.set({threshold:10,direction:i.DIRECTION_HORIZONTAL}),u.set({velocity:.25,direction:i.DIRECTION_HORIZONTAL});var a={panx:t,panpercent:t};e._hammer.on("swipeleft swiperight panleft panright panend pancancel",n.proxy(e._hammerHandler,e,a)),n("."+e.option("sScrollerClass")).prepend(function(){return e.jqOverlay=n('<div class="ak-mobile-menu-overlay"></div>'),e.jqOverlay}),e.jqOverlay.bind("click",function(){e.close()}),e.element.show()},_init:function(){var e=this},_destroy:function(){var e=this,t=n(".menu",e.jqToTarget);e.jqTriggerElement.off("click",n.proxy(e.toggle,e)).removeClass("active"),e.jqToTarget.empty(),n(".ak-mobile-menu-overlay",n("."+e.option("sScrollerClass"))).remove(),n("body").removeClass("nav-open"),e.element.removeClass(e.option("sOpenClass")),e.element.removeData("open"),e.element.hide(),e._hammer.off("swipeleft swiperight panleft panright panend pancancel",n.proxy(e._hammerHandler,e)),e._bMenuCloned=!1},open:function(){var e=this;e.jqOverlay.removeClass("inactive").addClass("active"),e._initShowHideEvent(),e._buildMarkup(),e.element.addClass(this.option("sOpenClass")),e.jqTriggerElement.addClass("active")},close:function(){var e=this,t=n(".menu",e.jqToTarget);e.jqOverlay.hasClass("active")&&(e.jqOverlay.one("animationend animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(e){n(this).removeClass("inactive")}),e.jqOverlay.removeClass("active").addClass("inactive")),e._initShowHideEvent(),e.element.removeClass(this.option("sOpenClass")),e.jqTriggerElement.removeClass("active"),e.closeMenu(n("> li > ul.open",t))},toggle:function(){var e=this;e.element.hasClass(e.option("sOpenClass"))?e.close():e.open()},_whichTransitionEvent:function(e){var n,r=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in i)if(r.style[n]!==t)return i[n]},_initShowHideEvent:function(){this.element.one(this._whichTransitionEvent(),n.proxy(this._menuTransitionEnd,this))},_menuTransitionEnd:function(){this.element.hasClass(this.option("sOpenClass"))?this._trigger("show"):this._trigger("hide")},_buildMarkup:function(){var e=this,t=n(this.option("fromTarget"));if(e._bMenuCloned||!t.length)return;var r=e["_getMenuV"+e.version]();e.iMenuLevel=0,e._processMenu(r),e.jqToTarget.prepend(r),n("ul",r).each(function(t,r){n(r).css({"min-height":e.element.height()-n(r).position().top-(n(".ak-navbar-search-mob",e.element).outerHeight(!0)+n(".menu-buttons",e.element).outerHeight(!0))+"px"})}),e._initMenuEvents(),e._bMenuCloned=!0},_processMenu:function(e){var r=this;if(!e)return;++r.iMenuLevel,n("> li:not(.back)",e).each(function(e,i){var s=n(i).akRemoveAttributes(),o=s.children("ul:first");if(o.length){var u=n("> a",s);u.length&&(u.find("b.caret").remove(),u.append(n('<b class="caret"></b>'))),s.addClass("dpdown"),o.akRemoveAttributes().addClass("level-"+r.iMenuLevel);if(!o.prev().length)s.removeClass("dpdown"),o.parent().is("li")&&(o.parent().parent("ul").append(o.find("> li").akRemoveAttributes()),o.parent().remove(),o=t);else{var a=s.clone();n("> ul",a).remove(),o.prepend(a.addClass("back")),a.on("click",n.proxy(r._onMenuBack,r)),r._processMenu(o)}}}),--r.iMenuLevel},_getMenuV1:function(){var e=this,t=n(this.option("fromTarget")),r=n("<ul></ul>").addClass("menu");return n("li",t).each(function(e,i){var s=n(i);s.closest("ul").is(t)&&n("a",s).get(0).firstChild!==null&&r.append(s.clone())}),r},_getMenuV2:function(){var e=this,r=n(".ak-navbar-part"),i=n("<ul></ul>").addClass("menu");return n("a",r).each(function(e,r){var s=n(r);if(n(s).is(".ak-logo-game"))return;var o=n("<li>");o.append(s.clone());var u=n(r).attr("drop-index");if(u!==t){var a=n(".ak-submenu-content-"+u).find('ul.list-content[level="1"]');o.append(n("<ul>").append(a.find("> li").clone()))}i.append(o)}),i},_initMenuEvents:function(){var e=this,t=n(".menu",e.jqToTarget);t.delegate("li","click",n.proxy(e._onMenuClick,e))},_matrixToArray:function(e){return e.match(/\d+/g)},_hammerHandler:function(s,o){var u=this;if(o.offsetDirection===i.DIRECTION_UP||o.offsetDirection===i.DIRECTION_DOWN)return;switch(o.type){case"panleft":case"panright":if(r.isUndefined(s.panx)){if(o.type==="panleft"&&!u.element.hasClass(u.option("sOpenClass"))||o.type==="panright"&&o.center.x>30){s.panpercent=t,u._hammer.stop(!0);return}s.panx=-u._matrixToArray(u.element.css("transform"))[4]}o.type==="panright"&&u._buildMarkup();var a=s.panx+o.deltaX;a>0&&(a=0);var f=u.element.width();a<-f&&(a=-f),s.panpercent=80-Math.abs(a)*100/n(e).width(),u.element.addClass("notransition").css("transform","translate3d("+a+"px, 0, 0)");break;case"panend":case"pancancel":if(r.isUndefined(s.panpercent))return;u.element.removeClass("notransition"),u.element.css("transform",""),s.panpercent>30?u.open():u.close(),s.panx=t,s.panpercent=t;break;case"swipeleft":case"swiperight":u._hammer.stop(!0),u.element.removeClass("notransition"),n("body").removeClass("nav-open"),u.element.css("transform",""),o.type=="swiperight"&&o.pointers[0].clientX-o.distance<30&&u.open(),o.type=="swipeleft"&&u.close(),s.panx=t,s.panpercent=t}},_onMenuClick:function(e){var t=this,r=n(e.currentTarget),i=r.children("ul:first");e.stopPropagation();if(e.isDefaultPrevented())return!1;var s=n("a",r).get(0).hash;if(s.length>1&&s.indexOf("#")===0)return t.close(),!0;n(t.option("toTarget"),t.element).css({height:i.position().top+i.outerHeight()+"px"}),i.length&&i.addClass("open")},_onMenuBack:function(e){e.preventDefault(),this.closeMenu(n(e.currentTarget))},closeMenu:function(e){var t=this,r=e.is("li")?e.closest("ul"):e,i=r.parents("ul.open"),s=r.closest("li.dpdown").find("ul.open");n(t.option("toTarget"),t.element).css({height:i.length?i.position().top+i.outerHeight()+"px":""}),s.removeClass("open")},_onShow:function(){var t=this;t.element.data("open")||(n("body").addClass("nav-open"),n(e).scrollTop(0),t.element.data("open",!0))},_onHide:function(){var t=this;t.element.data("open")===!0&&(n(e).scrollTop(0),n("body").removeClass("nav-open"),t.element.data("open",!1))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_slidemenu.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_bbcode_spoiler",n.ankama.widget,{options:{initSelector:".ak-bbcode-spoiler"},_create:function(){var e=this.element;e.on("click",function(){var t=n("> div",n(this));t.toggle(),t.is(":visible")?e.addClass("active"):e.removeClass("active")})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_bbcode_spoiler.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("jquery"),r=require("lodash");n.widget("ankama.ak_sessioncode",n.ankama.ak_simpleform,{options:{initSelector:".ak-session-code"},oCodeInput:null,oCodeAddButton:null,oResultBlock:null,_create:function(){var e=this;e._superApply(arguments),e.oCodeAddButton=e.element.find(".ak-save-code"),e.oCodeInput=e.element.find('input[name="code"]'),e.oResultBlock=e.element.find(".ak-session-code-result"),n(e.oCodeAddButton).on("click",function(t){n.ajax({type:"post",data:{sessioncode:n(e.oCodeInput).val()},success:function(t){t.html&&(n(e.element).find(".ak-form").hide(),e.oResultBlock.find(".ak-gift").prepend(t.html),e.oResultBlock.show(),n(".ak-redirect-code").each(function(t,r){n(r).attr("href",n(r).attr("href")+"?code="+n(e.oCodeInput).val())}))}})})},elementError:function(e,t,i){var s=this;this._superApply(arguments);var o=n(e).data("validate-result")||{};if(r.isEmpty(o))return!1;switch(e.name){case"code":}},elementSuccess:function(e,t){var n=this;this._superApply(arguments);switch(t.name){case"code":n.oCodeAddButton.show()}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_sessioncode.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_linkencrypted",n.ankama.widget,{options:{initSelector:"body"},_create:function(){var e=this;e.jqElement=jqElement=n(e.element),n(".ak-link-crypted").each(function(e,t){var r=n(t).attr("data-href"),i=n(t).text();if(n(t).attr("data-class"))var s=n(t).attr("data-class");else var s="";var o=n('<a href="'+atob(r)+'">'+i+"</a>").addClass(s);n(t).attr("target")=="_blank"&&o.attr("target","_blank"),n(t).parent().append(o),n(t).remove(),jqElement.trigger("widgetcreate")})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_linkencrypted.prototype.enhanceWithin(e.target)})}(this);if(typeof Ankama=="undefined")var Ankama={};typeof Ankama.Ads=="undefined"&&(Ankama.Ads={bConstruct:null,bDomReady:!0,iMouseX:null,iMouseY:null,aZone:new Array,aVars:{},DIVNAME:"ankama_ads",oNoAdsCallBack:null,DomReady:function(e){this.bDomReady=e},CallAgain:function(){var e=!1;for(i in Ankama.Ads.aZone)typeof Ankama.Ads.aZone[i]!="function"&&typeof Ankama.Ads.aZone[i].content!="undefined"&&Ankama.Ads.aZone[i].content.type!="HTML"&&(e=!0,Ankama.Ads.aZone[i].inserted=!1);e&&Ankama.Ads._Call()},Call:function(){Ankama.Ads._Call()},_Domain:function(){var e=document.location.host.substring(document.location.host.lastIndexOf(".")+1);return e=="com"||e=="test"||e=="lan"||e=="tst"||e=="test"?e:"com"},Insert:function(e){for(var t in Ankama.Ads.aZone)if(typeof Ankama.Ads.aZone[t]!="function"){var n=Ankama.Ads.aZone[t];if(typeof n.inserted=="undefined"&&typeof n.inserted!="function"||n.inserted!=1){var r=document.getElementById(n.id);if(r&&e[n.zone]){if(e[n.zone].type!="HTML")for(var i in r.childNodes)typeof r.childNodes[i]!="function"&&r.childNodes[i].className=="ankama_ads_inserted"&&r.removeChild(r.childNodes[i]);r.appendChild(this._GenerateAds(n.zone,e[n.zone]));if(e[n.zone].type=="HTML"){var s=document.getElementById(n.display_id);s.style.display="block",s.style.height=document.body.offsetHeight+"px";var o="visible",u="visible",a="auto",f="visible",l="visible",c="auto";document.body.style.overflow!=""&&document.body.style.overflow!="undefined"&&(o=document.body.style.overflow,u=document.body.style.overflow),document.body.style.overflowX!=""&&document.body.style.overflowX!="undefined"&&(o=document.body.style.overflowX),document.body.style.overflowY!=""&&document.body.style.overflowY!="undefined"&&(u=document.body.style.overflowY),document.body.style.height!=""&&document.body.style.height!="undefined"&&(a=document.body.style.height),window.document.documentElement.style.overflow!=""&&window.document.documentElement.style.overflow!="undefined"&&(f=window.document.documentElement.style.overflow,l=window.document.documentElement.style.overflow),window.document.documentElement.style.overflowX!=""&&window.document.documentElement.style.overflowX!="undefined"&&(f=window.document.documentElement.style.overflowX),window.document.documentElement.style.overflowY!=""&&window.document.documentElement.style.overflowY!="undefined"&&(l=window.document.documentElement.style.overflowY),window.document.documentElement.style.height!=""&&window.document.documentElement.style.height!="undefined"&&(c=window.document.documentElement.style.height),document.body.style.overflow="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",document.body.style.height="100%",window.document.documentElement.style.overflow="hidden",window.document.documentElement.style.overflowX="hidden",window.document.documentElement.style.overflowY="hidden",window.document.documentElement.style.height="100%",window.setTimeout(function(){document.body.style.overflow="visible",document.body.style.overflowX=o,document.body.style.overflowY=u,document.body.style.height=a,window.document.documentElement.style.overflow="visible",window.document.documentElement.style.overflowX=f,window.document.documentElement.style.overflowY=l,window.document.documentElement.style.height=c,s.style.display="none"},e[n.zone].hidetime?e[n.zone].hidetime*1e3:1e4)}}else this.oNoAdsCallBack&&this.oNoAdsCallBack();n.inserted=!0,n.content=e[n.zone]}}},_GenerateAds:function(e,t){switch(t.type){case"IMAGE":var n=this._GenerateImage(e,t);n.onclick=function(){return Ankama.Ads.Click(e)},n.onmouseover=function(){return window.status=t.url,!0},n.onmouseout=function(){return window.status="",!0};break;case"FLASH":var n=this._GenerateFlash(e,t);n&&typeof n.children!="undefined"&&n.children.length>1?n.children[1].onclick=function(){return Ankama.Ads.Click(e)}:n.onclick=function(){return Ankama.Ads.Click(e)},n.onmouseover=function(){return window.status=t.url,!0},n.onmouseout=function(){return window.status="",!0};break;case"HTML":var n=this._GenerateHtml(e,t),r=/<a\s+[^>]*>/gi,i=/href="([^"]*)"/i,s=/target="([^"]*)"/i,o=/\s*href="[^"]*"\s*/gi,u=/\s*target="[^"]*"\s*/gi,a=/\s*onclick="[^"]*"\s*/gi,f=n.innerHTML.match(r);if(f&&f.length>0)for(var l=0;l<f.length;l++){var c=f[l],h=new RegExp(c,"g");i.exec(c);var p=RegExp.$1;c=c.replace(o," "),s.exec(c);var d=RegExp.$1;c=c.replace(u," "),c=c.replace(a," "),c=c.replace(/^<a\s+/i,'<a href="javascript:void(0);" onclick="return Ankama.Ads.Click('+e+", '"+p+"', '"+d+"')\" ");var v=n.innerHTML.replace(h,c);n.innerHTML=v}else n.style.cursor="pointer",n.onclick=function(){return Ankama.Ads.Click(e)},n.onmouseover=function(){return window.status=t.url,!0},n.onmouseout=function(){return window.status="",!0}}return n},_GenerateFlash:function(e,t){var n=new Array;n.quality="high",n.menu="false",n.AllowScriptAccess="always",n.wmode="transparent",n.flashvars="linkfunction=Ankama.Ads.Click&zone="+e;var r='<object id="ak_ads_zone_'+e+'" '+(window.ActiveXObject?' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+t.file+'"':"");r+=' width="'+t.width+'"  height="'+t.height+'">',r+='<param name="movie" value="'+t.file+'">';var i="",s="";for(var o in n)typeof n[o]!="function"&&(i+='<param name="'+o+'" value="'+n[o]+'">',s+=" "+o+'="'+n[o]+'"');r+=i,r+='<embed id="ak_ads_emb_zone_'+e+'" src="'+t.file+'" width="'+t.width+'" height="'+t.height+'"',r+=' type="application/x-shockwave-flash"'+s+"></embed>",r+="</object>";var u=document.createElement("div"),a=document.createElement("div");return u.style.position="relative",a.style.position="absolute",u.style.cssFloat="left",a.style.cssFloat="left",a.style.zIndex="9999",a.style.cursor="pointer",a.style.left="0px",a.style.top="0px",a.style.height=t.height+"px",a.style.width=t.width+"px",u.innerHTML=r,u.appendChild(a),u.className="ankama_ads_inserted",u},_GenerateHtml:function(e,t){var n=document.createElement("div");return n.innerHTML=t.html,n.className="ankama_ads_inserted",n},_GenerateImage:function(e,t){var n=document.createElement("a");if(t){var r=t.link;typeof ANKAMA_ADS_DOMAIN!="undefined"&&(r+="&site_domain="+encodeURI(ANKAMA_ADS_DOMAIN)),typeof ANKAMA_ADS_SELLER_NETWORK!="undefined"&&(r+="&seller_network="+ANKAMA_ADS_SELLER_NETWORK),n.href=r,n.className="ankama_ads_inserted";switch(t.target){case"BLANK":n.target="_blank"}var i=document.createElement("img");i.style.border=0,i.src=t.file,i.className="img-maxresponsive",t.alt&&(i.alt=t.alt),n.appendChild(i)}return n},_GetPosition:function(e){var t=e,n=0,r=0;while(t!=null&&t.tagName!="BODY")n+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return{x:r,y:n}},_GetClickZone:function(e){if(this.iMouseX!=null&&this.iMouseY!=null){var t=this._GetPosition(e);return{x:this.iMouseX-t.x,y:this.iMouseY-t.y}}},_ReturnVars:function(e){sReturn="",document.referrer&&typeof document.referrer=="string"&&document.referrer.indexOf("?")!=-1?sReturn+="&referer="+escape(document.referrer.substr(0,document.referrer.indexOf("?"))):document.referrer&&typeof document.referrer=="string"&&(sReturn+="&referer="+escape(document.referrer)),document.location.href&&typeof document.location.href=="string"&&document.location.href.indexOf("?")!=-1?sReturn+="&url="+escape(document.location.href.substr(0,document.location.href.indexOf("?"))):document.location.href&&typeof document.location.href=="string"&&(sReturn+="&url="+escape(document.location.href));for(i in this.aVars)typeof this.aVars[i]!="undefined"&&typeof this.aVars[i]!="function"&&(sReturn+="&"+i+"="+this.aVars[i]);for(i in e)typeof e[i]!="undefined"&&typeof e[i]!="function"&&(sReturn+="&"+i+"="+e[i]);return sReturn},_Call:function(){var e=!1,t=new Array;for(i in Ankama.Ads.aZone)typeof Ankama.Ads.aZone[i]!="function"&&(e=!0,t.push(Ankama.Ads.aZone[i].zone));if(e){var n=document.createElement("script");n.type="text/javascript",n.src=(window.location.protocol=="https:"?"https:":"http:")+"//aas.ankama."+Ankama.Ads._Domain()+"/view?q="+t.join("-")+Ankama.Ads._ReturnVars(),document.body.insertBefore(n,document.body.firstChild)}},MousePosition:function(e){if(typeof e=="undefined"||e===null)e=window.event;if(e==null)return;e.pageX=typeof e.pageX!="undefined"?e.pageX:null,e.pageY=typeof e.pageY!="undefined"?e.pageY:null;if(e.pageX!=null||e.pageY!=null)this.iMouseX=e.pageX,this.iMouseY=e.pageY;else if(e.clientX||e.clientY)this.iMouseX=parseInt(e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),this.iMouseY=parseInt(e.clientY+document.body.scrollTop+document.documentElement.scrollTop)},_Construct:function(){this.bConstruct=!0,this.bDomReady==1&&(Ankama._DomReady={},this._DomReady(this._Call));var e=document.onmousemove;document.onmousemove=function(t){Ankama.Ads.MousePosition(t),e&&e(t)}},Zone:function(e,t){this.bConstruct!=1&&this._Construct();if(typeof t=="undefined"&&typeof t!="function"){t=this.DIVNAME+"_"+e;var n=!0}else var n=!1;typeof t=="string"?(n&&document.write('<div id="'+this.DIVNAME+"_"+e+'"></div>'),this.aZone[e]={zone:e,id:t}):this.aZone[e]={zone:e,id:t[0],display_id:t[1]}},Vars:function(e){for(i in e)typeof e[i]!="undefined"&&typeof e[i]!="function"&&(this.aVars[i]=e[i])},Click:function(e,t,n){for(i in Ankama.Ads.aZone)if(typeof Ankama.Ads.aZone[i]!="function"&&Ankama.Ads.aZone[i].zone==e){var r=Ankama.Ads.aZone[i],s=typeof t!="undefined"?t:r.content.link,o=r.id?r.id:this.DIVNAME+"_"+r.zone,u=this._GetClickZone(document.getElementById(o));u&&typeof t=="undefined"&&(s+="&x="+u.x+"&y="+u.y),typeof ANKAMA_ADS_DOMAIN!="undefined"&&(s+="&site_domain="+ANKAMA_ADS_DOMAIN),typeof ANKAMA_ADS_SELLER_NETWORK!="undefined"&&(s+="&seller_network="+ANKAMA_ADS_SELLER_NETWORK);if(typeof n=="string")n==""||n=="_self"?window.location.href=s:window.open(s,n);else switch(r.content.target){case"BLANK":window.open(s);break;default:window.location.href=s}}return!1},_DomReady:function(e){if(Ankama._DomReady.loaded)return e();var t=Ankama._DomReady.observers;t||(t=Ankama._DomReady.observers=[]),t[t.length]=e;if(Ankama._DomReady.callback)return;Ankama._DomReady.callback=function(){if(Ankama._DomReady.loaded)return;Ankama._DomReady.loaded=!0,Ankama._DomReady.timer&&(clearInterval(Ankama._DomReady.timer),Ankama._DomReady.timer=null);var e=Ankama._DomReady.observers;for(var t=0,n=e.length;t<n;t++){var r=e[t];e[t]=null,r()}Ankama._DomReady.callback=Ankama._DomReady.observers=null};var n=!!window.attachEvent&&!window.opera,r=navigator.userAgent.indexOf("AppleWebKit/")>-1;if(document.readyState&&r)Ankama._DomReady.timer=setInterval(function(){var e=document.readyState;(e=="loaded"||e=="complete")&&Ankama._DomReady.callback()},50);else if(window.addEventListener)document.addEventListener("DOMContentLoaded",Ankama._DomReady.callback,!1),window.addEventListener("load",Ankama._DomReady.callback,!1);else if(window.attachEvent)window.attachEvent("onload",Ankama._DomReady.callback);else{var e=window.onload;window.onload=function(){Ankama._DomReady.callback(),e&&e()}}}}),function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_ads",n.ankama.widget,{options:{initSelector:"body"},_create:function(){if(typeof Ankama.Ads!="undefined"){Ankama.Ads.Vars({lang:e.location.pathname.substr(1,2)}),Ankama.Ads.DomReady(!1);var t=n(".ak-ads");t.length&&t.each(function(e,t){var r=n(t).akOptions().iZoneId,i=n(t).akOptions().sAdsZoneName;r&&Ankama.Ads.Zone(r,i)}),Ankama.Ads.oNoAdsCallBack=function(){n(".ak-ads").remove()},Ankama.Ads.Call()}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_ads.prototype.enhanceWithin(e.target,!0)})}(this),function(e){var t=require("ankama.widget");t.widget("ankama.ak_shoptrack",t.ankama.widget,{options:{initSelector:"body",matchPattern:"(ankama-shop.com)",sCookieKey:"AADST"},_create:function(){var e=this,n=document.cookie.split(";"),r="";for(var i in n){var s=n[i].split("="),o=s[0].charAt(0)==" "?s[0].substring(1):s[0];o==e.options.sCookieKey&&(r=s[1])}if(!r)return;oReg=new RegExp(e.options.matchPattern,"i"),e.element.find("a[href]").each(function(n,i){if(t(i).attr("href").match(oReg)){var s=e._addParameter(e.options.sCookieKey,r,t(i).attr("href"));t(i).attr("href",s)}})},_addParameter:function(e,t,n){if(!n)return;var r=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi"),i;if(r.test(n))return typeof t!="undefined"&&t!==null?n.replace(r,"$1"+e+"="+t+"$2$3"):(i=n.split("#"),n=i[0].replace(r,"$1$3").replace(/(&|\?)$/,""),typeof i[1]!="undefined"&&i[1]!==null&&(n+="#"+i[1]),n);if(typeof t!="undefined"&&t!==null){var s=n.indexOf("?")!==-1?"&":"?";return i=n.split("#"),n=i[0]+s+e+"="+t,typeof i[1]!="undefined"&&i[1]!==null&&(n+="#"+i[1]),n}return n}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_shoptrack.prototype.enhanceWithin(e.target)})}(),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_homepage_menu",n.ankama.widget,{options:{initSelector:".ak-homepage-menu"},_create:function(){var e=this,t=n(".ak-homepage-menu-content",e.element),r=n(".ak-homepage-menu-handler",e.element);t.on("click","a",function(e){r.html(n(e.target).clone()),t.css("display","none")}),r.on("click","a",function(e){e.preventDefault(),t.css("display",t.css("display")=="none"?"block":"none")})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_homepage_menu.prototype.enhanceWithin(e.target)})}(this),function(e){var t=require("ankama.widget");t.widget("ankama.ak_img_gif_player",t.ankama.widget,{options:{initSelector:".ak-img-gif-player"},_sState:"ready",_bBusy:!1,_jqGif:null,_create:function(){var e=this;e._jqGif=e.element.find(".ak-img-gif:first"),e.element.click(function(){if(e._bBusy)return;e._sState=="ready"&&e.loadGif()})},loadGif:function(){var e=this;e._bBusy=!0,e._jqGif.load(function(){e._jqGif.unbind("load"),e._setState("loading","loaded"),e._bBusy=!1}),e._jqGif.attr("src",e._jqGif.attr("data-gif-src")),e._setState("ready","loading")},_setState:function(e,t){this.element.removeClass("ak-state-"+e).addClass("ak-state-"+t),this._sState=t}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_img_gif_player.prototype.enhanceWithin(e.target,!0)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.
widget("ankama.ak_select_download",n.ankama.widget,{options:{initSelector:".ak-download-select"},_create:function(){var t=this,r=t.element;r.on("change",function(t){t.preventDefault();var i=n(this).val();i.indexOf("http://download.")!=-1?n("<iframe/>").attr({src:i,style:"visibility:hidden; display:none;"}).appendTo(r):e.open(i,"_blank")})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_select_download.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_game_auto_download",n.ankama.widget,{options:{initSelector:".ak-game-download",messageSelector:".ak-prepare-autodownload",interval:1e3,delay:3e3},oInterval:null,_create:function(){var e=this,t=e.element;if(e.options.autoDownload){var r=t.find(e.options.messageSelector);r.removeClass("hidden"),e.oInterval=setInterval(function(){if(e.options.delay<=0){clearInterval(e.oInterval);var i=n(t).find(".ak-btn-big");i.length&&(location.href=i.attr("href"))}r.find("span").html(e.options.delay/1e3),e.options.delay-=e.options.interval},e.options.interval)}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_game_auto_download.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("jquery");n.widget("ankama.ak_register_birthdate",n.ankama.widget,{options:{initSelector:".ak-register-birthdate",userMailSelector:'[name="useremail"]',limit:null},parentMailField:null,userMailField:null,defaultValue:"noreply@ankama.com",_create:function(){var e=this;this._superApply(arguments);if(e.options.limit===null)throw"Undefined age limit";e.parentMailField=n('[name="parentemail"]',e.element),e.userMailField=n(e.element).closest("form").find(e.options.userMailSelector),n(e.element).find("select").each(function(t,r){n(r).on("change",function(t){e._analyze()})}),e._analyze(),!e.currentState&&!e.parentMailField.val()&&e.parentMailField.val(e.defaultValue)},_analyze:function(){var e=this;e._dateValue()===!1?e._triggerMail():e._dateValue()>e.options.limit?e._triggerMail(!0):e._triggerMail()},checkInterval:null,currentState:!1,_triggerMail:function(e){var n=this;e=e==t?!1:e;if(e==n.currentState)return;var r=n.parentMailField.closest(".form-group");e?(n.parentMailField.val()==n.defaultValue&&n.parentMailField.val(""),r.show()):(r.hide(),n.parentMailField.val(n.defaultValue)),n.currentState=e},_dateValue:function(){var e=this;if(!e._check())return!1;var t=n('[name="birth_year"]',e.element).val(),r=n('[name="birth_month"]',e.element).val(),i=n('[name="birth_day"]',e.element).val();return r=r<10?"0"+r:r,i=i<10?"0"+i:i,t+"-"+r+"-"+i},_check:function(){var e=this;return parseInt(n('[name="birth_year"]',e.element).val())>0&&parseInt(n('[name="birth_month"]',e.element).val())>0&&parseInt(n('[name="birth_month"]',e.element).val())<13&&parseInt(n('[name="birth_day"]',e.element).val())>0&&parseInt(n('[name="birth_day"]',e.element).val())<=31}}),n(e).bind("ready widgetcreate",function(e){n.ankama.ak_register_birthdate.prototype.enhanceWithin(e.target)})}(document),function(e){var t=require("jquery"),n=require("lodash"),r=require("jquery.complexify");t.widget("ankama.ak_registerform",t.ankama.ak_simpleform,{options:{initSelector:".ak-registerform"},_create:function(){this._superApply(arguments)},remoteValidation:function(){this._superApply(arguments)},_init:function(){var e=this;this._superApply(arguments),this.getField("userpassword").complexify({minimumChars:8},function(e,n){var r=Math.round(n/100*5),i=/^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*).+$/gi,s=i.exec(t(this).val());s||(r=1);var o;r==0?o="":r==1?o="bad":r==2?o="low":r==3?o="medium":r==4?o="good":r>4&&(o="high");if(t(this).val().indexOf("<")!=-1||t(this).val().indexOf(">")!=-1||t(this).val().indexOf(" ")!=-1)o="";var u=t(this).closest(".form-group").find("#passwordpower").get(0);u&&(u.className=o)}),this._bind()},_oErrorFieldHandlers:{recaptcha_response_field:function(e,n){t(e).trigger("recaptcha_reload")}},formInvalidHandler:function(){this._superApply(arguments)},elementFocusOut:function(e,t){if(e.name=="recaptcha_response_field"||e.name=="usercaptcha")return;this._superApply(arguments)},elementSuccess:function(e,n){var r=this;this._superApply(arguments);switch(n.name){case"userlogin":case"usernickname":!t(n).hasClass("generate")&&!t(n).hasClass("genfocusattached")&&(t(n).addClass("genfocusattached"),t(n).closest(".form-group").find("input").on("focus.genbutton",function(e){e.currentTarget.name!="userlogin"&&(t(n).removeClass("genfocusattached"),t(n).closest(".form-group").find("input").off("focus.genbutton"),t(n).closest(".form-group").find(".genlink").hide())}));break;case"usercaptcha":this.element.find(".block_captcha .form-group").addClass("has-success")}},elementError:function(e,r,i){var s=this;this._superApply(arguments);var o=t(e).data("validate-result")||{};if(n.isEmpty(o))return!1;switch(e.name){case"usernickname":case"userlogin":if(o.result.suggests){t(e).closest(".form-group").find(".genlink").show();var u=t(e).closest(".form-group").find(".genlink button").first();u.bind("click",function(){t(e).val(n.take(n.shuffle(o.result.suggests))),t(e).addClass("generate"),t(e).one("blur",function(){t(e).removeClass("generate")}),s.jqValidator.element(e)}),u.one("mouseleave",function(){t(e).removeClass("generate"),s.jqValidator.element(e)})}}},checkPasswordStrength:function(){var e=-2,n=t(this);n.val()!=""&&(e=-1),n.val().search("[a-z]")!=-1&&(e=0),n.val().search("[ -/:-@[-`{-~]")!=-1&&e++,n.val().search("[0-9]")!=-1&&e++,n.val().length>12&&e++,e==0&&n.val().search("[A-Z]")!=-1&&e++;var r=t("#"+n.attr("aria-describedby")).find("#passwordpower").get(0);r.className=e==-1?"bad":e==0?"low":e==1?"medium":e==2?"good":e==3?"high":""},_giveCaptcha:function(){var e=this,n=this.element.find("img.captcha");n.attr("src",n.get(0).src.replace(/(t=[0-9]+)/i,"t="+Math.round(t.now()/1e3)))},_bind:function(){var e=this}}),t(document).bind("ready widgetcreate",function(e){t.ankama.ak_registerform.prototype.enhanceWithin(e.target)})}(),function(e,t){var n=require("jquery");n.widget("ankama.ak_registertracker",n.ankama.widget,{options:{initSelector:".ak-registertracker",code:""},_create:function(){this._superApply(arguments);if(this.options.code){var n=e.createElement("iframe");n.style.display="none",e.body.appendChild(n),n=n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument,n.document.open(),n.document.write(this.options.code),n.document.close()}}}),n(e).bind("ready widgetcreate",function(e){n.ankama.ak_registertracker.prototype.enhanceWithin(e.target)})}(document),function(e,t){"use strict";var n=require("jquery"),r=require("lodash");n.widget("ankama.ak_nicknameform",n.ankama.ak_simpleform,{options:{initSelector:".ak-nicknameform",sRedirectUrl:""},_onSubmitted:function(n,r,i,s,o){var u=this;setTimeout(function(){"location"in e&&(u.option("sRedirectUrl")?e.location.href=u.option("sRedirectUrl"):e.location.reload())},3e3)},elementSuccess:function(e,t){this._superApply(arguments);switch(t.name){case"usernickname":this.element.find(".genlink").hide()}},elementError:function(e,t,i){var s=this;this._superApply(arguments);var o=n(e).data("validate-result")||{};if(r.isEmpty(o))return!1;switch(e.name){case"usernickname":if(o.result.suggests){this.element.find(".genlink").show();var u=this.element.find(".genlink button").first();u.bind("click",function(){n(e).val(r.take(r.shuffle(o.result.suggests))),s.jqValidator.element(e)})}}}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_nicknameform.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash"),i=window.location.hash;n.widget("ankama.ak_account_login",n.ankama.widget,{options:{initSelector:".ak-account-login"},_create:function(){this._superApply(arguments);var e=i.split("&"),t=e&&e[0].split("=").length>0?e[0].split("=")[1]:null,r=e.length>1&&e[1].split("=").length>0?e[1].split("=")[1]:null;r!=null?(n("#userpass").focus(),n("#userlogin",this.element).val(r)):n("#userlogin",this.element).focus(),t&&(this.element.find(".errors_login_"+t).length>0&&(this.element.find(".infos_box").css("display","block"),this.element.find(".errors_login_"+t).show()),window.location.hash="")}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_account_login.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_characterbanner",n.ankama.widget,{options:{initSelector:".ak-character-banner"},_create:function(){var e=this,t=e.element,n=t.akOptions();t.find(".ak-character-picture-show").click(function(e){t.find(".ak-character-picture").show("fast",function(){t.find(".ak-character-picture-show").addClass("on")}),t.find(".ak-character-ornament").hide("fast",function(){t.find(".ak-character-ornament-show").removeClass("on")})}),t.find(".ak-character-ornament-show").click(function(e){t.find(".ak-character-picture").hide("fast",function(){t.find(".ak-character-picture-show").removeClass("on")}),t.find(".ak-character-ornament").show("fast",function(){t.find(".ak-character-ornament-show").addClass("on")})})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_characterbanner.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_backgroundbanner",n.ankama.widget,{options:{initSelector:".ak-backgroundbanner",bannerSelector:".ak-character-banner"},_create:function(){var e=this,t=n(e.options.bannerSelector),r=n(e.element).closest(".ak-modal"),i=n(e.element).find(".ak-confirmation");n(e.element).on("click",function(e){if(n(e.target).closest("button.ak-modal-close").length){n(r).ak_modal("close");return}if(n(e.target).closest("button.ak-cancel-choice").length)return;n(e.target).closest(".ak-image-block").length&&(n(t).css({backgroundImage:n(e.target).closest(".ak-image-block").find(".ak-image-container").css("backgroundImage")}),n(".ak-adminbanner").ak_adminbanner("setValue",n(e.target).closest(".ak-image-block").data("id")),n(".ak-adminbanner .confirmation-message").hide(),n(i).show(),n(r).ak_modal("close"))})},_confirm:function(){},_cancel:function(){}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_backgroundbanner.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_adminbanner",n.ankama.widget,{options:{initSelector:".ak-adminbanner",bannerSelector:".ak-character-banner"},_create:function(){var e=this;n(e.element).on("click",function(t){if(n(t.target).closest(".ak-confirm-choice").length){e._confirm();return}if(n(t.target).closest(".ak-cancel-choice").length){e._cancel();return}})},setValue:function(e){var t=this;t.iSelectedItem=e,n(t.element).find(".ak-confirmation").fadeIn()},_confirm:function(){var e=this;n(e.element).find(".ak-confirmation").fadeOut(),e.iSelectedItem&&(n.ajax({type:"post",url:e.options.postback_url,data:{iBackgroundId:e.iSelectedItem,postback:"admin_background"}}),n(e.element).find(".confirmation-message").fadeIn())},_cancel:function(){var e=this;n(e.element).find(".ak-confirmation").fadeOut(),n(e.options.bannerSelector).removeAttr("style"),n(e.options.bannerSelector).data("background")&&n(e.options.bannerSelector).css({backgroundImage:'url("'+n(e.options.bannerSelector).data("background")+'")'})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_adminbanner.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_characterequipment",n.ankama.widget,{options:{initSelector:".ak-caracteristics-content"},_create:function(){}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_characterequipment.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");n=require("jquery.ankama"),n.widget("ankama.ak_breed_render",n.ankama.widget,{options:{initSelector:".ak-breed-render-container",url:null,sRenderDestination:".ak-breed-render",sNextBreedSelector:".ak-breed-next-render",sPreviousBreedSelector:".ak-breed-previous-render",sBreedChoiceMaleSelector:".ak-breed-sex-choice-male",sBreedChoiceFemaleSelector:".ak-breed-sex-choice-female",sBreedSelectedClass:"ak-breed-sex-selected"},_iCurrentDirection:1,_sCurrentSex:"M",_aData:null,_getCreateOptions:function(){var e=this.element.data("options")||{};return e=r.extend(r.clone(this.options),this.element.akOptions(),e),e},_create:function(){this.element.on("click",this.options.sNextBreedSelector,n.proxy(this._onClickNextDirection,this)),this.element.on("click",this.options.sPreviousBreedSelector,n.proxy(this._onClickPreviousDirection,this)),this.element.on("click",this.options.sBreedChoiceMaleSelector,n.proxy(this._onClickSexMale,this)),this.element.on("click",this.options.sBreedChoiceFemaleSelector,n.proxy(this._onClickSexFemale,this))},_onClickPreviousDirection:function(){this._iCurrentDirection!=7?this._iCurrentDirection++:this._iCurrentDirection=0,this._displayRender()},_onClickNextDirection:function(){this._iCurrentDirection!=0?this._iCurrentDirection--:this._iCurrentDirection=7,this._displayRender()},_onClickSexFemale:function(){this._sCurrentSex=="M"&&(n(this.options.sBreedChoiceMaleSelector).removeClass(this.options.sBreedSelectedClass),this._sCurrentSex="F",n(this.options.sBreedChoiceFemaleSelector).addClass(this.options.sBreedSelectedClass),this._displayRender())},_onClickSexMale:function(){this._sCurrentSex=="F"&&(n(this.options.sBreedChoiceFemaleSelector).removeClass(this.options.sBreedSelectedClass),this._sCurrentSex="M",n(this.options.sBreedChoiceMaleSelector).addClass(this.options.sBreedSelectedClass),this._displayRender())},_displayRender:function(){var e=this,t=this.options.url+"/"+this._iCurrentDirection+"-"+this._sCurrentSex;n.ajax({url:t}).done(function(r){var i=function(){n(".ak-entitylook",e.element).replaceWith(r)},s=n(r);s.length&&s.is("img")?s.bind("load",i):i()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_breed_render.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_breed_select",n.ankama.widget,{options:{initSelector:".ak-breed-select",breedRender:".ak-breed-render",nextBreedSelector:".ak-breed-next",previousBreedSelector:".ak-breed-previous",breedChoiceMaleSelector:".ak-breed-sex-choice-male",breedChoiceFemaleSelector:".ak-breed-sex-choice-female"},currentBreed:null,currentSex:null,breeds:[],imageUrls:[],inputBreed:null,inputSex:null,linkSexMale:null,linkSexFemale:null,init:!1,_init:function(){var e=this;if(e.init===!0)return;var t=e.element.akOptions();t.breedId=parseInt(t.breedId),e.inputBreed=this.element.find('select[name="breed"]'),this.inputBreed.change(function(t){t.preventDefault(),e.displayRender("change")}),e.inputSex=this.element.find('input[name="sex"]');var i=n("div.ak-breed-select-target");i.length!==0&&i.append(e.inputBreed);var s=n("div.ak-breed-sex-choice-target");if(s.length!==0){var o=n("div.ak-breed-sex-choice");s.append(o)}e.currentSex=r.isUndefined(t.sex)?null:t.sex,e.breeds=r.isUndefined(t.breeds)?[]:t.breeds,e.imageUrls=r.isUndefined(t.imageUrls)?{}:t.imageUrls;var u=r.findIndex(e.breeds,{id:t.breedId});e.currentBreed=e.breeds[u],e.linkSexMale=n(this.options.breedChoiceMaleSelector),e.linkSexMale.click(function(t){t.preventDefault(),e.displayRender("male")}),e.linkSexFemale=n(this.options.breedChoiceFemaleSelector),n(this.options.breedChoiceFemaleSelector).click(function(t){t.preventDefault(),e.displayRender("female")}),e.init=!0},_create:function(){this.element.on("click",this.options.nextBreedSelector,n.proxy(this.onClickNextBreed,this)),this.element.on("click",this.options.previousBreedSelector,n.proxy(this.onClickPreviousBreed,this))},onClickNextBreed:function(e){e.preventDefault(),this.displayRender("next")},onClickPreviousBreed:function(e){e.preventDefault(),this.displayRender("previous")},displayRender:function(e){var t=this,n=this.element.find(t.options.breedRender).find("img.ak-entitylook");t.linkSexMale.removeClass("selected"),t.linkSexFemale.removeClass("selected");var i=null;if(e==="change"){var s=r.parseInt(t.inputBreed.val());i=r.findIndex(t.breeds,{id:s}),t.currentBreed=t.breeds[i]}if(e==="next"||e==="previous"){var o=t.breeds.length-1,u=r.findIndex(t.breeds,{id:t.currentBreed.id});i=e==="next"?u+1:u-1,i>o&&(i=0),i<0&&(i=o),t.currentBreed=t.breeds[i]}if(e==="male"||e==="female")t.currentSex=e==="male"?0:1;var a=this.element.find(".ak-breed-name");t.inputBreed.val(t.currentBreed.id),t.inputSex.val(t.currentSex),a.text(t.currentBreed.name),t.currentSex===0&&t.linkSexMale.addClass("selected"),t.currentSex===1&&t.linkSexFemale.addClass("selected");var f="breed_"+t.currentBreed.id+"_sex_"+t.currentSex,l=t.imageUrls[f];n.attr("src",l)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_breed_select.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_itemdetails",n.ankama.widget,{options:{initSelector:".ak-item-details-container"},_create:function(){var e=this;n(e.element).on("change",".ak-details-select",function(e){e.preventDefault(),n(this).closest("form").submit()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_itemdetails.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_setsbonus",n.ankama.widget,{options:{initSelector:".ak-set-bonus"},_create:function(){var e=this;n(this.element).on("change",".ak-set-bonus-select",function(e){e.preventDefault(),n(".set-bonus-list").hide(),n(".set-bonus-"+n(this).val()).show()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_setsbonus.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_companionsdetails",n.ankama.widget,{options:{initSelector:".ak-companions-details"},_create:function(){n(this.element).on("change",".ak-companions-details-level",function(e){e.preventDefault(),n(this).parent("form").submit()})}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_companionsdetails.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),r=require("lodash");n.widget("ankama.ak_widget_video",n.ankama.widget,{options:{initSelector:".ak-widget-video",sources:[]},_create:function(){var t=this,i=t.element.get(0);if(!t.options.sources)return;var s=function(){if(n("source",t.element).length>0||n.getCurrentProfile()==="mobile"||n.getCurrentProfile()==="tablet")return;r.each(t.options.sources,function(e){t.element.append(n("<source>").attr({type:e.type,src:e.src}))}),i.load(),i.play()},o=null;n(e).delegate(t.element,"resize",function(){clearTimeout(o),o=setTimeout(function(){o=null,s()},500)}),s()}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_widget_video.prototype.enhanceWithin(e.target)})}(this),function(e,t){"use strict";var n=require("ankama.widget"),r=require("lodash");n=require("jquery.ankama");var i=function(){e.scrollTo(0,this.element.find(this.options.animSelector).offset().top-100)},s=function(){};n.widget("ankama.ak_monster_spells",n.ankama.widget,{options:{initSelector:".ak-monster-spells",firstUrl:"",containerSelector:".ak-anim",animSelector:".ak-dofus-animation"},_jqAnimContainer:null,_sCurrentAnim:null,_bAnimInited:!1,_create:function(){this._jqAnimContainer=this.element.find(this.options.containerSelector),this.element.on("click","a",n.proxy(this._onClickAnimation,this)),this.options.firstUrl&&this._initAnimation(this.options.firstUrl)},_initAnimation:function(e){var t=this;this._bAnimInited=!0,this._jqAnimContainer.html(n("<div>").addClass(this.options.animSelector.substr(1)).data("url",e)),setTimeout(function(){t._jqAnimContainer.find(t.options.animSelector).ak_dofusanimation({clickable:!0,autostart:!0,loop:!1,start:n.proxy(i,t),end:n.proxy(s,t)})},0)},_onClickAnimation:function(e){e.preventDefault(),"href"in e.currentTarget&&(this._bAnimInited?this._jqAnimContainer.find(this.options.animSelector).ak_dofusanimation("changeURL",e.currentTarget.href).ak_dofusanimation("play"):this._initAnimation(e.currentTarget.href),this.element.find("a").closest(".ak-list-element").removeClass("selected"),n(e.currentTarget,this.element).closest(".ak-list-element").addClass("selected"))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_monster_spells.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget"),n=require("jquery.ankama"),r=require("lodash");n.widget("ankama.ak_dofusanimation",n.ankama.widget,{options:{initSelector:".ak-dofus-animation",loadingClass:"ak-dofus-animation-loading",autostart:!0,clickable:!0,loop:!0,fps:25,ready:null,start:null,progress:null,end:null},_bLoaded:!1,_currentTime:null,_currentFrame:null,_totalFrames:null,_bStop:!1,_onClickElement:function(e){if(!this._bLoaded)return;this._bStop=!this._bStop,this._bStop||this.play()},_create:function(){var e=this.element.width(),t=this.element.data("url");if(!t)throw new Error("Please provide a data-url");this.element.addClass(this.options.loadingClass),this._bLoaded=this._bStop=!1,this.options.autostart||(this._bStop=!0),this.options.clickable&&(this.element.addClass("ak-dofus-animation-clickable"),this.element.on("click",n.proxy(this._onClickElement,this))),this.elImage=new Image,n(this.elImage).on("load",n.proxy(this._onLoadImage,this)),this.elImage.src=t,this.elImage.complete&&n(this.elImage).load()},changeURL:function(t){t!=this.elImage.src&&(this.element.css("backgroundImage","none"),this.element.addClass(this.options.loadingClass),cancelAnimationFrame(n.proxy(this._animLoop,this)),this._bLoaded=!1,this.elImage.src=t,this.elImage.complete&&n(this.elImage).load())},_onLoadImage:function(){n(this.element).removeClass(this.options.loadingClass);if(!this.elImage.complete)return;this._bLoaded=!0,this._totalFrames=this.elImage.naturalWidth/this.element.width(),this.element.css("backgroundImage",'url("'+this.elImage.src+'")'),this._trigger("ready",null),this.options.autostart&&this.play()},play:function(){this._bStop=!1,this.element[0].style.backgroundPosition="-0px 0",this._currentFrame=0,this._currentTime=!1,this._trigger("start",null);if(!this._bLoaded){this.element.one(this.widgetName+"ready",n.proxy(this.play,this));return}requestAnimationFrame(n.proxy(this._animLoop,this))},_animLoop:function(t){this._currentTime||(this._currentTime=t);var r=(t-this._currentTime)/1e3;this._currentFrame+=r*this.options.fps;var i=Math.floor(this._currentFrame);i>=this._totalFrames&&(this.options.loop||(this._bStop=!0),this._bStop==1&&(cancelAnimationFrame(n.proxy(this._animLoop,this)),this._trigger("end",null)),this._currentFrame=i=0),this._bStop||(this._trigger("progress",null,{value:i}),requestAnimationFrame(n.proxy(this._animLoop,this)),this.element[0].style.backgroundPosition="-"+i*this.element.width()+"px 0",this._currentTime=t)},_destroy:function(){n(this.elImage).off("load"),this.element.off("click"),cancelAnimationFrame(n.proxy(this._animLoop,this))},_init:function(){}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_dofusanimation.prototype.enhanceWithin(e.target)}),function(){var t=0,n=["ms","moz","webkit","o"];for(var r=0;r<n.length&&!e.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(n,r){var i=(new Date).getTime(),s=Math.max(0,16-(i-t)),o=e.setTimeout(function(){n(i+s)},s);return t=i+s,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}()}(this);var $=require("jquery");define("facebook_tracking",["jquery"],function(e){var t=null;return window.jQuery=e,function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_fbq_event_tracking",n.ankama.ak_tracking_tracker,{_oProperties:{},options:{initSelector:".ak-fbq-event-tracking"},type:"aFbqEventTracking",_create:function(){var e=this;e._super(),e._oProperties=[];for(var r in e.options.ak_event_tracking){var i=e.options.ak_event_tracking[r],s=t.isNull(i.aFbqEventTracking)?null:i.aFbqEventTracking;if(!t.isArray(s))return!1;e._oProperties.push({_sType:s[0],_sEvent:s[1],_oParameters:s[2]})}if(e.element.prop("tagName")=="A"||e.element.prop("tagName")=="INPUT")n(e.element).on("click",function(t){for(var n=0;n<e.options.ak_event_tracking.length;n++)e._sendEvent(t,n)});else if(e.element.prop("tagName")=="FORM")n(e.element).on("submit",function(t){for(var n=0;n<e.options.ak_event_tracking.length;n++)e._sendEvent(t,n)});else for(var r=0;r<e.options.ak_event_tracking.length;r++)e._sendEvent(null,r);return!0},_sendEvent:function(t,n){var r=this,i=r._oProperties[n]._sType,s=r._oProperties[n]._sEvent,o=r._oProperties[n]._oParameters;typeof e.fbq=="function"&&(typeof o!="undefined"?(e.fbq(i,s,o),document.location.host.indexOf(".com")==-1&&console.log("Facebook Pixel :",i,s,o)):(e.fbq(i,s),document.location.host.indexOf(".com")==-1&&console.log("Facebook Pixel :",i,s)))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_fbq_event_tracking.prototype.enhanceWithin(e.target,!0)})}(this),delete window.jQuery,e}),define("googleanalytics_tracking",["jquery"],function(e){var t=null;return window.jQuery=e,function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_ga_event_tracking",n.ankama.ak_tracking_tracker,{_oProperties:{},options:{initSelector:".ak-ga-event-tracking"},type:"aGaEventTracking",_create:function(){var e=this;e._super(),e._oProperties=[];for(var r in e.options.ak_event_tracking){var i=e.options.ak_event_tracking[r],s=t.isNull(i.aGaEventTracking)?null:i.aGaEventTracking;if(!t.isArray(s))return!1;e._oProperties.push({_sMethod:s[0],_sHitType:s[1],_oFieldObject:s[2]})}if(e.element.prop("tagName")=="A"||e.element.prop("tagName")=="INPUT")n(e.element).on("click",function(t){for(var n=0;n<e.options.ak_event_tracking.length;n++)e._sendEvent(t,n)});else for(var r=0;r<e.options.ak_event_tracking.length;r++)e._sendEvent(null,r);return!0},_sendEvent:function(t,n){var r=this,i=r._oProperties[n]._sMethod,s=r._oProperties[n]._sHitType,o=r._oProperties[n]._oFieldObject;typeof e.ga=="function"?e.ga(i,s,o):console.log("Google Analytics :",i,s,o)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_ga_event_tracking.prototype.enhanceWithin(e.target,!0)})}(this),delete window.jQuery,e}),$("body").ak_privacy_cookies_settings(),($("body").ak_privacy_cookies_settings("hasConsent","fbtr")||$("body").ak_privacy_cookies_settings("hasConsent","ggan"))&&(function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_event_tracking",n.ankama.widget,{options:{initSelector:".ak-event-tracking"},trackerList:{aGaEventTracking:"ak-ga-event-tracking",aFbqEventTracking:"ak-fbq-event-tracking"},_create:function(){var e=this,r=e.element.akOptions(),i=t.isNull(r.ak_event_tracking)?null:r.ak_event_tracking;if(!t.isArray(i))return!1;for(var s=0;s<i.length;s++){var o=e.trackerList[Object.keys(i[s])[0]];if(e.element.is("."+o))continue;n(e.element).addClass(o)}return n(document).trigger("widgetcreate"),!0}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_event_tracking.prototype.enhanceWithin(e.target,!0)})}(this),function(e){var t=require("lodash"),n=require("ankama.widget");n.widget("ankama.ak_tracking_tracker",n.ankama.widget,{options:{ak_event_tracking:{}},_create:function(){var e=this,t=e.options.ak_event_tracking.filter(function(t){return t[e.type]!=undefined});e.options.ak_event_tracking=t}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_tracking_tracker.prototype.enhanceWithin(e.target,!0)})}(this),$("body").ak_privacy_cookies_settings("hasConsent","fbtr")&&require("facebook_tracking"),$("body").ak_privacy_cookies_settings("hasConsent","ggan")&&require("googleanalytics_tracking")),function(e,t){var n=require("ankama.widget");n.widget("ankama.ak_dofusuniverse_form",n.ankama.ak_simpleform,{options:{initSelector:".ak-dofusuniverse-form"},_create:function(){var e=this;n(".ak-submit").on("click",function(t){var n=e.element.find('[name="DOFUSUNIVERSE_ANSWER"]');n.is(":checked")?(n.closest(".form-group.ak-radios").removeClass("has-error"),n.closest(".form-group.ak-radios").find("label.ak-error").hide()):(n.closest(".form-group.ak-radios").addClass("has-error"),n.closest(".form-group.ak-radios").find("label.ak-error").show()),e.element.submit()}),this._superApply(arguments)},_init:function(){this._superApply(arguments)}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_dofusuniverse_form.prototype.enhanceWithin(e.target)})}(this),function(e,t){var n=require("ankama.widget");require("jquery.loadmask"),require("jquery.waypoints"),n.widget("ankama.ak_lazyload",n.ankama.widget,{options:{initSelector:".ak-lazyload",ajaxSrc:null,loading:!0,offset:200},_create:function(){var e=this,t=this.element;this.element.waypoint({offset:function(){return this.context.innerHeight()-this.adapter.outerHeight()+e.option("offset")},handler:function(){var r=e.option("loading");r&&t.mask(),e.option("ajaxSrc")?n.ajax(e.option("ajaxSrc"),{complete:function(){r&&t.unmask()}}).done(function(e){e?(t.html(e),t.trigger("widgetcreate")):t.remove()}):t.is("iframe")?(t.attr("src",t.data("lazyloadsrc")).removeAttr("data-lazyloadsrc"),r&&t.unmask()):(e._lazyload(),r&&t.unmask()),this.destroy()}})},_lazyload:function(){}}),n.widget("ankama.ak_lazyload_twitter",n.ankama.ak_lazyload,{options:{initSelector:".ak-lazyload-twitter"},_lazyload:function(){this._loadTwitter(document,"script","twitter-wjs")},_loadTwitter:function(e,t,n){var r,i=e.getElementsByTagName(t)[0],s=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src=s+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}}),n(document).bind("ready widgetcreate",function(e){n.ankama.ak_lazyload.prototype.enhanceWithin(e.target),n.ankama.ak_lazyload_twitter.prototype.enhanceWithin(e.target)})}(this);